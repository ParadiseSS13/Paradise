////////////////////////// AREAS //////////////////////////

/area/awaymission/DSBSSigma
	name = "DSBS:Sigma"
	icon_state = "away"
	report_alerts = FALSE
	ambientsounds = AWAY_MISSION_SOUNDS
	dynamic_lighting = DYNAMIC_LIGHTING_FORCED
	tele_proof = TRUE

/area/awaymission/DSBSSigma/exterior
	name = "Asteroid Exterior"
	icon_state = "away1"
	requires_power = FALSE

/area/awaymission/DSBSSigma/caverns
	name = "Asteroid Caverns"
	icon_state = "away2"
	requires_power = FALSE

/area/awaymission/DSBSSigma/lockdown
	name = "DSBS:Sigma - Lockdown Gate"
	icon_state = "green"
	requires_power = FALSE

/area/awaymission/DSBSSigma/overseer
	name = "DSBS:Sigma - Overseers Office"
	icon_state = "bridge"

/area/awaymission/DSBSSigma/cave_junction_east
	name = "DSBS:Sigma - Eastern Caves"
	icon_state = "dark"

/area/awaymission/DSBSSigma/cave_junction_west
	name = "DSBS:Sigma - Western Caves"
	icon_state = "dark128"

/area/awaymission/DSBSSigma/cave_junction_north
	name = "DSBS:Sigma - Northern Caves"
	icon_state = "dark160"

/area/awaymission/DSBSSigma/gateway
	name = "DSBS:Sigma - Gateway"
	icon_state = "bluenew"

/area/awaymission/DSBSSigma/mission_control
	name = "DSBS:Sigma - Mission Control"
	icon_state = "purple"

/area/awaymission/DSBSSigma/command
	name = "DSBS:Sigma - Command"
	icon_state = "blue2"

/area/awaymission/DSBSSigma/communications
	name = "DSBS:Sigma - Communications"
	icon_state = "blue-red2"

/area/awaymission/DSBSSigma/hangar
	name = "DSBS:Sigma - Hangar"
	icon_state = "red"

/area/awaymission/DSBSSigma/hangar_eva
	name = "DSBS:Sigma - Hangar EVA"
	icon_state = "red2"

/area/awaymission/DSBSSigma/hydroponics
	name = "DSBS:Sigma - Hydroponics"
	icon_state = "hydro"

/area/awaymission/DSBSSigma/engineering_lifesupport
	name = "DSBS:Sigma - Engineering and Life Support"
	icon_state = "engine"

/area/awaymission/DSBSSigma/janitorial
	name = "DSBS:Sigma - Janitorial"
	icon_state = "janitor"

/area/awaymission/DSBSSigma/disposal
	name = "DSBS:Sigma - Disposal"
	icon_state = "disposal"

/area/awaymission/DSBSSigma/dormitories
	name = "DSBS:Sigma - Dormitories"
	icon_state = "dorms"

/area/awaymission/DSBSSigma/mess_hall
	name = "DSBS:Sigma - Mess Hall"
	icon_state = "bluenew"

/area/awaymission/DSBSSigma/kitchen
	name = "DSBS:Sigma - Kitchen"
	icon_state = "kitchen"

/area/awaymission/DSBSSigma/restroom
	name = "DSBS:Sigma - Restrooms"
	icon_state = "restrooms"

/area/awaymission/DSBSSigma/storage
	name = "DSBS:Sigma - Storage"
	icon_state = "quartstorage"

/area/awaymission/DSBSSigma/medical_center
	name = "DSBS:Sigma - Medical Center"
	icon_state = "medbay"

/area/awaymission/DSBSSigma/cloning
	name = "DSBS:Sigma - Cloning"
	icon_state = "medbay2"

/area/awaymission/DSBSSigma/surgery
	name = "DSBS:Sigma - Surgery"
	icon_state = "medbay3"

/area/awaymission/DSBSSigma/holding_cells
	name = "DSBS:Sigma - Holding Cells"
	icon_state = "sec_prison"

/area/awaymission/DSBSSigma/chemistry_lab
	name = "DSBS:Sigma - Chemistry Lab"
	icon_state = "chem"

/area/awaymission/DSBSSigma/virology_lab
	name = "DSBS:Sigma - Virology Lab"
	icon_state = "virology"

/area/awaymission/DSBSSigma/science_lab
	name = "DSBS:Sigma - Science Lab"
	icon_state = "blue2"

/area/awaymission/DSBSSigma/armory
	name = "DSBS:Sigma - Armory"
	icon_state = "armory"

/area/awaymission/DSBSSigma/mech_bay
	name = "DSBS:Sigma - Mech Bay"
	icon_state = "mechbay"
	requires_power = TRUE

/area/awaymission/DSBSSigma/mining
	name = "DSBS:Sigma - Mining"
	icon_state = "mining"
	requires_power = TRUE

/area/awaymission/DSBSSigma/hive
	name = "DSBS:Sigma - Hive"
	icon_state = "purple"
	requires_power = TRUE

////////////////////////// OBJECTS //////////////////////////

//////// DECALS ////////

/obj/effect/turf_decal/woodsiding
	icon = 'icons/turf/floors.dmi'
	icon_state = "wood_siding1"

/obj/effect/turf_decal/woodsiding/woodsiding_n
	icon = 'icons/turf/floors.dmi'
	icon_state = "wood_siding1"

/obj/effect/turf_decal/woodsiding/woodsiding_s
	icon = 'icons/turf/floors.dmi'
	icon_state = "wood_siding2"

/obj/effect/turf_decal/woodsiding/woodsiding_n_s
	icon = 'icons/turf/floors.dmi'
	icon_state = "wood_siding3"

/obj/effect/turf_decal/woodsiding/woodsiding_e
	icon = 'icons/turf/floors.dmi'
	icon_state = "wood_siding4"

/obj/effect/turf_decal/woodsiding/woodsiding_ne
	icon = 'icons/turf/floors.dmi'
	icon_state = "wood_siding5"

/obj/effect/turf_decal/woodsiding/woodsiding_se
	icon = 'icons/turf/floors.dmi'
	icon_state = "wood_siding6"

/obj/effect/turf_decal/woodsiding/woodsiding_n_e_s
	icon = 'icons/turf/floors.dmi'
	icon_state = "wood_siding7"

/obj/effect/turf_decal/woodsiding/woodsiding_w
	icon = 'icons/turf/floors.dmi'
	icon_state = "wood_siding8"

/obj/effect/turf_decal/woodsiding/woodsiding_nw
	icon = 'icons/turf/floors.dmi'
	icon_state = "wood_siding9"

/obj/effect/turf_decal/woodsiding/woodsiding_sw
	icon = 'icons/turf/floors.dmi'
	icon_state = "wood_siding10"

/obj/effect/turf_decal/woodsiding/woodsiding_n_s_w
	icon = 'icons/turf/floors.dmi'
	icon_state = "wood_siding11"

/obj/effect/turf_decal/woodsiding/woodsiding_e_w
	icon = 'icons/turf/floors.dmi'
	icon_state = "wood_siding12"

/obj/effect/turf_decal/woodsiding/woodsiding_n_e_w
	icon = 'icons/turf/floors.dmi'
	icon_state = "wood_siding13"

/obj/effect/turf_decal/woodsiding/woodsiding_e_s_w
	icon = 'icons/turf/floors.dmi'
	icon_state = "wood_siding14"

/obj/effect/turf_decal/woodsiding/woodsiding_full
	icon = 'icons/turf/floors.dmi'
	icon_state = "wood_siding15"

//////// ITEMS ////////

/obj/item/paper/dsbssigma/note1
	name = "paper - 'Emergency Transmission'"
	header = "<p><img style='display: block; margin-left: auto; margin-right: auto;' src='syndielogo.png' width='220' height='135' /></p><hr />"
	info = {"<br>
	<b>This is an emergency transmission from Site Sigma to Syndicate High Command.</b><br><br>
	Our mining team has stirred up something in the depths of the asteroid. Contact with the excavation team was lost almost immediately following reports of hostile contacts.<br><br>
	Response team has been authorized to bring heavy armaments in response but are rapidly losing ground. The scale of combat is destabilizing the asteroid, reports of collapsed tunnels in multiple areas.<br><br>
	If the situation does not improve soon I shall order a full retreat and initiate the lockdown procedures. Should it come to it I shall await for any survivors in my quarters and then evacuate through the gateway with them.<br><br>
	Should there be no follow-up transmission consider Site Sigma lost and may our souls find rest.<br><br>
	<i>Officer Yao, CO of Site Sigma.</i><br>
	"}

/obj/item/paper/dsbssigma/note2
	name = "paper - 'Dusty Memo'"
	info = {"<br>
	Simmons, it seems an asteroid chunk has nicked the <b>south-eastern external airlock</b> again. Dented it pretty badly.<br><br>
	I know you've got a lot on your plate but station integrity takes priority. Get to it.<br><br>
	-<i>Charlie</i><br><br>
	P.S. - Almost forgot: please wire the lockdown gates between medical and science to the backup generator grid.<br><br>
	Having them on the cave junction is not ideal; should the junction lose power a simple crowbar would render the gate useless.<br>
	"}

/obj/item/paper/dsbssigma/note3
	name = "paper - 'Torn Note'"
	info = {"<br>
	<b>Reminder:</b><br>
	All new arrivals and temporary transfers onto the site need to be logged and then escorted to the dormitories.<br><br>
	Do not permit any unauthorized personnel travel further into space than the immediate asteroid perimeter catwalks to avoid automated defense incidents.<br>
	Those turrets are for keeping things <b>IN</b> as much as they are for keeping them out.<br><br>
	Coordinate with the security checkpoint there to ensure every one of them gets basic access to our facilities for the duration of their stay.<br><br>
	Issue any basic gear sh-<br>
	"}

/obj/item/paper/dsbssigma/note4
	name = "paper - 'Faded Note'"
	info = {"<br>
	<b>To Private Simmons:</b><br><br>
	First of all - let me apologize for not being able to welcome you to the team and show you the ropes in person.<br><br>
	Away missions have been increasingly demanding as of late and I'm scheduled for departure right before your arrival.<br><br>
	Regardless, you came as a recommended as a highly capable individual and should have no problem getting familiarized with our setup.<br>
	Here are the basic instructions for running out turbine generators:<br><br>
	<b>1:</b> Make sure the flow pumps from the O2 and Plasma chambers are enabled and pumping gas into the mixer.<br>
	<b>2:</b> Configure the mixer's ratios and enable it (when in doubt - set it to 50/50).<br>
	<b>3:</b> Note the gas flow meter to ensure the gas is flowing and enable the pumps along the pipeline leading into the ignition chambers (there should be 2 pumps per side, 1 directly after the mixer and 1 right before the chamber).<br>
	<b>4:</b> Ensuring that all doors are properly secured you may initiate the ignition by using the button next to the door controller.<br>
	<b>5:</b> Open the exterior output blast doors so the turbine does not overheat.<br>
	<b>6:</b> Initiate the turbine boot up procedure on the console and configure the SMES units to evenly match the output.<br><br>
	Best of luck to you! With me out - you're in charge of keeping this place patched up and running.<br><br>
	-<i>Quartermaster Lindsey.</i><br>
	"}

/obj/item/paper/dsbssigma/note5
	name = "paper - 'Stained Note'"
	info = {"<br>
	To whom ever is next on janitorial duty:<br><br>
	The disposal piping under dormitories appears to have clogged again, if the complaints about the odd smells are anything to go about.<br><br>
	Flush down some heavy duty cleaner and hope it clears it up so we don't have to bother the engineering staff again.<br><br>
	-<i>Lindsey.</i><br>
	"}

/obj/item/paper/dsbssigma/note6
	name = "paper - 'Torn Report'"
	info = {"<br>
	<b>Warden's Report, Cell 6 Incident.</b><br><br>
	<i>Somehow the prisoner in cell 6 managed to acquire a set of tools and kitchen utensils that they then used to, over the span of several-</i><br>
	"}

/obj/item/paper/dsbssigma/note7
	name = "paper - 'Torn Research Report'"
	info = {"<br><br><br><br>
	<i>-n further testing, <b>subject 701</b> appears to somehow developed a mutation rendering it highly resistant to viral pathogen. It has been locked up with other specimen, pending transport fo-</i><br>
	"}

/obj/item/paper/researchnotes/syndicate3
	name = "paper - 'syndicate research notes'"
	origin_tech = "syndicate=3"
	randomized = FALSE


/obj/item/organ/internal/heart/gland/heals/weak
	name = "fleshy growth"
	desc = "A nausea-inducing growth of flesh."
	origin_tech = "biotech=5"

/obj/item/organ/internal/heart/gland/heals/weak/activate()
	to_chat(owner, "<span class='notice'>You feel slightly revitalized.</span>")
	owner.adjustToxLoss(-10)
	owner.adjustBruteLoss(-10)
	owner.adjustOxyLoss(-10)
	owner.adjustFireLoss(-10)

/obj/item/ammo_casing/c10mm/spent
	projectile_type = null

/obj/item/ammo_casing/c45/spent
	projectile_type = null

////// MACHINERY //////

/obj/machinery/computer/id_upgrader/dsbssigma
	icon_keyboard = "laptop_key"
	door_to_open = "dsbss_lockdown_blast"
	upgrade_msg = "<span class='notice'>An access type was added to your ID card. You should be able to lift the lockdown with this.</span>"
	unlock_msg = "<span class='danger'>WARNING: New user registration during emergency lockdown. Limited lockdown lift in progress.</span>"

/obj/machinery/vending/medical/syndicate_access/dsbssigma
	req_access = list(ACCESS_AWAY01)
	products = list(/obj/item/reagent_containers/syringe = 4, /obj/item/reagent_containers/food/pill/patch/styptic = 2, /obj/item/reagent_containers/food/pill/patch/silver_sulf = 2, /obj/item/reagent_containers/applicator/brute = 1, /obj/item/reagent_containers/applicator/burn = 1,
					/obj/item/reagent_containers/glass/bottle/charcoal = 1, /obj/item/reagent_containers/glass/bottle/salicylic = 1, /obj/item/reagent_containers/glass/bottle/saline = 1, /obj/item/reagent_containers/glass/bottle/ether = 1,
					/obj/item/reagent_containers/glass/bottle/atropine = 1, /obj/item/reagent_containers/glass/bottle/oculine = 1, /obj/item/reagent_containers/glass/bottle/toxin = 1, /obj/item/reagent_containers/syringe/antiviral = 2,
					/obj/item/reagent_containers/syringe/insulin = 1, /obj/item/reagent_containers/hypospray/autoinjector = 2, /obj/item/reagent_containers/food/pill/salbutamol = 2, /obj/item/reagent_containers/food/pill/mannitol = 2, /obj/item/reagent_containers/food/pill/mutadone = 1,
					/obj/item/stack/medical/bruise_pack/advanced = 1, /obj/item/stack/medical/ointment/advanced = 1, /obj/item/stack/medical/bruise_pack = 2, /obj/item/stack/medical/splint = 2, /obj/item/reagent_containers/glass/beaker = 2, /obj/item/reagent_containers/dropper = 1,
					/obj/item/healthanalyzer = 1, /obj/item/healthupgrade = 1, /obj/item/reagent_containers/iv_bag/slime = 1)
	contraband = list(/obj/item/reagent_containers/glass/bottle/sulfonal = 1, /obj/item/reagent_containers/glass/bottle/pancuronium = 1)

/obj/machinery/autolathe/hacked
	hacked = TRUE

/obj/machinery/autolathe/hacked/Initialize()
    ..()
    adjust_hacked(TRUE)

/obj/machinery/door_control/away/dsbssigma_lockdown_random
	name = "Emergency Lockdown Control"
	req_access = list(ACCESS_AWAY01)
	var/beenused = FALSE

/obj/machinery/door_control/away/dsbssigma_lockdown_random/attack_hand(mob/user as mob)
	..()
	if(allowed(user) && (wires & 1) && !beenused)
		beenused = TRUE
		stat = BROKEN
		playsound(loc, "sparks", 100, 1)
		do_sparks(3, 1, src)
		to_chat(user, "<span class='notice'>The button sparks and breaks. It seems only some sections of the base have been unlocked.</span>")

/obj/machinery/door_control/away/dsbssigma_lockdown_random/Initialize()
	..()
	switch(rand(1,3))
		if(1)
			id = "dsbss_lockdown_blast_medical"
		if(2)
			id = "dsbss_lockdown_blast_botany"
		if(3)
			id = "dsbss_lockdown_blast_research"

//////// MECHA ////////

/obj/mecha/combat/gygax/dark/rusted
	desc = "This once lightweight exosuit, painted in a dark scheme, has not been spared by the elements. Exterior armor is heavily rusted and most equipment sockets have decayed beyond repair."
	name = "Rusted Dark Gygax"
	max_integrity = 200
	deflect_chance = 10
	armor = list(melee = 20, bullet = 20, laser = 25, energy = 20, bomb = 10, bio = 0, rad = 10, fire = 50, acid = 50)
	max_temperature = 25000
	leg_overload_coeff = 50
	operation_req_access = list(ACCESS_AWAY01)
	internal_damage_threshold = 25
	max_equip = 0
	destruction_sleep_duration = 2

/obj/mecha/combat/gygax/dark/rusted/add_cell()
	cell = new /obj/item/stock_parts/cell/high(src)

/obj/mecha/combat/gygax/dark/rusted/onTransitZ()
	do_sparks(3, 1, src)
	take_damage(300, BRUTE)

////// STRUCTURES //////

/obj/structure/displaycase/telecrystal/dsbssigma
	req_access = list(ACCESS_AWAY01)

/////// SPAWNERS ///////

/obj/effect/landmark/away/dsbssigma
	name = "dsbssigma_landmark"
	icon = 'icons/misc/mark.dmi'
	icon_state = "r_land"
	color = "#0055b3"

/obj/effect/spawner/random_spawners/away
	name = "random spawners"
	result = list(/datum/nothing = 1)
	spawn_inside = null

///LOOT///

/obj/effect/spawner/random_spawners/away/dsbssigma/loot
	icon = 'icons/misc/mark.dmi'
	icon_state = "r_loot"
	color = "#1ad600"

/obj/effect/spawner/random_spawners/away/dsbssigma/loot/cleaning
	name = "cleaning supplies spawner"
	result = list(
	/obj/item/reagent_containers/spray/cleaner = 1,
	/obj/item/soap/syndie = 1)

/obj/effect/spawner/random_spawners/away/dsbssigma/loot/goggles_science
	name = "science goggle spawner"
	result = list(
	/obj/item/clothing/glasses/science = 3,
	/obj/item/clothing/glasses/science/night = 2)

/obj/effect/spawner/random_spawners/away/dsbssigma/loot/goggles_welding
	name = "welding goggle spawner"
	result = list(
	/obj/item/clothing/head/welding = 1,
	/obj/item/clothing/glasses/welding = 2,
	/obj/item/clothing/glasses/welding/superior = 1)

/obj/effect/spawner/random_spawners/away/dsbssigma/loot/pistolammo
	name = "pistol ammo spawner"
	result = list(
	/obj/item/ammo_box/magazine/m10mm = 2,
	/obj/item/ammo_box/magazine/m10mm/ap = 1,
	/obj/item/ammo_box/magazine/m10mm/hp = 1,
	/obj/item/ammo_box/magazine/m10mm/fire = 1)

/obj/effect/spawner/random_spawners/away/dsbssigma/loot/healinjector_40pc
	name = "healinjector 40 percent"
	result = list(
	/datum/nothing = 13,
	/obj/item/reagent_containers/hypospray/autoinjector/nanocalcium = 2,
	/obj/item/reagent_containers/hypospray/autoinjector/survival = 2)

/obj/effect/spawner/random_spawners/away/dsbssigma/loot/implant_arm
	name = "arm implant spawner"
	result = list(
	/obj/item/organ/internal/cyberimp/arm/advmop = 1,
	/obj/item/organ/internal/cyberimp/arm/botanical = 2,
	/obj/item/organ/internal/cyberimp/arm/janitorial = 2,
	/obj/item/organ/internal/cyberimp/arm/surgery = 2,
	/obj/item/organ/internal/cyberimp/arm/toolset = 2)

/obj/effect/spawner/random_spawners/away/dsbssigma/loot/implant_other
	name = "other implant spawner"
	result = list(
	/datum/nothing = 60,
	/obj/item/organ/internal/cyberimp/eyes/hud/medical = 15,
	/obj/item/organ/internal/cyberimp/eyes/meson = 20,
	/obj/item/organ/internal/cyberimp/eyes/shield = 20,
	/obj/item/organ/internal/cyberimp/chest/nutriment = 20,
	/obj/item/organ/internal/cyberimp/brain/anti_drop = 2,
	/obj/item/organ/internal/cyberimp/brain/anti_sleep = 2)

/obj/effect/spawner/random_spawners/away/dsbssigma/loot/safe_loot_high
	name = "safe high value loot spawner"
	result = list(
	/obj/item/pen/edagger = 5,
	/obj/item/chameleon = 3,
	/obj/item/clothing/shoes/magboots/syndie/advance = 3,
	/obj/item/storage/box/syndie_kit/hardsuit = 2,
	/obj/item/implanter/storage = 5,
	/obj/item/gun/projectile/automatic/shotgun/bulldog = 1)

/obj/effect/spawner/random_spawners/away/dsbssigma/loot/safe_loot_low
	name = "safe low value loot spawner"
	result = list(
	/obj/item/clothing/suit/storage/lawyer/blackjacket/armored = 10,
	/obj/item/jammer = 7,
	/obj/item/camera_bug = 7,
	/obj/item/dnascrambler = 7,
	/obj/item/clothing/gloves/color/black/thief = 5,
	/obj/item/clothing/shoes/chameleon/noslip = 15,
	/obj/item/clothing/under/chameleon = 15)

/// MOBS ///

/obj/effect/spawner/random_spawners/away/dsbssigma/mob
	icon = 'icons/misc/mark.dmi'
	icon_state = "r_mob"
	color = "#c80004"

/obj/effect/spawner/random_spawners/away/dsbssigma/mob/alien
	name = "random alien spawner"
	result = list(
	/mob/living/simple_animal/hostile/alien = 1,
	/mob/living/simple_animal/hostile/alien/drone = 1,
	/mob/living/simple_animal/hostile/alien/sentinel = 1)

/obj/effect/spawner/random_spawners/away/dsbssigma/mob/alien_guard
	name = "random alien guard spawner"
	color = "#960018"
	result = list(
	/mob/living/simple_animal/hostile/alien/stationary = 1,
	/mob/living/simple_animal/hostile/alien/sentinel/stationary = 1)

/obj/effect/spawner/random_spawners/away/dsbssigma/mob/alien_50pc
	name = "random alien spawner 50pc"
	color = "#ff7700"
	result = list(
	/datum/nothing = 3,
	/mob/living/simple_animal/hostile/alien = 1,
	/mob/living/simple_animal/hostile/alien/drone = 1,
	/mob/living/simple_animal/hostile/alien/sentinel = 1)

/obj/effect/spawner/random_spawners/away/dsbssigma/mob/alien_30pc
	name = "random alien spawner 30pc"
	color = "#ffc800"
	result = list(
	/datum/nothing = 7,
	/mob/living/simple_animal/hostile/alien = 1,
	/mob/living/simple_animal/hostile/alien/drone = 1,
	/mob/living/simple_animal/hostile/alien/sentinel = 1)

/obj/effect/spawner/random_spawners/away/dsbssigma/mob/alien_stationary
	name = "random stationary alien spawner"
	result = list(
	/mob/living/simple_animal/hostile/alien/stationary = 1,
	/mob/living/simple_animal/hostile/alien/drone/stationary = 1,
	/mob/living/simple_animal/hostile/alien/sentinel/stationary = 1)

/obj/effect/spawner/random_spawners/away/dsbssigma/mob/alien_stationary_50pc
	name = "random stationary alien spawner 50pc"
	color = "#ff7700"
	result = list(
	/datum/nothing = 3,
	/mob/living/simple_animal/hostile/alien/stationary = 1,
	/mob/living/simple_animal/hostile/alien/drone/stationary = 1,
	/mob/living/simple_animal/hostile/alien/sentinel/stationary = 1)

/obj/effect/spawner/random_spawners/away/dsbssigma/mob/alien_stationary_30pc
	name = "random stationary alien spawner 30pc"
	color = "#ffc800"
	result = list(
	/datum/nothing = 7,
	/mob/living/simple_animal/hostile/alien/stationary = 1,
	/mob/living/simple_animal/hostile/alien/drone/stationary = 1,
	/mob/living/simple_animal/hostile/alien/sentinel/stationary = 1)

/obj/effect/spawner/random_spawners/away/dsbssigma/mob/dead_monkey_50pc
	name = "dead monkey 50pc"
	color = "#0e7500"
	result = list(
	/datum/nothing = 1,
	/obj/effect/mob_spawn/human/corpse/away/dsbssigma/monkey = 1)

/// RANDOMIZER ///

/obj/effect/spawner/random_spawners/away/dsbssigma/randomizer
	name = "spawn randomizer"
	icon_state = "x"
	color = "#800080"
	early_del = FALSE
	var/r_location = null
	var/r_object = null

/obj/effect/spawner/random_spawners/away/dsbssigma/randomizer/proc/randomize(r_location, r_object)
	var/list/possible_locations = list()
	for(var/thing in GLOB.landmarks_list)
		var/obj/effect/landmark/away/L = thing
		if(L.name == r_location)
			possible_locations |= L
	if(length(possible_locations))
		var/obj/effect/landmark/S = pick(possible_locations)
		new r_object(get_turf(S))

/obj/effect/spawner/random_spawners/away/dsbssigma/randomizer/Initialize()
	..()
	return INITIALIZE_HINT_LATELOAD

/obj/effect/spawner/random_spawners/away/dsbssigma/randomizer/LateInitialize()

	r_location = "dsbssigma_queen"
	r_object = /mob/living/simple_animal/hostile/alien/queen/large/dsbssigma
	randomize(r_location, r_object)

	r_location = "dsbssigma_miner"
	r_object = /obj/effect/mob_spawn/human/corpse/away/dsbssigma/operative/miner
	randomize(r_location, r_object)

	r_location = "dsbssigma_organ"
	r_object = /obj/item/organ/internal/heart/gland/heals/weak
	randomize(r_location, r_object)

	r_location = "dsbssigma_fireaxe"
	r_object = /obj/item/twohanded/fireaxe
	randomize(r_location, r_object)

	r_location = "dsbssigma_toolbox"
	r_object = /obj/item/storage/toolbox/syndicate
	randomize(r_location, r_object)

	qdel(src)

////////////////////////// MOBS //////////////////////////

/obj/effect/mob_spawn/human/corpse/away/dsbssigma/simmons
	brute_damage = 1000
	name = "William Simmons"
	mob_name = "William Simmons"
	gender = "male"
	hair_style = "cut"
	facial_hair_style = "shaved"
	uniform = /obj/item/clothing/under/syndicate
	shoes = /obj/item/clothing/shoes/combat
	gloves = /obj/item/clothing/gloves/color/black
	l_pocket = /obj/item/radio

/obj/effect/mob_spawn/human/corpse/away/dsbssigma/yao
	brute_damage = 1000
	name = "Xiu Yao"
	mob_name = "Xiu Yao"
	gender = "male"
	hair_style = "bald"
	facial_hair_style = "gt"
	uniform = /obj/item/clothing/under/syndicate
	shoes = /obj/item/clothing/shoes/laceup
	gloves = /obj/item/clothing/gloves/combat
	head = /obj/item/clothing/head/beret

/obj/effect/mob_spawn/human/corpse/away/dsbssigma/operative
	brute_damage = 1000
	name = "Operative"
	mob_name = "Operative"
	uniform = /obj/item/clothing/under/syndicate
	shoes = /obj/item/clothing/shoes/jackboots
	gloves = /obj/item/clothing/gloves/color/black

/obj/effect/mob_spawn/human/corpse/away/dsbssigma/operative/miner
	shoes = /obj/item/clothing/shoes/workboots/mining
	head = /obj/item/clothing/head/hardhat
	suit = /obj/item/clothing/suit/storage/hazardvest
	belt = /obj/item/storage/belt/military/traitor

/obj/effect/mob_spawn/human/corpse/away/dsbssigma/monkey
	mob_species = /datum/species/monkey

/obj/effect/mob_spawn/human/corpse/away/dsbssigma/monkey/equip(mob/M)
	..()
	M.reagents.add_reagent("formaldehyde", 1)

/mob/living/simple_animal/hostile/carp/dumpstershark
	icon = 'icons/mob/alienqueen.dmi'
	name = "Dumpster Shark"
	desc = "A ferocious, fang bearing creature that resembles a shark. The bane of space-trash-men everywhere."
	icon_state = "megacarp"
	icon_living = "megacarp"
	icon_dead = "megacarp_dead"
	icon_gib = "megacarp_gib"
	gold_core_spawnable = NO_SPAWN
	maxHealth = 120
	health = 120
	pixel_x = -16
	mob_size = MOB_SIZE_LARGE
	wander = FALSE
	random_color = FALSE
	butcher_results = list(/obj/item/toddler = 1, /obj/item/reagent_containers/food/snacks/carpmeat = 2)
	obj_damage = 80
	melee_damage_lower = 30
	melee_damage_upper = 20
	move_to_delay = 5
	robust_searching = TRUE

/mob/living/simple_animal/hostile/carp/stationary
	wander = FALSE

/mob/living/simple_animal/hostile/syndicate/ranged/dsbssigma
	name = "Staff Sgt Hope"
	desc = "Battered, wounded and on the verge of insanity, but determined to survive. As the saying goes, Hope dies last!"
	robust_searching = TRUE
	stat_attack = UNCONSCIOUS
	loot = list()
	maxHealth = 200
	health = 200
	del_on_death = TRUE
	ranged = TRUE
	rapid = 1
	retreat_distance = 3
	minimum_distance = 1
	melee_damage_lower = 20
	melee_damage_upper = 25
	icon_state = "syndicate_pistol_alt"
	icon_living = "syndicate_pistol_alt"
	projectiletype = /obj/item/projectile/bullet/armourpiercing
	casingtype = /obj/item/ammo_casing/c10mm/ap
	projectilesound = 'sound/weapons/gunshots/gunshot_pistol.ogg'
	environment_smash = FALSE
	see_in_dark = 8

/mob/living/simple_animal/hostile/syndicate/ranged/dsbssigma/death()
	new /obj/effect/gibspawner/human(get_turf(src))
	return ..()

/mob/living/simple_animal/hostile/alien/stationary
	wander = FALSE

/mob/living/simple_animal/hostile/alien/drone/stationary
	wander = FALSE

/mob/living/simple_animal/hostile/alien/sentinel/stationary
	wander = FALSE

/mob/living/simple_animal/hostile/alien/queen/large/dsbssigma
	wander = FALSE
	var/hasdied = FALSE

/mob/living/simple_animal/hostile/alien/queen/large/dsbssigma/death()
	if(can_die() && !hasdied)
		hasdied = TRUE
		UnlockBlastDoors("dsbss_overseersquarters_blast")
		for(var/mob/M in GLOB.player_list)
			if(M.z == z)
				to_chat(M, "<span class='notice'>You hear a distant sound of a blast door opening.</span>")
				M.playsound_local(null, 'sound/machines/blastdoor.ogg', 10, 1)
	return ..()

/mob/living/simple_animal/hostile/alien/queen/large/dsbssigma/proc/UnlockBlastDoors(target_id_tag)
	for(var/obj/machinery/door/poddoor/P in GLOB.airlocks)
		if(P.density && P.id_tag == target_id_tag && P.z == z && !P.operating)
			P.open()
