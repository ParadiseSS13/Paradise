<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/local_powernet - Space Station 13</title></head><body><header><a href="index.html">Space Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/local_powernet.html#var">Var Details</a> - <a href="datum/local_powernet.html#proc">Proc Details</a></header><main><h1>local_powernet <aside>/<a href="datum.html">datum</a>/<a href="datum/local_powernet.html">local_powernet</a></aside> <a href="https://github.com/ParadiseSS13/Paradise/blob/b5514069efa5f2c5a6aed3be3811502a06d2b33a/code/modules/power/powernets/local_powernet.dm#L11"><img src="git.png" width="16" height="16" title="code/modules/power/powernets/local_powernet.dm 11"></a></h1><p>Manages all power related mechanics for a single /area
Machines in areas will directly register to this datum in order to receive power</p>
<p>Machine/Turf/Item -&gt; Local Powernet -&gt; APC -&gt; Terminal -&gt; Wirenet</p>
<p>Non-machines cannot register to the local powernet and should instead listen for power change signals</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/local_powernet.html#var/active_consumption">active_consumption</a></th><td>The amount of total power consumed consumed in only this cycle</td></tr><tr><th><a href="datum/local_powernet.html#var/environment_consumption">environment_consumption</a></th><td>The amount of power consumed by environment in this power cycle</td></tr><tr><th><a href="datum/local_powernet.html#var/environment_powered">environment_powered</a></th><td>Is the environment power channel on?</td></tr><tr><th><a href="datum/local_powernet.html#var/equipment_consumption">equipment_consumption</a></th><td>The amount of power consumed by equipment in this power cycle</td></tr><tr><th><a href="datum/local_powernet.html#var/equipment_powered">equipment_powered</a></th><td>Is the equipment power channel on?</td></tr><tr><th><a href="datum/local_powernet.html#var/lighting_consumption">lighting_consumption</a></th><td>The amount of power consumed by lighting in this power cycle</td></tr><tr><th><a href="datum/local_powernet.html#var/lighting_powered">lighting_powered</a></th><td>Is the lighting power channel on?</td></tr><tr><th><a href="datum/local_powernet.html#var/passive_environment_consumption">passive_environment_consumption</a></th><td>The amount of power consumed by environment in every power cycle</td></tr><tr><th><a href="datum/local_powernet.html#var/passive_equipment_consumption">passive_equipment_consumption</a></th><td>The amount of power consumed by equipment in every power cycle</td></tr><tr><th><a href="datum/local_powernet.html#var/passive_lighting_consumption">passive_lighting_consumption</a></th><td>The amount of power consumed by lighting in every power cycle</td></tr><tr><th><a href="datum/local_powernet.html#var/power_flags">power_flags</a></th><td>Bit Flags indicating special behaviour on this powernet, always powered, never powered, etc</td></tr><tr><th><a href="datum/local_powernet.html#var/powernet_apc">powernet_apc</a></th><td>The APC associated with this powernet</td></tr><tr><th><a href="datum/local_powernet.html#var/powernet_area">powernet_area</a></th><td>The area this local powernet is attached to</td></tr><tr><th><a href="datum/local_powernet.html#var/registered_machines">registered_machines</a></th><td>All machines registered to this local powernet, strictly typed to machines, everything else needs to register power change signals</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/local_powernet.html#proc/adjust_static_power">adjust_static_power</a></th><td>Adjust static power for a specified channel, does not check to see if channel has power flowing into it</td></tr><tr><th><a href="datum/local_powernet.html#proc/get_channel_usage">get_channel_usage</a></th><td>returns active + passive power of a channel, if the channel is not powered it returns 0 watts</td></tr><tr><th><a href="datum/local_powernet.html#proc/get_total_usage">get_total_usage</a></th><td>Returns the local powernets total power usage between all three of its channels, only includes usage on currently powered channels</td></tr><tr><th><a href="datum/local_powernet.html#proc/handle_flicker">handle_flicker</a></th><td>Handles flicker operations for apc processing, will flicker machines and lights in the powernet's area by random chance</td></tr><tr><th><a href="datum/local_powernet.html#proc/has_power">has_power</a></th><td>checks to see if the given channel in this local powernet has power</td></tr><tr><th><a href="datum/local_powernet.html#proc/power_change">power_change</a></th><td></td></tr><tr><th><a href="datum/local_powernet.html#proc/register_machine">register_machine</a></th><td>tethers a machine to this local powernet</td></tr><tr><th><a href="datum/local_powernet.html#proc/set_power_channel">set_power_channel</a></th><td>sets a power channel on or off and adjusts total power usage accordingly</td></tr><tr><th><a href="datum/local_powernet.html#proc/unregister_machine">unregister_machine</a></th><td>untethers a machine to this local powernet</td></tr><tr><th><a href="datum/local_powernet.html#proc/use_active_power">use_active_power</a></th><td>Add active power usage to the given channel, returns FALSE is channel cannot be found or the channel does not have power to give</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/active_consumption"><aside class="declaration">var </aside>active_consumption <aside>– </aside> <a href="https://github.com/ParadiseSS13/Paradise/blob/b5514069efa5f2c5a6aed3be3811502a06d2b33a/code/modules/power/powernets/local_powernet.dm#L45"><img src="git.png" width="16" height="16" title="code/modules/power/powernets/local_powernet.dm 45"></a></h3><p>The amount of total power consumed consumed in only this cycle</p><h3 id="var/environment_consumption"><aside class="declaration">var </aside>environment_consumption <aside>– </aside> <a href="https://github.com/ParadiseSS13/Paradise/blob/b5514069efa5f2c5a6aed3be3811502a06d2b33a/code/modules/power/powernets/local_powernet.dm#L41"><img src="git.png" width="16" height="16" title="code/modules/power/powernets/local_powernet.dm 41"></a></h3><p>The amount of power consumed by environment in this power cycle</p><h3 id="var/environment_powered"><aside class="declaration">var </aside>environment_powered <aside>– </aside> <a href="https://github.com/ParadiseSS13/Paradise/blob/b5514069efa5f2c5a6aed3be3811502a06d2b33a/code/modules/power/powernets/local_powernet.dm#L25"><img src="git.png" width="16" height="16" title="code/modules/power/powernets/local_powernet.dm 25"></a></h3><p>Is the environment power channel on?</p><h3 id="var/equipment_consumption"><aside class="declaration">var </aside>equipment_consumption <aside>– </aside> <a href="https://github.com/ParadiseSS13/Paradise/blob/b5514069efa5f2c5a6aed3be3811502a06d2b33a/code/modules/power/powernets/local_powernet.dm#L37"><img src="git.png" width="16" height="16" title="code/modules/power/powernets/local_powernet.dm 37"></a></h3><p>The amount of power consumed by equipment in this power cycle</p><h3 id="var/equipment_powered"><aside class="declaration">var </aside>equipment_powered <aside>– </aside> <a href="https://github.com/ParadiseSS13/Paradise/blob/b5514069efa5f2c5a6aed3be3811502a06d2b33a/code/modules/power/powernets/local_powernet.dm#L21"><img src="git.png" width="16" height="16" title="code/modules/power/powernets/local_powernet.dm 21"></a></h3><p>Is the equipment power channel on?</p><h3 id="var/lighting_consumption"><aside class="declaration">var </aside>lighting_consumption <aside>– </aside> <a href="https://github.com/ParadiseSS13/Paradise/blob/b5514069efa5f2c5a6aed3be3811502a06d2b33a/code/modules/power/powernets/local_powernet.dm#L39"><img src="git.png" width="16" height="16" title="code/modules/power/powernets/local_powernet.dm 39"></a></h3><p>The amount of power consumed by lighting in this power cycle</p><h3 id="var/lighting_powered"><aside class="declaration">var </aside>lighting_powered <aside>– </aside> <a href="https://github.com/ParadiseSS13/Paradise/blob/b5514069efa5f2c5a6aed3be3811502a06d2b33a/code/modules/power/powernets/local_powernet.dm#L23"><img src="git.png" width="16" height="16" title="code/modules/power/powernets/local_powernet.dm 23"></a></h3><p>Is the lighting power channel on?</p><h3 id="var/passive_environment_consumption"><aside class="declaration">var </aside>passive_environment_consumption <aside>– </aside> <a href="https://github.com/ParadiseSS13/Paradise/blob/b5514069efa5f2c5a6aed3be3811502a06d2b33a/code/modules/power/powernets/local_powernet.dm#L33"><img src="git.png" width="16" height="16" title="code/modules/power/powernets/local_powernet.dm 33"></a></h3><p>The amount of power consumed by environment in every power cycle</p><h3 id="var/passive_equipment_consumption"><aside class="declaration">var </aside>passive_equipment_consumption <aside>– </aside> <a href="https://github.com/ParadiseSS13/Paradise/blob/b5514069efa5f2c5a6aed3be3811502a06d2b33a/code/modules/power/powernets/local_powernet.dm#L29"><img src="git.png" width="16" height="16" title="code/modules/power/powernets/local_powernet.dm 29"></a></h3><p>The amount of power consumed by equipment in every power cycle</p><h3 id="var/passive_lighting_consumption"><aside class="declaration">var </aside>passive_lighting_consumption <aside>– </aside> <a href="https://github.com/ParadiseSS13/Paradise/blob/b5514069efa5f2c5a6aed3be3811502a06d2b33a/code/modules/power/powernets/local_powernet.dm#L31"><img src="git.png" width="16" height="16" title="code/modules/power/powernets/local_powernet.dm 31"></a></h3><p>The amount of power consumed by lighting in every power cycle</p><h3 id="var/power_flags"><aside class="declaration">var </aside>power_flags <aside>– </aside> <a href="https://github.com/ParadiseSS13/Paradise/blob/b5514069efa5f2c5a6aed3be3811502a06d2b33a/code/modules/power/powernets/local_powernet.dm#L18"><img src="git.png" width="16" height="16" title="code/modules/power/powernets/local_powernet.dm 18"></a></h3><p>Bit Flags indicating special behaviour on this powernet, always powered, never powered, etc</p><h3 id="var/powernet_apc"><aside class="declaration">var </aside>powernet_apc <aside>– /<a href="obj.html">obj</a>/<a href="obj/machinery.html">machinery</a>/<a href="obj/machinery/power.html">power</a>/<a href="obj/machinery/power/apc.html">apc</a></aside> <a href="https://github.com/ParadiseSS13/Paradise/blob/b5514069efa5f2c5a6aed3be3811502a06d2b33a/code/modules/power/powernets/local_powernet.dm#L15"><img src="git.png" width="16" height="16" title="code/modules/power/powernets/local_powernet.dm 15"></a></h3><p>The APC associated with this powernet</p><h3 id="var/powernet_area"><aside class="declaration">var </aside>powernet_area <aside>– /<a href="area.html">area</a></aside> <a href="https://github.com/ParadiseSS13/Paradise/blob/b5514069efa5f2c5a6aed3be3811502a06d2b33a/code/modules/power/powernets/local_powernet.dm#L13"><img src="git.png" width="16" height="16" title="code/modules/power/powernets/local_powernet.dm 13"></a></h3><p>The area this local powernet is attached to</p><h3 id="var/registered_machines"><aside class="declaration">var </aside>registered_machines <aside>– /list</aside> <a href="https://github.com/ParadiseSS13/Paradise/blob/b5514069efa5f2c5a6aed3be3811502a06d2b33a/code/modules/power/powernets/local_powernet.dm#L48"><img src="git.png" width="16" height="16" title="code/modules/power/powernets/local_powernet.dm 48"></a></h3><p>All machines registered to this local powernet, strictly typed to machines, everything else needs to register power change signals</p><h2 id="proc">Proc Details</h2><h3 id="proc/adjust_static_power"><aside class="declaration">proc </aside>adjust_static_power<aside>(channel, amount)  <a href="https://github.com/ParadiseSS13/Paradise/blob/b5514069efa5f2c5a6aed3be3811502a06d2b33a/code/modules/power/powernets/local_powernet.dm#L136"><img src="git.png" width="16" height="16" title="code/modules/power/powernets/local_powernet.dm 136"></a></aside></h3><p>Adjust static power for a specified channel, does not check to see if channel has power flowing into it</p><h3 id="proc/get_channel_usage"><aside class="declaration">proc </aside>get_channel_usage<aside>(channel)  <a href="https://github.com/ParadiseSS13/Paradise/blob/b5514069efa5f2c5a6aed3be3811502a06d2b33a/code/modules/power/powernets/local_powernet.dm#L155"><img src="git.png" width="16" height="16" title="code/modules/power/powernets/local_powernet.dm 155"></a></aside></h3><p>returns active + passive power of a channel, if the channel is not powered it returns 0 watts</p><h3 id="proc/get_total_usage"><aside class="declaration">proc </aside>get_total_usage<aside>()  <a href="https://github.com/ParadiseSS13/Paradise/blob/b5514069efa5f2c5a6aed3be3811502a06d2b33a/code/modules/power/powernets/local_powernet.dm#L151"><img src="git.png" width="16" height="16" title="code/modules/power/powernets/local_powernet.dm 151"></a></aside></h3><p>Returns the local powernets total power usage between all three of its channels, only includes usage on currently powered channels</p><h3 id="proc/handle_flicker"><aside class="declaration">proc </aside>handle_flicker<aside>()  <a href="https://github.com/ParadiseSS13/Paradise/blob/b5514069efa5f2c5a6aed3be3811502a06d2b33a/code/modules/power/powernets/local_powernet.dm#L171"><img src="git.png" width="16" height="16" title="code/modules/power/powernets/local_powernet.dm 171"></a></aside></h3><p>Handles flicker operations for apc processing, will flicker machines and lights in the powernet's area by random chance</p><h3 id="proc/has_power"><aside class="declaration">proc </aside>has_power<aside>(channel)  <a href="https://github.com/ParadiseSS13/Paradise/blob/b5514069efa5f2c5a6aed3be3811502a06d2b33a/code/modules/power/powernets/local_powernet.dm#L98"><img src="git.png" width="16" height="16" title="code/modules/power/powernets/local_powernet.dm 98"></a></aside></h3><p>checks to see if the given channel in this local powernet has power</p><h3 id="proc/power_change"><aside class="declaration">proc </aside>power_change<aside>()  <a href="https://github.com/ParadiseSS13/Paradise/blob/b5514069efa5f2c5a6aed3be3811502a06d2b33a/code/modules/power/powernets/local_powernet.dm#L75"><img src="git.png" width="16" height="16" title="code/modules/power/powernets/local_powernet.dm 75"></a></aside></h3><h1 id="power-change">power_change</h1>
<p>Called when the area power status changes
calls power change on all machines in the area, and sends the <code>COMSIG_POWERNET_POWER_CHANGE</code> signal.</p><h3 id="proc/register_machine"><aside class="declaration">proc </aside>register_machine<aside>(/<a href="obj.html">obj</a>/<a href="obj/machinery.html">machinery</a>/machine)  <a href="https://github.com/ParadiseSS13/Paradise/blob/b5514069efa5f2c5a6aed3be3811502a06d2b33a/code/modules/power/powernets/local_powernet.dm#L51"><img src="git.png" width="16" height="16" title="code/modules/power/powernets/local_powernet.dm 51"></a></aside></h3><p>tethers a machine to this local powernet</p><h3 id="proc/set_power_channel"><aside class="declaration">proc </aside>set_power_channel<aside>(channel, new_state)  <a href="https://github.com/ParadiseSS13/Paradise/blob/b5514069efa5f2c5a6aed3be3811502a06d2b33a/code/modules/power/powernets/local_powernet.dm#L81"><img src="git.png" width="16" height="16" title="code/modules/power/powernets/local_powernet.dm 81"></a></aside></h3><p>sets a power channel on or off and adjusts total power usage accordingly</p><h3 id="proc/unregister_machine"><aside class="declaration">proc </aside>unregister_machine<aside>(/<a href="obj.html">obj</a>/<a href="obj/machinery.html">machinery</a>/machine)  <a href="https://github.com/ParadiseSS13/Paradise/blob/b5514069efa5f2c5a6aed3be3811502a06d2b33a/code/modules/power/powernets/local_powernet.dm#L62"><img src="git.png" width="16" height="16" title="code/modules/power/powernets/local_powernet.dm 62"></a></aside></h3><p>untethers a machine to this local powernet</p><h3 id="proc/use_active_power"><aside class="declaration">proc </aside>use_active_power<aside>(channel, amount)  <a href="https://github.com/ParadiseSS13/Paradise/blob/b5514069efa5f2c5a6aed3be3811502a06d2b33a/code/modules/power/powernets/local_powernet.dm#L118"><img src="git.png" width="16" height="16" title="code/modules/power/powernets/local_powernet.dm 118"></a></aside></h3><p>Add active power usage to the given channel, returns FALSE is channel cannot be found or the channel does not have power to give</p></main><footer>paradise.dme <a href="https://github.com/ParadiseSS13/Paradise/tree/b5514069efa5f2c5a6aed3be3811502a06d2b33a">b551406</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.9.0</a></footer></body></html>