<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/tgui_say - Space Station 13</title></head><body><header><a href="index.html">Space Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/tgui_say.html#var">Var Details</a> - <a href="datum/tgui_say.html#proc">Proc Details</a></header><main><h1>tgui_say <aside>/<a href="datum.html">datum</a>/<a href="datum/tgui_say.html">tgui_say</a></aside> <a href="https://github.com/ParadiseSS13/Paradise/blob/b5514069efa5f2c5a6aed3be3811502a06d2b33a/code/modules/tgui_input/say_modal/tgui_say_modal.dm#L20"><img src="git.png" width="16" height="16" title="code/modules/tgui_input/say_modal/tgui_say_modal.dm 20"></a></h1><p>The tgui say modal. This initializes an input window which hides until
the user presses one of the speech hotkeys. Once something is entered, it will
delegate the speech to the proper channel.</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/tgui_say.html#var/client">client</a></th><td>The user who opened the window</td></tr><tr><th><a href="datum/tgui_say.html#var/window">window</a></th><td>The modal window</td></tr><tr><th><a href="datum/tgui_say.html#var/window_open">window_open</a></th><td>Boolean for whether the tgui_say was opened by the user.</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/tgui_say.html#proc/New">New</a></th><td>Creates the new input window to exist in the background.</td></tr><tr><th><a href="datum/tgui_say.html#proc/close">close</a></th><td>Closes the window serverside. Closes any open chat bubbles
regardless of preference.</td></tr><tr><th><a href="datum/tgui_say.html#proc/delegate_speech">delegate_speech</a></th><td>Delegates the speech to the proper channel.</td></tr><tr><th><a href="datum/tgui_say.html#proc/handle_entry">handle_entry</a></th><td>Handles text entry and forced speech.</td></tr><tr><th><a href="datum/tgui_say.html#proc/initialize">initialize</a></th><td>After a brief period, injects the scripts into
the window to listen for open commands.</td></tr><tr><th><a href="datum/tgui_say.html#proc/load">load</a></th><td>Ensures nothing funny is going on window load.
Minimizes the window, sets max length, closes all
typing and thinking indicators. This is triggered
as soon as the window sends the &quot;ready&quot; message.</td></tr><tr><th><a href="datum/tgui_say.html#proc/on_message">on_message</a></th><td>The equivalent of ui_act, this waits on messages from the window
and delegates actions.</td></tr><tr><th><a href="datum/tgui_say.html#proc/open">open</a></th><td>Sets the window as &quot;opened&quot; server side, though it is already
visible to the user. We do this to set local vars &amp;
start typing (if enabled and in an IC channel).</td></tr><tr><th><a href="datum/tgui_say.html#proc/start_thinking">start_thinking</a></th><td>Sets the mob as &quot;thinking&quot; - with indicator</td></tr><tr><th><a href="datum/tgui_say.html#proc/start_typing">start_typing</a></th><td>Handles the user typing. After a brief period of inactivity,
signals the client mob to revert to the &quot;thinking&quot; icon.</td></tr><tr><th><a href="datum/tgui_say.html#proc/stop_thinking">stop_thinking</a></th><td>Removes typing/thinking indicators and flags the mob as not thinking</td></tr><tr><th><a href="datum/tgui_say.html#proc/stop_typing">stop_typing</a></th><td>Callback to remove the typing indicator after a brief period of inactivity.
If the user was typing IC, the thinking indicator is shown.</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/client"><aside class="declaration">var </aside>client <aside>– /<a href="client.html">client</a></aside> <a href="https://github.com/ParadiseSS13/Paradise/blob/b5514069efa5f2c5a6aed3be3811502a06d2b33a/code/modules/tgui_input/say_modal/tgui_say_modal.dm#L22"><img src="git.png" width="16" height="16" title="code/modules/tgui_input/say_modal/tgui_say_modal.dm 22"></a></h3><p>The user who opened the window</p><h3 id="var/window"><aside class="declaration">var </aside>window <aside>– /<a href="datum.html">datum</a>/<a href="datum/tgui_window.html">tgui_window</a></aside> <a href="https://github.com/ParadiseSS13/Paradise/blob/b5514069efa5f2c5a6aed3be3811502a06d2b33a/code/modules/tgui_input/say_modal/tgui_say_modal.dm#L24"><img src="git.png" width="16" height="16" title="code/modules/tgui_input/say_modal/tgui_say_modal.dm 24"></a></h3><p>The modal window</p><h3 id="var/window_open"><aside class="declaration">var </aside>window_open <aside>– </aside> <a href="https://github.com/ParadiseSS13/Paradise/blob/b5514069efa5f2c5a6aed3be3811502a06d2b33a/code/modules/tgui_input/say_modal/tgui_say_modal.dm#L28"><img src="git.png" width="16" height="16" title="code/modules/tgui_input/say_modal/tgui_say_modal.dm 28"></a></h3><p>Boolean for whether the tgui_say was opened by the user.</p><h2 id="proc">Proc Details</h2><h3 id="proc/New">New<aside>(/<a href="client.html">client</a>/client, id)  <a href="https://github.com/ParadiseSS13/Paradise/blob/b5514069efa5f2c5a6aed3be3811502a06d2b33a/code/modules/tgui_input/say_modal/tgui_say_modal.dm#L29"><img src="git.png" width="16" height="16" title="code/modules/tgui_input/say_modal/tgui_say_modal.dm 29"></a></aside></h3><p>Creates the new input window to exist in the background.</p><h3 id="proc/close"><aside class="declaration">proc </aside>close<aside>()  <a href="https://github.com/ParadiseSS13/Paradise/blob/b5514069efa5f2c5a6aed3be3811502a06d2b33a/code/modules/tgui_input/say_modal/tgui_say_modal.dm#L88"><img src="git.png" width="16" height="16" title="code/modules/tgui_input/say_modal/tgui_say_modal.dm 88"></a></aside></h3><p>Closes the window serverside. Closes any open chat bubbles
regardless of preference.</p><h3 id="proc/delegate_speech"><aside class="declaration">proc </aside>delegate_speech<aside>(entry, channel)  <a href="https://github.com/ParadiseSS13/Paradise/blob/b5514069efa5f2c5a6aed3be3811502a06d2b33a/code/modules/tgui_input/say_modal/tgui_say_speech.dm#L10"><img src="git.png" width="16" height="16" title="code/modules/tgui_input/say_modal/tgui_say_speech.dm 10"></a></aside></h3><p>Delegates the speech to the proper channel.</p>
<p>Arguments:
entry - the text to broadcast
channel - the channel to broadcast in
Returns:
boolean - on success or failure</p><h3 id="proc/handle_entry"><aside class="declaration">proc </aside>handle_entry<aside>(payload)  <a href="https://github.com/ParadiseSS13/Paradise/blob/b5514069efa5f2c5a6aed3be3811502a06d2b33a/code/modules/tgui_input/say_modal/tgui_say_speech.dm#L52"><img src="git.png" width="16" height="16" title="code/modules/tgui_input/say_modal/tgui_say_speech.dm 52"></a></aside></h3><p>Handles text entry and forced speech.</p>
<p>Arguments:
payload - a string list containing entry &amp; channel
Returns:
boolean - success or failure</p><h3 id="proc/initialize"><aside class="declaration">proc </aside>initialize<aside>()  <a href="https://github.com/ParadiseSS13/Paradise/blob/b5514069efa5f2c5a6aed3be3811502a06d2b33a/code/modules/tgui_input/say_modal/tgui_say_modal.dm#L40"><img src="git.png" width="16" height="16" title="code/modules/tgui_input/say_modal/tgui_say_modal.dm 40"></a></aside></h3><p>After a brief period, injects the scripts into
the window to listen for open commands.</p><h3 id="proc/load"><aside class="declaration">proc </aside>load<aside>()  <a href="https://github.com/ParadiseSS13/Paradise/blob/b5514069efa5f2c5a6aed3be3811502a06d2b33a/code/modules/tgui_input/say_modal/tgui_say_modal.dm#L57"><img src="git.png" width="16" height="16" title="code/modules/tgui_input/say_modal/tgui_say_modal.dm 57"></a></aside></h3><p>Ensures nothing funny is going on window load.
Minimizes the window, sets max length, closes all
typing and thinking indicators. This is triggered
as soon as the window sends the &quot;ready&quot; message.</p><h3 id="proc/on_message"><aside class="declaration">proc </aside>on_message<aside>(type, payload)  <a href="https://github.com/ParadiseSS13/Paradise/blob/b5514069efa5f2c5a6aed3be3811502a06d2b33a/code/modules/tgui_input/say_modal/tgui_say_modal.dm#L97"><img src="git.png" width="16" height="16" title="code/modules/tgui_input/say_modal/tgui_say_modal.dm 97"></a></aside></h3><p>The equivalent of ui_act, this waits on messages from the window
and delegates actions.</p><h3 id="proc/open"><aside class="declaration">proc </aside>open<aside>(payload)  <a href="https://github.com/ParadiseSS13/Paradise/blob/b5514069efa5f2c5a6aed3be3811502a06d2b33a/code/modules/tgui_input/say_modal/tgui_say_modal.dm#L75"><img src="git.png" width="16" height="16" title="code/modules/tgui_input/say_modal/tgui_say_modal.dm 75"></a></aside></h3><p>Sets the window as &quot;opened&quot; server side, though it is already
visible to the user. We do this to set local vars &amp;
start typing (if enabled and in an IC channel).</p>
<p>Arguments:
payload - A list containing the channel the window was opened in.</p><h3 id="proc/start_thinking"><aside class="declaration">proc </aside>start_thinking<aside>()  <a href="https://github.com/ParadiseSS13/Paradise/blob/b5514069efa5f2c5a6aed3be3811502a06d2b33a/code/modules/tgui_input/say_modal/tgui_say_typing.dm#L2"><img src="git.png" width="16" height="16" title="code/modules/tgui_input/say_modal/tgui_say_typing.dm 2"></a></aside></h3><p>Sets the mob as &quot;thinking&quot; - with indicator</p><h3 id="proc/start_typing"><aside class="declaration">proc </aside>start_typing<aside>(me)  <a href="https://github.com/ParadiseSS13/Paradise/blob/b5514069efa5f2c5a6aed3be3811502a06d2b33a/code/modules/tgui_input/say_modal/tgui_say_typing.dm#L21"><img src="git.png" width="16" height="16" title="code/modules/tgui_input/say_modal/tgui_say_typing.dm 21"></a></aside></h3><p>Handles the user typing. After a brief period of inactivity,
signals the client mob to revert to the &quot;thinking&quot; icon.</p><h3 id="proc/stop_thinking"><aside class="declaration">proc </aside>stop_thinking<aside>()  <a href="https://github.com/ParadiseSS13/Paradise/blob/b5514069efa5f2c5a6aed3be3811502a06d2b33a/code/modules/tgui_input/say_modal/tgui_say_typing.dm#L12"><img src="git.png" width="16" height="16" title="code/modules/tgui_input/say_modal/tgui_say_typing.dm 12"></a></aside></h3><p>Removes typing/thinking indicators and flags the mob as not thinking</p><h3 id="proc/stop_typing"><aside class="declaration">proc </aside>stop_typing<aside>()  <a href="https://github.com/ParadiseSS13/Paradise/blob/b5514069efa5f2c5a6aed3be3811502a06d2b33a/code/modules/tgui_input/say_modal/tgui_say_typing.dm#L35"><img src="git.png" width="16" height="16" title="code/modules/tgui_input/say_modal/tgui_say_typing.dm 35"></a></aside></h3><p>Callback to remove the typing indicator after a brief period of inactivity.
If the user was typing IC, the thinking indicator is shown.</p></main><footer>paradise.dme <a href="https://github.com/ParadiseSS13/Paradise/tree/b5514069efa5f2c5a6aed3be3811502a06d2b33a">b551406</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.9.0</a></footer></body></html>