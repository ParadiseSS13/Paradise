<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/emote - Space Station 13</title></head><body><header><a href="index.html">Space Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/emote.html#var">Var Details</a> - <a href="datum/emote.html#proc">Proc Details</a></header><main><h1>Emote <aside>/<a href="datum.html">datum</a>/<a href="datum/emote.html">emote</a></aside> <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L14"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 14"></a></h1><p>Most of the text that's not someone talking is based off of this.</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/emote.html#var/age_based">age_based</a></th><td>Whether or not to adjust the frequency of the emote sound based on age.</td></tr><tr><th><a href="datum/emote.html#var/audio_cooldown">audio_cooldown</a></th><td>How long is the cooldown on the audio of the emote, if it has one?</td></tr><tr><th><a href="datum/emote.html#var/bypass_unintentional_cooldown">bypass_unintentional_cooldown</a></th><td>If true, an emote will completely bypass any cooldown when called unintentionally. Necessary for things like deathgasp.</td></tr><tr><th><a href="datum/emote.html#var/cooldown">cooldown</a></th><td>The cooldown between the uses of the emote.</td></tr><tr><th><a href="datum/emote.html#var/emote_target_type">emote_target_type</a></th><td>If our target behavior isn't to ignore, what should we look for with targets?</td></tr><tr><th><a href="datum/emote.html#var/emote_type">emote_type</a></th><td>Whether the emote is visible or audible.</td></tr><tr><th><a href="datum/emote.html#var/hands_use_check">hands_use_check</a></th><td>Checks if the mob can use its hands before performing the emote.</td></tr><tr><th><a href="datum/emote.html#var/key">key</a></th><td>What calls the emote.</td></tr><tr><th><a href="datum/emote.html#var/key_third_person">key_third_person</a></th><td>This will also call the emote.</td></tr><tr><th><a href="datum/emote.html#var/max_stat_allowed">max_stat_allowed</a></th><td>How unconscious/dead can you be while still being able to use this emote intentionally?
If this is set to DEFAULT_STAT_ALLOWED, it'll behave as if it isn't set.</td></tr><tr><th><a href="datum/emote.html#var/max_unintentional_stat_allowed">max_unintentional_stat_allowed</a></th><td>Same as above, how unconscious/dead do you need to be to have this emote forced out of you?
If this is set to DEFAULT_STAT_ALLOWED, it'll behave as if it isn't set.</td></tr><tr><th><a href="datum/emote.html#var/message">message</a></th><td>Message displayed when emote is used.</td></tr><tr><th><a href="datum/emote.html#var/message_AI">message_AI</a></th><td>Message displayed if the user is an AI.</td></tr><tr><th><a href="datum/emote.html#var/message_alien">message_alien</a></th><td>Message displayed if the user is a grown alien.</td></tr><tr><th><a href="datum/emote.html#var/message_larva">message_larva</a></th><td>Message displayed if the user is an alien larva.</td></tr><tr><th><a href="datum/emote.html#var/message_mime">message_mime</a></th><td>Message displayed if the user is a mime.</td></tr><tr><th><a href="datum/emote.html#var/message_monkey">message_monkey</a></th><td>Message displayed if the user is a monkey.</td></tr><tr><th><a href="datum/emote.html#var/message_observer">message_observer</a></th><td>Message to display if the user is a spooky observer ghost.</td></tr><tr><th><a href="datum/emote.html#var/message_param">message_param</a></th><td>Message with %t at the end to allow adding params to the message, like for mobs doing an emote relatively to something else.
Set this to EMOTE_PARAM_USE_POSTFIX to just use the postfix.</td></tr><tr><th><a href="datum/emote.html#var/message_postfix">message_postfix</a></th><td>Message postfix with %t used when we don't want to use message_param for our targeting. Used for things like message_monkey or message_mime.
Punctuation from the message will be stripped when this is applied, so make sure it's punctuated as well.</td></tr><tr><th><a href="datum/emote.html#var/message_robot">message_robot</a></th><td>Message displayed if the user is a robot.</td></tr><tr><th><a href="datum/emote.html#var/message_simple">message_simple</a></th><td>Message to display if the user is a simple_animal.</td></tr><tr><th><a href="datum/emote.html#var/mob_type_allowed_typecache">mob_type_allowed_typecache</a></th><td>Types that are allowed to use that emote.</td></tr><tr><th><a href="datum/emote.html#var/mob_type_blacklist_typecache">mob_type_blacklist_typecache</a></th><td>Types that are NOT allowed to use that emote.</td></tr><tr><th><a href="datum/emote.html#var/mob_type_ignore_stat_typecache">mob_type_ignore_stat_typecache</a></th><td>Types that can use this emote regardless of their state.</td></tr><tr><th><a href="datum/emote.html#var/muzzle_ignore">muzzle_ignore</a></th><td>If the emote type is EMOTE_MOUTH but should still bypass a muzzle.</td></tr><tr><th><a href="datum/emote.html#var/muzzled_noises">muzzled_noises</a></th><td>Sounds emitted when the user is muzzled. Generally used like &quot;[user] makes a pick(muzzled_noises) noise!&quot;</td></tr><tr><th><a href="datum/emote.html#var/only_forced_audio">only_forced_audio</a></th><td>If true, this emote will only make a sound effect when called unintentionally.</td></tr><tr><th><a href="datum/emote.html#var/only_unintentional">only_unintentional</a></th><td>Whether or not the emote can even be called at all if it's not intentional</td></tr><tr><th><a href="datum/emote.html#var/param_desc">param_desc</a></th><td>Description appended to the emote name describing what the target should be, like for help commands.</td></tr><tr><th><a href="datum/emote.html#var/sound">sound</a></th><td>Sound to play when emote is called. If you want to adjust this dynamically, see get_sound().</td></tr><tr><th><a href="datum/emote.html#var/species_type_blacklist_typecache">species_type_blacklist_typecache</a></th><td>Species types which the emote will be exclusively not available to. Should be subclasses of /datum/species</td></tr><tr><th><a href="datum/emote.html#var/species_type_whitelist_typecache">species_type_whitelist_typecache</a></th><td>Species types which the emote will be exclusively available to. Should be subclasses of /datum/species</td></tr><tr><th><a href="datum/emote.html#var/stat_allowed">stat_allowed</a></th><td>How conscious do you need to be to use this emote intentionally?</td></tr><tr><th><a href="datum/emote.html#var/target_behavior">target_behavior</a></th><td>If we get a target, how do we want to treat it?</td></tr><tr><th><a href="datum/emote.html#var/unintentional_audio_cooldown">unintentional_audio_cooldown</a></th><td>If the emote is triggered unintentionally, how long would that cooldown be?</td></tr><tr><th><a href="datum/emote.html#var/unintentional_stat_allowed">unintentional_stat_allowed</a></th><td>How conscious do you need to be to have this emote forced out of you?</td></tr><tr><th><a href="datum/emote.html#var/vary">vary</a></th><td>Whether or not to vary the sound of the emote.</td></tr><tr><th><a href="datum/emote.html#var/volume">volume</a></th><td>How loud is the audio emote?</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/emote.html#proc/act_on_target">act_on_target</a></th><td>Perform an action on the target of an emote, if one was found.</td></tr><tr><th><a href="datum/emote.html#proc/can_run_emote">can_run_emote</a></th><td>Check to see if the user is allowed to run the emote.</td></tr><tr><th><a href="datum/emote.html#proc/can_vocalize_emotes">can_vocalize_emotes</a></th><td>Return whether a user should be able to vocalize emotes or not, due to a mask or inability to speak.
If this returns false, any mouth emotes will be replaced with muzzled noises.</td></tr><tr><th><a href="datum/emote.html#proc/check_cooldown">check_cooldown</a></th><td>Check whether or not an emote can be used due to a cooldown.
This applies to per-emote cooldowns, preventing individual emotes from being used (intentionally) too frequently.
This also checks audio cooldowns, so that intentional uses of audio emotes across the mob are time-constrained.</td></tr><tr><th><a href="datum/emote.html#proc/find_target">find_target</a></th><td>Find a target for the emote based on the message parameter fragment passed in.</td></tr><tr><th><a href="datum/emote.html#proc/get_sound">get_sound</a></th><td>To get the sound that the emote plays, for special sound interactions depending on the mob.</td></tr><tr><th><a href="datum/emote.html#proc/get_volume">get_volume</a></th><td>Get the volume of the audio emote to play.</td></tr><tr><th><a href="datum/emote.html#proc/play_sound_effect">play_sound_effect</a></th><td>Play the sound effect in an emote.
If you want to change the way the playsound call works, override this.
Note! If you want age_based to work, you need to force vary to TRUE.</td></tr><tr><th><a href="datum/emote.html#proc/replace_pronoun">replace_pronoun</a></th><td>Replace pronouns in the inputed string with the user's proper pronouns.</td></tr><tr><th><a href="datum/emote.html#proc/reset_emote">reset_emote</a></th><td>Reset the emote back to its original state.
Necessary if you've made modifications to the emote itself over the course of its
execution, as emotes are singletons, and changes would be reflected on every usage of the emote.</td></tr><tr><th><a href="datum/emote.html#proc/run_emote">run_emote</a></th><td>Handles the modifications and execution of emotes.</td></tr><tr><th><a href="datum/emote.html#proc/select_message_type">select_message_type</a></th><td>Selects the message type to override the message with.</td></tr><tr><th><a href="datum/emote.html#proc/select_param">select_param</a></th><td>Replaces the %t in the message in message_param by params.</td></tr><tr><th><a href="datum/emote.html#proc/should_play_sound">should_play_sound</a></th><td>Check to see if the user should play a sound when performing the emote.</td></tr><tr><th><a href="datum/emote.html#proc/try_run_emote">try_run_emote</a></th><td>Try to run an emote, checking can_run_emote once before executing the emote itself.</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/age_based"><aside class="declaration">var </aside>age_based <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L93"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 93"></a></h3><p>Whether or not to adjust the frequency of the emote sound based on age.</p><h3 id="var/audio_cooldown"><aside class="declaration">var </aside>audio_cooldown <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L101"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 101"></a></h3><p>How long is the cooldown on the audio of the emote, if it has one?</p><h3 id="var/bypass_unintentional_cooldown"><aside class="declaration">var </aside>bypass_unintentional_cooldown <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L105"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 105"></a></h3><p>If true, an emote will completely bypass any cooldown when called unintentionally. Necessary for things like deathgasp.</p><h3 id="var/cooldown"><aside class="declaration">var </aside>cooldown <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L99"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 99"></a></h3><p>The cooldown between the uses of the emote.</p><h3 id="var/emote_target_type"><aside class="declaration">var </aside>emote_target_type <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L66"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 66"></a></h3><p>If our target behavior isn't to ignore, what should we look for with targets?</p><h3 id="var/emote_type"><aside class="declaration">var </aside>emote_type <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L48"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 48"></a></h3><p>Whether the emote is visible or audible.</p><h3 id="var/hands_use_check"><aside class="declaration">var </aside>hands_use_check <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L50"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 50"></a></h3><p>Checks if the mob can use its hands before performing the emote.</p><h3 id="var/key"><aside class="declaration">var </aside>key <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L16"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 16"></a></h3><p>What calls the emote.</p><h3 id="var/key_third_person"><aside class="declaration">var </aside>key_third_person <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L18"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 18"></a></h3><p>This will also call the emote.</p><h3 id="var/max_stat_allowed"><aside class="declaration">var </aside>max_stat_allowed <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L82"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 82"></a></h3><p>How unconscious/dead can you be while still being able to use this emote intentionally?
If this is set to DEFAULT_STAT_ALLOWED, it'll behave as if it isn't set.</p><h3 id="var/max_unintentional_stat_allowed"><aside class="declaration">var </aside>max_unintentional_stat_allowed <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L87"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 87"></a></h3><p>Same as above, how unconscious/dead do you need to be to have this emote forced out of you?
If this is set to DEFAULT_STAT_ALLOWED, it'll behave as if it isn't set.</p><h3 id="var/message"><aside class="declaration">var </aside>message <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L20"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 20"></a></h3><p>Message displayed when emote is used.</p><h3 id="var/message_AI"><aside class="declaration">var </aside>message_AI <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L30"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 30"></a></h3><p>Message displayed if the user is an AI.</p><h3 id="var/message_alien"><aside class="declaration">var </aside>message_alien <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L24"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 24"></a></h3><p>Message displayed if the user is a grown alien.</p><h3 id="var/message_larva"><aside class="declaration">var </aside>message_larva <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L26"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 26"></a></h3><p>Message displayed if the user is an alien larva.</p><h3 id="var/message_mime"><aside class="declaration">var </aside>message_mime <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L22"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 22"></a></h3><p>Message displayed if the user is a mime.</p><h3 id="var/message_monkey"><aside class="declaration">var </aside>message_monkey <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L32"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 32"></a></h3><p>Message displayed if the user is a monkey.</p><h3 id="var/message_observer"><aside class="declaration">var </aside>message_observer <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L36"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 36"></a></h3><p>Message to display if the user is a spooky observer ghost.</p><h3 id="var/message_param"><aside class="declaration">var </aside>message_param <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L41"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 41"></a></h3><p>Message with %t at the end to allow adding params to the message, like for mobs doing an emote relatively to something else.
Set this to EMOTE_PARAM_USE_POSTFIX to just use the postfix.</p><h3 id="var/message_postfix"><aside class="declaration">var </aside>message_postfix <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L44"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 44"></a></h3><p>Message postfix with %t used when we don't want to use message_param for our targeting. Used for things like message_monkey or message_mime.
Punctuation from the message will be stripped when this is applied, so make sure it's punctuated as well.</p><h3 id="var/message_robot"><aside class="declaration">var </aside>message_robot <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L28"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 28"></a></h3><p>Message displayed if the user is a robot.</p><h3 id="var/message_simple"><aside class="declaration">var </aside>message_simple <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L34"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 34"></a></h3><p>Message to display if the user is a simple_animal.</p><h3 id="var/mob_type_allowed_typecache"><aside class="declaration">var </aside>mob_type_allowed_typecache <aside>– /list</aside> <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L54"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 54"></a></h3><p>Types that are allowed to use that emote.</p><h3 id="var/mob_type_blacklist_typecache"><aside class="declaration">var </aside>mob_type_blacklist_typecache <aside>– /list</aside> <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L56"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 56"></a></h3><p>Types that are NOT allowed to use that emote.</p><h3 id="var/mob_type_ignore_stat_typecache"><aside class="declaration">var </aside>mob_type_ignore_stat_typecache <aside>– /list</aside> <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L58"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 58"></a></h3><p>Types that can use this emote regardless of their state.</p><h3 id="var/muzzle_ignore"><aside class="declaration">var </aside>muzzle_ignore <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L52"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 52"></a></h3><p>If the emote type is EMOTE_MOUTH but should still bypass a muzzle.</p><h3 id="var/muzzled_noises"><aside class="declaration">var </aside>muzzled_noises <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L38"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 38"></a></h3><p>Sounds emitted when the user is muzzled. Generally used like &quot;[user] makes a pick(muzzled_noises) noise!&quot;</p><h3 id="var/only_forced_audio"><aside class="declaration">var </aside>only_forced_audio <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L95"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 95"></a></h3><p>If true, this emote will only make a sound effect when called unintentionally.</p><h3 id="var/only_unintentional"><aside class="declaration">var </aside>only_unintentional <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L97"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 97"></a></h3><p>Whether or not the emote can even be called at all if it's not intentional</p><h3 id="var/param_desc"><aside class="declaration">var </aside>param_desc <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L46"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 46"></a></h3><p>Description appended to the emote name describing what the target should be, like for help commands.</p><h3 id="var/sound"><aside class="declaration">var </aside>sound <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L89"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 89"></a></h3><p>Sound to play when emote is called. If you want to adjust this dynamically, see get_sound().</p><h3 id="var/species_type_blacklist_typecache"><aside class="declaration">var </aside>species_type_blacklist_typecache <aside>– /list</aside> <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L62"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 62"></a></h3><p>Species types which the emote will be exclusively not available to. Should be subclasses of /datum/species</p><h3 id="var/species_type_whitelist_typecache"><aside class="declaration">var </aside>species_type_whitelist_typecache <aside>– /list</aside> <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L60"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 60"></a></h3><p>Species types which the emote will be exclusively available to. Should be subclasses of /datum/species</p><h3 id="var/stat_allowed"><aside class="declaration">var </aside>stat_allowed <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L79"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 79"></a></h3><p>How conscious do you need to be to use this emote intentionally?</p><h3 id="var/target_behavior"><aside class="declaration">var </aside>target_behavior <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L64"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 64"></a></h3><p>If we get a target, how do we want to treat it?</p><h3 id="var/unintentional_audio_cooldown"><aside class="declaration">var </aside>unintentional_audio_cooldown <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L103"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 103"></a></h3><p>If the emote is triggered unintentionally, how long would that cooldown be?</p><h3 id="var/unintentional_stat_allowed"><aside class="declaration">var </aside>unintentional_stat_allowed <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L84"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 84"></a></h3><p>How conscious do you need to be to have this emote forced out of you?</p><h3 id="var/vary"><aside class="declaration">var </aside>vary <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L91"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 91"></a></h3><p>Whether or not to vary the sound of the emote.</p><h3 id="var/volume"><aside class="declaration">var </aside>volume <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L107"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 107"></a></h3><p>How loud is the audio emote?</p><h2 id="proc">Proc Details</h2><h3 id="proc/act_on_target"><aside class="declaration">proc </aside>act_on_target<aside>(/<a href="mob.html">mob</a>/user, target)  <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L483"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 483"></a></aside></h3><p>Perform an action on the target of an emote, if one was found.</p>
<p>This gets called in select_param if a valid object target was found, and should let you interact with the
object being targeted while it's still in scope.</p>
<ul>
<li>user - Person who is triggering the emote.</li>
<li>Target - The target of the emote itself.</li>
</ul><h3 id="proc/can_run_emote"><aside class="declaration">proc </aside>can_run_emote<aside>(/<a href="mob.html">mob</a>/user, status_check, intentional)  <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L497"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 497"></a></aside></h3><p>Check to see if the user is allowed to run the emote.</p>
<p>Arguments:</p>
<ul>
<li>user - Person that is trying to send the emote.</li>
<li>status_check - Bool that says whether we should check their stat or not.</li>
<li>intentional - Bool that says whether the emote was forced (FALSE) or not (TRUE).</li>
</ul>
<p>Returns a bool about whether or not the user can run the emote.</p><h3 id="proc/can_vocalize_emotes"><aside class="declaration">proc </aside>can_vocalize_emotes<aside>(/<a href="mob.html">mob</a>/user)  <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L600"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 600"></a></aside></h3><p>Return whether a user should be able to vocalize emotes or not, due to a mask or inability to speak.
If this returns false, any mouth emotes will be replaced with muzzled noises.</p><h3 id="proc/check_cooldown"><aside class="declaration">proc </aside>check_cooldown<aside>(/<a href="mob.html">mob</a>/user, intentional)  <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L323"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 323"></a></aside></h3><p>Check whether or not an emote can be used due to a cooldown.
This applies to per-emote cooldowns, preventing individual emotes from being used (intentionally) too frequently.
This also checks audio cooldowns, so that intentional uses of audio emotes across the mob are time-constrained.</p>
<p>Arguments:</p>
<ul>
<li>user - Person that is trying to send the emote.</li>
<li>intentional - Bool that says whether the emote was forced (FALSE) or not (TRUE).</li>
</ul>
<p>Returns FALSE if the cooldown is not over, TRUE if the cooldown is over.</p><h3 id="proc/find_target"><aside class="declaration">proc </aside>find_target<aside>(/<a href="mob.html">mob</a>/user, fragment, emote_target_type)  <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L577"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 577"></a></aside></h3><p>Find a target for the emote based on the message parameter fragment passed in.</p>
<ul>
<li>user - The user looking for a target.</li>
<li>fragment - The mesage parameter or fragment of text they're using to try to find a target.</li>
<li>emote_target_type - Define denoting the type of target to use when searching.</li>
</ul>
<p>Returns a matched target, or null if a specific match couldn't be made.</p><h3 id="proc/get_sound"><aside class="declaration">proc </aside>get_sound<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/user)  <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L352"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 352"></a></aside></h3><p>To get the sound that the emote plays, for special sound interactions depending on the mob.</p>
<p>Arguments:</p>
<ul>
<li>user - Person that is trying to send the emote.</li>
</ul>
<p>Returns the sound that will be made while sending the emote.</p><h3 id="proc/get_volume"><aside class="declaration">proc </aside>get_volume<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/user)  <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L365"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 365"></a></aside></h3><p>Get the volume of the audio emote to play.</p>
<p>Override this if you want to dynamically change the volume of an emote.</p>
<p>Arguments:</p>
<ul>
<li>user - Person that is trying to send the emote.</li>
</ul>
<p>Returns the volume level for an emote's audio component.</p><h3 id="proc/play_sound_effect"><aside class="declaration">proc </aside>play_sound_effect<aside>(/<a href="mob.html">mob</a>/user, intentional, sound_path, sound_volume)  <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L272"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 272"></a></aside></h3><p>Play the sound effect in an emote.
If you want to change the way the playsound call works, override this.
Note! If you want age_based to work, you need to force vary to TRUE.</p>
<ul>
<li>user - The user of the emote.</li>
<li>intentional - Whether or not the emote was triggered intentionally.</li>
<li>sound_path - Filesystem path to the audio clip to play.</li>
<li>sound_volume - Volume at which to play the audio clip.</li>
</ul><h3 id="proc/replace_pronoun"><aside class="declaration">proc </aside>replace_pronoun<aside>(/<a href="mob.html">mob</a>/user, msg)  <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L379"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 379"></a></aside></h3><p>Replace pronouns in the inputed string with the user's proper pronouns.</p>
<p>Specifically replaces they/them/their pronouns with the user's pronouns, as well as %s (like theirs)</p>
<p>Arguments:</p>
<ul>
<li>user - Person that is trying to send the emote.</li>
<li>msg - The string to modify.</li>
</ul>
<p>Returns the modified msg string.</p><h3 id="proc/reset_emote"><aside class="declaration">proc </aside>reset_emote<aside>()  <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L258"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 258"></a></aside></h3><p>Reset the emote back to its original state.
Necessary if you've made modifications to the emote itself over the course of its
execution, as emotes are singletons, and changes would be reflected on every usage of the emote.</p><h3 id="proc/run_emote"><aside class="declaration">proc </aside>run_emote<aside>(/<a href="mob.html">mob</a>/user, emote_arg, type_override, intentional)  <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L156"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 156"></a></aside></h3><p>Handles the modifications and execution of emotes.</p>
<p>In general, what this does:</p>
<ul>
<li>Checks if the user can run the emote at all</li>
<li>Checks and applies the message parameter, if it exists</li>
<li>Replaces pronouns with a mob's specific pronouns</li>
<li>Checks for and plays sound if the emote supports it</li>
<li>Sends the emote to users</li>
<li>Runechats the emote</li>
</ul>
<p>You most likely want to use try_run_emote() anywhere you would otherwise call this directly,
as that will incorporate can_run_emote() checking as well.</p>
<p>Arguments:</p>
<ul>
<li>user - Person that is trying to send the emote.</li>
<li>emote_arg - String parameter added after the emote.</li>
<li>type_override - Override to the current emote_type.</li>
<li>intentional - Bool that says whether the emote was forced (FALSE) or not (TRUE).</li>
</ul>
<p>Returns TRUE if it was able to run the emote, FALSE otherwise.</p><h3 id="proc/select_message_type"><aside class="declaration">proc </aside>select_message_type<aside>(/<a href="mob.html">mob</a>/user, msg, intentional)  <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L402"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 402"></a></aside></h3><p>Selects the message type to override the message with.</p>
<p>Arguments:</p>
<ul>
<li>user - Person that is trying to send the emote.</li>
<li>msg - The string to modify.</li>
<li>intentional - Bool that says whether the emote was forced (FALSE) or not (TRUE).</li>
</ul>
<p>Returns the new message, or msg directly, if no change was needed.</p><h3 id="proc/select_param"><aside class="declaration">proc </aside>select_param<aside>(/<a href="mob.html">mob</a>/user, params, substitution, base_message)  <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L440"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 440"></a></aside></h3><p>Replaces the %t in the message in message_param by params.</p>
<p>The behavior of this proc is particularly dependent on <code>target_behavior</code> and <code>emote_target_type</code>.
If target_behavior is EMOTE_TARGET_BHVR_RAW, we ignore any sort of target searching.
Otherwise, we try to find a target in view to call this emote on based on emote_target_type.</p>
<p>If you want to call something on the target object itself while it's still in scope, override act_on_target().</p>
<p>Arguments:</p>
<ul>
<li>user - Person that is trying to send the emote.</li>
<li>params - Parameters added after the emote.</li>
<li>substitution_str - String to substitute the target into.</li>
<li>base_message - If passed, the original message before any sort of modification occurred. Useful when dealing with non-standard message types.</li>
</ul>
<p>Returns the modified string, or null if the given parameter is invalid. May also return EMOTE_ACT_STOP_EXECUTION if acting on the target should stop emote execution.</p><h3 id="proc/should_play_sound"><aside class="declaration">proc </aside>should_play_sound<aside>(/<a href="mob.html">mob</a>/user, intentional)  <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L619"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 619"></a></aside></h3><p>Check to see if the user should play a sound when performing the emote.</p>
<p>Arguments:</p>
<ul>
<li>user - Person that is doing the emote.</li>
<li>intentional - Bool that says whether the emote was forced (FALSE) or not (TRUE).</li>
</ul>
<p>Returns a bool about whether or not the user should play a sound when performing the emote.</p><h3 id="proc/try_run_emote"><aside class="declaration">proc </aside>try_run_emote<aside>(/<a href="mob.html">mob</a>/user, emote_arg, type_override, intentional)  <a href="https://github.com/ParadiseSS13/Paradise/blob/506e5b7f5d9e45eafbcfc840b775ca69dee16715/code/datums/emote.dm#L239"><img src="git.png" width="16" height="16" title="code/datums/emote.dm 239"></a></aside></h3><p>Try to run an emote, checking can_run_emote once before executing the emote itself.</p>
<ul>
<li>user - User of the emote</li>
<li>params - An optional extra argument included after the emote key.</li>
<li>type_override - emote type to override the existing one with, if given.</li>
<li>intentional - Whether or not the emote was triggered intentionally (if false, the emote was forced by code).</li>
</ul>
<p>Returns TRUE if the emote was able to be run (or failed successfully), or FALSE if the emote is unusable.</p></main><footer>paradise.dme <a href="https://github.com/ParadiseSS13/Paradise/tree/506e5b7f5d9e45eafbcfc840b775ca69dee16715">506e5b7</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>