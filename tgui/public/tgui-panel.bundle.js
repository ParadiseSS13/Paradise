!function(e){function t(t){for(var r,a,c=t[0],s=t[1],l=t[2],d=0,h=[];d<c.length;d++)a=c[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&h.push(o[a][0]),o[a]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);for(u&&u(t);h.length;)h.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,c=1;c<n.length;c++){var s=n[c];0!==o[s]&&(r=!1)}r&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},o={2:0},i=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var c=window.webpackJsonp=window.webpackJsonp||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=s;i.push([695,0]),n()}({115:function(e,t,n){"use strict";t.__esModule=!0,t.selectSettings=t.selectHighlightSettings=t.selectHighlightSettingById=t.selectActiveTab=void 0;t.selectSettings=function(e){return e.settings},t.selectActiveTab=function(e){return e.settings.view.activeTab},t.selectHighlightSettings=function(e){return e.settings.highlightSettings},t.selectHighlightSettingById=function(e){return e.settings.highlightSettingById}},116:function(e,t,n){"use strict";t.__esModule=!0,t.serializeMessage=t.isSameMessage=t.createPage=t.createMessage=t.createMainPage=t.canPageAcceptType=void 0;var r=n(226),o=n(117);function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.canPageAcceptType=function(e,t){return t.startsWith(o.MESSAGE_TYPE_INTERNAL)||e.acceptedTypes[t]};var c=t.createPage=function(e){for(var t,n={},a=i(o.MESSAGE_TYPES);!(t=a()).done;){var c=t.value;n[c.type]=!!c.important}return Object.assign({id:(0,r.createUuid)(),name:"New Tab",acceptedTypes:n,unreadCount:0,createdAt:Date.now()},e)};t.createMainPage=function(){for(var e,t={},n=i(o.MESSAGE_TYPES);!(e=n()).done;)t[e.value.type]=!0;return c({name:"Main",acceptedTypes:t})},t.createMessage=function(e){return Object.assign({createdAt:Date.now()},e)},t.serializeMessage=function(e){return{type:e.type,text:e.text,html:e.html,times:e.times,createdAt:e.createdAt}},t.isSameMessage=function(e,t){return"string"==typeof e.text&&e.text===t.text||"string"==typeof e.html&&e.html===t.html}},117:function(e,t,n){"use strict";t.__esModule=!0,t.MESSAGE_TYPE_WARNING=t.MESSAGE_TYPE_UNKNOWN=t.MESSAGE_TYPE_SYSTEM=t.MESSAGE_TYPE_RADIO=t.MESSAGE_TYPE_OOC=t.MESSAGE_TYPE_MODCHAT=t.MESSAGE_TYPE_LOCALCHAT=t.MESSAGE_TYPE_INTERNAL=t.MESSAGE_TYPE_INFO=t.MESSAGE_TYPE_EVENTCHAT=t.MESSAGE_TYPE_DEBUG=t.MESSAGE_TYPE_DEADCHAT=t.MESSAGE_TYPE_COMBAT=t.MESSAGE_TYPE_ATTACKLOG=t.MESSAGE_TYPE_ADMINPM=t.MESSAGE_TYPE_ADMINLOG=t.MESSAGE_TYPE_ADMINCHAT=t.MESSAGE_TYPES=t.MESSAGE_SAVE_INTERVAL=t.MESSAGE_PRUNE_INTERVAL=t.MAX_VISIBLE_MESSAGES=t.MAX_PERSISTED_MESSAGES=t.IMAGE_RETRY_MESSAGE_AGE=t.IMAGE_RETRY_LIMIT=t.IMAGE_RETRY_DELAY=t.COMBINE_MAX_TIME_WINDOW=t.COMBINE_MAX_MESSAGES=void 0;t.MAX_VISIBLE_MESSAGES=2500,t.MAX_PERSISTED_MESSAGES=1e3,t.MESSAGE_SAVE_INTERVAL=1e4,t.MESSAGE_PRUNE_INTERVAL=6e4,t.COMBINE_MAX_MESSAGES=5,t.COMBINE_MAX_TIME_WINDOW=5e3,t.IMAGE_RETRY_DELAY=250,t.IMAGE_RETRY_LIMIT=10,t.IMAGE_RETRY_MESSAGE_AGE=6e4;var r=t.MESSAGE_TYPE_UNKNOWN="unknown",o=(t.MESSAGE_TYPE_INTERNAL="internal",t.MESSAGE_TYPE_SYSTEM="system"),i=t.MESSAGE_TYPE_LOCALCHAT="localchat",a=t.MESSAGE_TYPE_RADIO="radio",c=t.MESSAGE_TYPE_INFO="info",s=t.MESSAGE_TYPE_WARNING="warning",l=t.MESSAGE_TYPE_DEADCHAT="deadchat",u=t.MESSAGE_TYPE_OOC="ooc",d=t.MESSAGE_TYPE_ADMINPM="adminpm",h=t.MESSAGE_TYPE_COMBAT="combat",g=t.MESSAGE_TYPE_ADMINCHAT="adminchat",p=t.MESSAGE_TYPE_MODCHAT="modchat",f=(t.MESSAGE_TYPE_EVENTCHAT="eventchat",t.MESSAGE_TYPE_ADMINLOG="adminlog"),m=t.MESSAGE_TYPE_ATTACKLOG="attacklog",v=t.MESSAGE_TYPE_DEBUG="debug";t.MESSAGE_TYPES=[{type:o,name:"System Messages",description:"Messages from your client, always enabled",selector:".boldannounce",important:!0},{type:i,name:"Local",description:"In-character local messages (say, emote, etc)",selector:".say, .emote"},{type:a,name:"Radio",description:"All departments of radio messages",selector:".alert, .syndradio, .centradio, .airadio, .entradio, .comradio, .secradio, .engradio, .medradio, .sciradio, .supradio, .srvradio, .expradio, .radio, .deptradio, .newscaster"},{type:c,name:"Info",description:"Non-urgent messages from the game and items",selector:".notice:not(.pm), .adminnotice, .info, .sinister, .cult"},{type:s,name:"Warnings",description:"Urgent messages from the game and items",selector:".warning:not(.pm), .critical, .userdanger, .italics"},{type:l,name:"Deadchat",description:"All of deadchat",selector:".deadsay"},{type:u,name:"OOC",description:"The bluewall of global OOC messages",selector:".ooc, .adminooc"},{type:d,name:"Admin PMs",description:"Messages to/from admins (adminhelp)",selector:".pm, .adminhelp"},{type:h,name:"Combat Log",description:"Urist McTraitor has stabbed you with a knife!",selector:".danger"},{type:r,name:"Unsorted",description:"Everything we could not sort, always enabled"},{type:g,name:"Admin Chat",description:"ASAY messages",selector:".admin_channel, .adminsay",admin:!0},{type:p,name:"Mod Chat",description:"MSAY messages",selector:".mod_channel",admin:!0},{type:f,name:"Admin Log",description:"ADMIN LOG: Urist McAdmin has jumped to coordinates X, Y, Z",selector:".log_message",admin:!0},{type:m,name:"Attack Log",description:"Urist McTraitor has shot John Doe",admin:!0},{type:v,name:"Debug Log",description:"DEBUG: SSPlanets subsystem Recover().",admin:!0}]},159:function(e,t,n){"use strict";t.__esModule=!0,t.useSettings=t.settingsReducer=t.settingsMiddleware=t.SettingsPanel=void 0;var r=n(704);t.useSettings=r.useSettings;var o=n(705);t.settingsMiddleware=o.settingsMiddleware;var i=n(706);t.settingsReducer=i.settingsReducer;var a=n(707);t.SettingsPanel=a.SettingsPanel},160:function(e,t,n){"use strict";t.__esModule=!0,t.SETTINGS_TABS=t.MAX_HIGHLIGHT_SETTINGS=t.FONTS_DISABLED=t.FONTS=void 0;t.SETTINGS_TABS=[{id:"general",name:"General"},{id:"textHighlight",name:"Text Highlights"},{id:"chatPage",name:"Chat Tabs"}];var r=t.FONTS_DISABLED="Default";t.FONTS=[r,"Verdana","Arial","Arial Black","Comic Sans MS","Impact","Lucida Sans Unicode","Tahoma","Trebuchet MS","Courier New","Lucida Console"],t.MAX_HIGHLIGHT_SETTINGS=10},161:function(e,t,n){"use strict";t.__esModule=!0,t.chatReducer=t.chatMiddleware=t.ChatTabs=t.ChatPanel=t.ChatPageSettings=void 0;var r=n(708);t.ChatPageSettings=r.ChatPageSettings;var o=n(709);t.ChatPanel=o.ChatPanel;var i=n(711);t.ChatTabs=i.ChatTabs;var a=n(712);t.chatMiddleware=a.chatMiddleware;var c=n(713);t.chatReducer=c.chatReducer},162:function(e,t,n){"use strict";t.__esModule=!0,t.selectCurrentChatPage=t.selectChatPages=t.selectChatPageById=t.selectChat=void 0;var r=n(23);t.selectChat=function(e){return e.chat},t.selectChatPages=function(e){return(0,r.map)((function(t){return e.chat.pageById[t]}))(e.chat.pages)},t.selectCurrentChatPage=function(e){return e.chat.pageById[e.chat.currentPageId]},t.selectChatPageById=function(e){return function(t){return t.chat.pageById[e]}}},163:function(e,t,n){"use strict";t.__esModule=!0,t.pingSuccess=t.pingSoft=t.pingReply=t.pingFail=void 0;var r=n(21);t.pingReply=(0,r.createAction)("ping/reply"),t.pingSoft=(0,r.createAction)("ping/soft"),t.pingSuccess=(0,r.createAction)("ping/success",(function(e){return{payload:{lastId:e.id,roundtrip:.5*(Date.now()-e.sentAt)}}})),t.pingFail=(0,r.createAction)("ping/fail")},223:function(e,t,n){"use strict";t.__esModule=!0,t.useAudio=t.audioReducer=t.audioMiddleware=t.NowPlayingWidget=void 0;var r=n(700);t.useAudio=r.useAudio;var o=n(701);t.audioMiddleware=o.audioMiddleware;var i=n(703);t.NowPlayingWidget=i.NowPlayingWidget;var a=n(714);t.audioReducer=a.audioReducer},224:function(e,t,n){"use strict";t.__esModule=!0,t.selectAudio=void 0;t.selectAudio=function(e){return e.audio}},225:function(e,t,n){"use strict";t.__esModule=!0,t.createHighlightSetting=t.createDefaultHighlightSetting=void 0;var r=n(226),o=t.createHighlightSetting=function(e){return Object.assign({id:(0,r.createUuid)(),highlightText:"",highlightColor:"#ffdd44",highlightWholeMessage:!0,matchWord:!1,matchCase:!1},e)};t.createDefaultHighlightSetting=function(e){return o(Object.assign({id:"default"},e))}},226:function(e,t,n){"use strict";t.__esModule=!0,t.createUuid=void 0;t.createUuid=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))}},227:function(e,t,n){"use strict";t.__esModule=!0,t.setClientTheme=t.THEMES=void 0;t.THEMES=["light","dark"],t.setClientTheme=function(e){if("light"===e)return Byond.winset({"rpane.textb.background-color":"#FFFFFF","rpane.textb.text-color":"#000000","rpane.infob.background-color":"#FFFFFF","rpane.infob.text-color":"#000000","rpane.wikib.background-color":"#FFFFFF","rpane.wikib.text-color":"#000000","rpane.forumb.background-color":"#FFFFFF","rpane.forumb.text-color":"#000000","rpane.rulesb.background-color":"#FFFFFF","rpane.rulesb.text-color":"#000000","rpane.githubb.background-color":"#FFFFFF","rpane.githubb.text-color":"#000000","rpane.webmap.background-color":"#FFFFFF","rpane.webmap.text-color":"#000000","rpane.changelog.background-color":"#FFFFFF","rpane.changelog.text-color":"#000000","mainwindow.background-color":"#FFFFFF","mainwindow.mainvsplit.background-color":"#FFFFFF","mainwindow.tooltip.background-color":"#FFFFFF","outputwindow.background-color":"#FFFFFF","outputwindow.text-color":"#000000","rpane.background-color":"#FFFFFF","rpane.rpanewindow.background-color":"#FFFFFF","infowindow.background-color":"#FFFFFF","infowindow.text-color":"#000000","infowindow.info.background-color":"#FFFFFF","infowindow.info.text-color":"#000000","infowindow.info.highlight-color":"#007700","infowindow.info.tab-text-color":"#000000","infowindow.info.tab-background-color":"#FFFFFF","saybutton.background-color":"#FFFFFF","saybutton.text-color":"#000000","oocbutton.background-color":"#FFFFFF","oocbutton.text-color":"#000000","mebutton.background-color":"#FFFFFF","mebutton.text-color":"#000000","asset_cache_browser.background-color":"#FFFFFF","asset_cache_browser.text-color":"#000000","tooltip.background-color":"#FFFFFF","tooltip.text-color":"#000000","input.background-color":"#FFFFFF","input.text-color":"#000000"});"dark"===e&&Byond.winset({"rpane.textb.background-color":"#4C4C4D","rpane.textb.text-color":"#A4BAD6","rpane.infob.background-color":"#4C4C4D","rpane.infob.text-color":"#A4BAD6","rpane.wikib.background-color":"#4C4C4D","rpane.wikib.text-color":"#A4BAD6","rpane.forumb.background-color":"#4C4C4D","rpane.forumb.text-color":"#A4BAD6","rpane.rulesb.background-color":"#4C4C4D","rpane.rulesb.text-color":"#A4BAD6","rpane.githubb.background-color":"#4C4C4D","rpane.githubb.text-color":"#A4BAD6","rpane.webmap.background-color":"#4C4C4D","rpane.webmap.text-color":"#A4BAD6","rpane.changelog.background-color":"#40628A","rpane.changelog.text-color":"#FFFFFF","mainwindow.background-color":"#171717","mainwindow.mainvsplit.background-color":"#171717","mainwindow.tooltip.background-color":"#171717","outputwindow.background-color":"#202020","outputwindow.text-color":"#A4BAD6","rpane.background-color":"#171717","rpane.rpanewindow.background-color":"#171717","infowindow.background-color":"#171717","infowindow.text-color":"#A4BAD6","infowindow.info.background-color":"#171717","infowindow.info.text-color":"#A4BAD6","infowindow.info.highlight-color":"#009900","infowindow.info.tab-text-color":"#A4BAD6","infowindow.info.tab-background-color":"#171717","saybutton.background-color":"#171717","saybutton.text-color":"#A4BAD6","oocbutton.background-color":"#171717","oocbutton.text-color":"#A4BAD6","mebutton.background-color":"#171717","mebutton.text-color":"#A4BAD6","asset_cache_browser.background-color":"#171717","asset_cache_browser.text-color":"#A4BAD6","tooltip.background-color":"#171717","tooltip.text-color":"#A4BAD6","input.background-color":"#171717","input.text-color":"#A4BAD6"})}},228:function(e,t,n){"use strict";(function(e){t.__esModule=!0,t.chatRenderer=void 0;var r=n(201),o=n(6),i=n(26),a=n(117),c=n(116),s=n(710);function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d=(0,i.createLogger)("chatRenderer"),h=function(e,t){var n=document.createElement("span");return n.className="Chat__highlight",n.setAttribute("style","background-color:"+t),n.textContent=e,n},g=function(){var e=document.createElement("div");return e.className="ChatMessage",e},p=function(){var e=document.createElement("div");return e.className="Chat__reconnected",e},f=function(e){setTimeout((function(){var t=e.target,n=parseInt(t.getAttribute("data-reload-n"),10)||0;if(n>=a.IMAGE_RETRY_LIMIT)d.error("failed to load an image after "+n+" attempts");else{var r=t.src;t.src=null,t.src=r+"#"+n,t.setAttribute("data-reload-n",n+1)}}),a.IMAGE_RETRY_DELAY)},m=function(e){var t=e.node,n=e.times;if(t&&n){var r=t.querySelector(".Chat__badge"),i=r||document.createElement("div");i.textContent=n,i.className=(0,o.classes)(["Chat__badge","Chat__badge--animate"]),requestAnimationFrame((function(){i.className="Chat__badge"})),r||t.appendChild(i)}},v=function(){function t(){var e=this;this.loaded=!1,this.rootNode=null,this.queue=[],this.messages=[],this.visibleMessages=[],this.page=null,this.events=new r.EventEmitter,this.scrollNode=null,this.scrollTracking=!0,this.handleScroll=function(t){var n=e.scrollNode,r=n.scrollHeight,o=n.scrollTop+n.offsetHeight,i=Math.abs(r-o)<24;i!==e.scrollTracking&&(e.scrollTracking=i,e.events.emit("scrollTrackingChanged",i),d.debug("tracking",e.scrollTracking))},this.ensureScrollTracking=function(){e.scrollTracking&&e.scrollToBottom()},setInterval((function(){return e.pruneMessages()}),a.MESSAGE_PRUNE_INTERVAL)}var n=t.prototype;return n.isReady=function(){return this.loaded&&this.rootNode&&this.page},n.mount=function(t){var n=this;this.rootNode?t.appendChild(this.rootNode):this.rootNode=t,this.scrollNode=function(e){for(var t=document.body,n=e;n&&n!==t;){if(n.matches(".scrollable"))return n;n=n.parentNode}return window}(this.rootNode),this.scrollNode.addEventListener("scroll",this.handleScroll),e((function(){n.scrollToBottom()})),this.tryFlushQueue()},n.onStateLoaded=function(){this.loaded=!0,this.tryFlushQueue()},n.tryFlushQueue=function(){this.isReady()&&this.queue.length>0&&(this.processBatch(this.queue),this.queue=[])},n.assignStyle=function(e){void 0===e&&(e={});for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];this.rootNode.style.setProperty(r,e[r])}},n.setHighlight=function(e,t){var n=this;this.highlightParsers=null,e&&e.map((function(e){var r,o,i=t[e],a=i.highlightText,c=i.highlightColor,s=i.highlightWholeMessage,u=i.matchWord,d=i.matchCase,h=/^[a-z0-9_\-$/^[\s\]\\]+$/gi,g=/[!#$%^&*)(+=.<>{}[\]:;'"|~`_\-\\/]/g,p=String(a).split(",").map((function(e){return e.trim()})).filter((function(e){return e&&e.length>1&&h.test(e)&&((h.lastIndex=0)||!0)}));if(0!==p.length){for(var f,m=[],v=l(p);!(f=v()).done;){var y=f.value;if("/"===y.charAt(0)&&"/"===y.charAt(y.length-1)){var S=y.substring(1,y.length-1);if(/^(\[.*\]|\\.|.)$/.test(S))continue;m.push(S)}else r||(r=[]),y=y.replace(g,"\\$&"),r.push(y)}var b=m.join("|"),_="g"+(d?"":"i");try{if(b)o=new RegExp("("+b+")",_);else{var C=(u?"\\b":"")+"("+r.join("|")+")"+(u?"\\b":"");o=new RegExp(C,_)}}catch(E){o=null}n.highlightParsers||(n.highlightParsers=[]),n.highlightParsers.push({highlightWords:r,highlightRegex:o,highlightColor:c,highlightWholeMessage:s})}}))},n.scrollToBottom=function(){this.scrollNode.scrollTop=this.scrollNode.scrollHeight},n.changePage=function(e){if(!this.isReady())return this.page=e,void this.tryFlushQueue();this.page=e,this.rootNode.textContent="",this.visibleMessages=[];for(var t,n,r=document.createDocumentFragment(),o=l(this.messages);!(n=o()).done;){var i=n.value;(0,c.canPageAcceptType)(e,i.type)&&(t=i.node,r.appendChild(t),this.visibleMessages.push(i))}t&&(this.rootNode.appendChild(r),t.scrollIntoView())},n.getCombinableMessage=function(e){for(var t=Date.now(),n=this.visibleMessages.length,r=n-1,o=Math.max(0,n-a.COMBINE_MAX_MESSAGES),i=r;i>=o;i--){var s=this.visibleMessages[i];if(!s.type.startsWith(a.MESSAGE_TYPE_INTERNAL)&&(0,c.isSameMessage)(s,e)&&t<s.createdAt+a.COMBINE_MAX_TIME_WINDOW)return s}return null},n.processBatch=function(t,n){var r=this;void 0===n&&(n={});var o=n,i=o.prepend,u=o.notifyListeners,v=void 0===u||u,y=Date.now();if(this.isReady()){for(var S,b,_=document.createDocumentFragment(),C={},E=l(t);!(b=E()).done;){var w=b.value,A=(0,c.createMessage)(w),N=this.getCombinableMessage(A);if(N)N.times=(N.times||1)+1,m(N);else{if(A.node)S=A.node;else if("internal/reconnected"===A.type)S=p();else{S=g(),A.text?S.textContent=A.text:A.html?S.innerHTML=A.html:d.error("Error: message is missing text payload",A),!A.avoidHighlighting&&this.highlightParsers&&this.highlightParsers.map((function(e){(0,s.highlightNode)(S,e.highlightRegex,e.highlightWords,(function(t){return h(t,e.highlightColor)}))&&e.highlightWholeMessage&&(S.className+=" ChatMessage--highlighted")}));for(var T=S.querySelectorAll(".linkify"),M=0;M<T.length;++M)(0,s.linkifyNode)(T[M]);if(y<A.createdAt+a.IMAGE_RETRY_MESSAGE_AGE)for(var x=S.querySelectorAll("img"),I=0;I<x.length;I++)x[I].addEventListener("error",f)}if(A.node=S,!A.type){var P=!Byond.IS_LTE_IE8&&a.MESSAGE_TYPES.find((function(e){return e.selector&&S.querySelector(e.selector)}));A.type=(null==P?void 0:P.type)||a.MESSAGE_TYPE_UNKNOWN}m(A),C[A.type]||(C[A.type]=0),C[A.type]+=1,this.messages.push(A),(0,c.canPageAcceptType)(this.page,A.type)&&(_.appendChild(S),this.visibleMessages.push(A))}}if(S){var F=this.rootNode.childNodes[0];i&&F?this.rootNode.insertBefore(_,F):this.rootNode.appendChild(_),this.scrollTracking&&e((function(){return r.scrollToBottom()}))}v&&this.events.emit("batchProcessed",C)}else this.queue=i?[].concat(t,this.queue):[].concat(this.queue,t)},n.pruneMessages=function(){if(this.isReady())if(this.scrollTracking){var e=this.visibleMessages,t=Math.max(0,e.length-a.MAX_VISIBLE_MESSAGES);if(t>0){this.visibleMessages=e.slice(t);for(var n=0;n<t;n++){var r=e[n];this.rootNode.removeChild(r.node),r.node="pruned"}this.messages=this.messages.filter((function(e){return"pruned"!==e.node})),d.log("pruned "+t+" visible messages")}var o=Math.max(0,this.messages.length-a.MAX_PERSISTED_MESSAGES);o>0&&(this.messages=this.messages.slice(o),d.log("pruned "+o+" stored messages"))}else d.debug("pruning delayed")},n.rebuildChat=function(){if(this.isReady()){for(var e,t=Math.max(0,this.messages.length-a.MAX_PERSISTED_MESSAGES),n=this.messages.slice(t),r=l(n);!(e=r()).done;)e.value.node=undefined;this.rootNode.textContent="",this.messages=[],this.visibleMessages=[],this.processBatch(n,{notifyListeners:!1})}},n.saveToDisk=function(){if(!Byond.IS_LTE_IE10){for(var e="",t=document.styleSheets,n=0;n<t.length;n++)for(var r=t[n].cssRules,o=0;o<r.length;o++){var i=r[o];i&&"string"==typeof i.cssText&&(e+=i.cssText+"\n")}e+="body, html { background-color: #141414 }\n";for(var a,c="",s=l(this.visibleMessages);!(a=s()).done;){var u=a.value;u.node&&(c+=u.node.outerHTML+"\n")}var d=new Blob(["<!doctype html>\n<html>\n<head>\n<title>SS13 Chat Log</title>\n<style>\n"+e+'</style>\n</head>\n<body>\n<div class="Chat">\n'+c+"</div>\n</body>\n</html>\n"]),h=(new Date).toISOString().substring(0,19).replace(/[-:]/g,"").replace("T","-");window.navigator.msSaveBlob(d,"ss13-chatlog-"+h+".html")}},t}();window.__chatRenderer__||(window.__chatRenderer__=new v);t.chatRenderer=window.__chatRenderer__}).call(this,n(108).setImmediate)},229:function(e,t,n){"use strict";t.__esModule=!0,t.useGame=t.gameReducer=t.gameMiddleware=void 0;var r=n(715);t.useGame=r.useGame;var o=n(716);t.gameMiddleware=o.gameMiddleware;var i=n(718);t.gameReducer=i.gameReducer},230:function(e,t,n){"use strict";t.__esModule=!0,t.selectGame=void 0;t.selectGame=function(e){return e.game}},231:function(e,t,n){"use strict";t.__esModule=!0,t.roundRestarted=t.connectionRestored=t.connectionLost=void 0;var r=n(21);t.roundRestarted=(0,r.createAction)("roundrestart"),t.connectionLost=(0,r.createAction)("game/connectionLost"),t.connectionRestored=(0,r.createAction)("game/connectionRestored")},232:function(e,t,n){"use strict";t.__esModule=!0,t.pingReducer=t.pingMiddleware=t.PingIndicator=void 0;var r=n(720);t.pingMiddleware=r.pingMiddleware;var o=n(721);t.PingIndicator=o.PingIndicator;var i=n(724);t.pingReducer=i.pingReducer},233:function(e,t,n){"use strict";t.__esModule=!0,t.PING_TIMEOUT=t.PING_ROUNDTRIP_WORST=t.PING_ROUNDTRIP_BEST=t.PING_QUEUE_SIZE=t.PING_MAX_FAILS=void 0;t.PING_TIMEOUT=2e3,t.PING_MAX_FAILS=3,t.PING_QUEUE_SIZE=8,t.PING_ROUNDTRIP_BEST=50,t.PING_ROUNDTRIP_WORST=200},695:function(e,t,n){n(164),e.exports=n(696)},696:function(e,t,n){"use strict";var r=n(46);n(698),n(699);var o,i=n(105),a=n(21),c=(n(106),n(62)),s=n(202),l=n(147),u=n(203),d=n(223),h=n(161),g=n(229),p=n(719),f=n(232),m=n(159),v=n(725);i.perf.mark("inception",null==(o=window.performance)||null==(o=o.timing)?void 0:o.navigationStart),i.perf.mark("init");var y=(0,u.configureStore)({reducer:(0,a.combineReducers)({audio:d.audioReducer,chat:h.chatReducer,game:g.gameReducer,ping:f.pingReducer,settings:m.settingsReducer}),middleware:{pre:[h.chatMiddleware,f.pingMiddleware,v.telemetryMiddleware,m.settingsMiddleware,d.audioMiddleware,g.gameMiddleware]}}),S=(0,l.createRenderer)((function(){var e=n(726).Panel;return(0,r.createComponentVNode)(2,u.StoreProvider,{store:y,children:(0,r.createComponentVNode)(2,e)})}));!function b(){if("loading"!==document.readyState){for((0,c.setupGlobalEvents)({ignoreWindowFocus:!0}),(0,p.setupPanelFocusHacks)(),(0,s.captureExternalLinks)(),y.subscribe(S),window.update=function(e){return y.dispatch(Byond.parseJson(e))};;){var e=window.__updateQueue__.shift();if(!e)break;window.update(e)}Byond.winset("output",{"is-visible":!1,"is-disabled":!0}),Byond.winset("browseroutput",{"is-visible":!0,"is-disabled":!1,pos:"0x0",size:"0x0"}),Byond.winget("output").then((function(e){Byond.winset("browseroutput",{size:e.size})}))}else document.addEventListener("DOMContentLoaded",b)}()},698:function(e,t,n){},699:function(e,t,n){},70:function(e,t,n){"use strict";t.__esModule=!0,t.updateSettings=t.updateHighlightSetting=t.toggleSettings=t.removeHighlightSetting=t.openChatSettings=t.loadSettings=t.changeSettingsTab=t.addHighlightSetting=void 0;var r=n(21),o=n(225);t.updateSettings=(0,r.createAction)("settings/update"),t.loadSettings=(0,r.createAction)("settings/load"),t.changeSettingsTab=(0,r.createAction)("settings/changeTab"),t.toggleSettings=(0,r.createAction)("settings/toggle"),t.openChatSettings=(0,r.createAction)("settings/openChatTab"),t.addHighlightSetting=(0,r.createAction)("settings/addHighlightSetting",(function(){return{payload:(0,o.createHighlightSetting)()}})),t.removeHighlightSetting=(0,r.createAction)("settings/removeHighlightSetting"),t.updateHighlightSetting=(0,r.createAction)("settings/updateHighlightSetting")},700:function(e,t,n){"use strict";t.__esModule=!0,t.useAudio=void 0;var r=n(21),o=n(224);t.useAudio=function(e){var t=(0,r.useSelector)(e,o.selectAudio),n=(0,r.useDispatch)(e);return Object.assign({},t,{toggle:function(){return n({type:"audio/toggle"})}})}},701:function(e,t,n){"use strict";t.__esModule=!0,t.audioMiddleware=void 0;var r=n(702),o=["url"];t.audioMiddleware=function(e){var t=new r.AudioPlayer;return t.onPlay((function(){e.dispatch({type:"audio/playing"})})),t.onStop((function(){e.dispatch({type:"audio/stopped"})})),function(e){return function(n){var r=n.type,i=n.payload;if("audio/playMusic"===r){var a=i.url,c=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(i,o);return t.play(a,c),e(n)}if("audio/stopMusic"===r)return t.stop(),e(n);if("settings/update"===r||"settings/load"===r){var s=null==i?void 0:i.adminMusicVolume;return"number"==typeof s&&t.setVolume(s),e(n)}return e(n)}}}},702:function(e,t,n){"use strict";function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.__esModule=!0,t.AudioPlayer=void 0;var i=(0,n(26).createLogger)("AudioPlayer");t.AudioPlayer=function(){function e(){var e=this;Byond.IS_LTE_IE9||(this.node=document.createElement("audio"),this.node.style.setProperty("display","none"),document.body.appendChild(this.node),this.playing=!1,this.volume=1,this.options={},this.onPlaySubscribers=[],this.onStopSubscribers=[],this.node.addEventListener("canplaythrough",(function(){i.log("canplaythrough"),e.playing=!0,e.node.playbackRate=e.options.pitch||1,e.node.currentTime=e.options.start||0,e.node.volume=e.volume,e.node.play();for(var t,n=r(e.onPlaySubscribers);!(t=n()).done;){(0,t.value)()}})),this.node.addEventListener("ended",(function(){i.log("ended"),e.stop()})),this.node.addEventListener("error",(function(t){e.playing&&(i.log("playback error",t.error),e.stop())})),this.playbackInterval=setInterval((function(){e.playing&&(e.options.end>0&&e.node.currentTime>=e.options.end&&e.stop())}),1e3))}var t=e.prototype;return t.destroy=function(){this.node&&(this.node.stop(),document.removeChild(this.node),clearInterval(this.playbackInterval))},t.play=function(e,t){void 0===t&&(t={}),this.node&&(i.log("playing",e,t),this.options=t,this.node.src=e)},t.stop=function(){if(this.node){if(this.playing)for(var e,t=r(this.onStopSubscribers);!(e=t()).done;)(0,e.value)();i.log("stopping"),this.playing=!1,this.node.src=""}},t.setVolume=function(e){this.node&&(this.volume=e,this.node.volume=e)},t.onPlay=function(e){this.node&&this.onPlaySubscribers.push(e)},t.onStop=function(e){this.node&&this.onStopSubscribers.push(e)},e}()},703:function(e,t,n){"use strict";t.__esModule=!0,t.NowPlayingWidget=void 0;var r=n(46),o=n(8),i=n(21),a=n(2),c=n(159),s=n(224);t.NowPlayingWidget=function(e,t){var n,l=(0,i.useSelector)(t,s.selectAudio),u=(0,i.useDispatch)(t),d=(0,c.useSettings)(t),h=null==(n=l.meta)?void 0:n.title;return(0,r.createComponentVNode)(2,a.Flex,{align:"center",children:[l.playing&&(0,r.createFragment)([(0,r.createComponentVNode)(2,a.Flex.Item,{shrink:0,mx:.5,color:"label",children:"Now playing:"}),(0,r.createComponentVNode)(2,a.Flex.Item,{mx:.5,grow:1,style:{"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"},children:h||"Unknown Track"})],4)||(0,r.createComponentVNode)(2,a.Flex.Item,{grow:1,color:"label",children:"Nothing to play."}),l.playing&&(0,r.createComponentVNode)(2,a.Flex.Item,{mx:.5,fontSize:"0.9em",children:(0,r.createComponentVNode)(2,a.Button,{tooltip:"Stop",icon:"stop",onClick:function(){return u({type:"audio/stopMusic"})}})}),(0,r.createComponentVNode)(2,a.Flex.Item,{mx:.5,fontSize:"0.9em",children:(0,r.createComponentVNode)(2,a.Knob,{minValue:0,maxValue:1,value:d.adminMusicVolume,step:.0025,stepPixelSize:1,format:function(e){return(0,o.toFixed)(100*e)+"%"},onDrag:function(e,t){return d.update({adminMusicVolume:t})}})})]})}},704:function(e,t,n){"use strict";t.__esModule=!0,t.useSettings=void 0;var r=n(21),o=n(70),i=n(115);t.useSettings=function(e){var t=(0,r.useSelector)(e,i.selectSettings),n=(0,r.useDispatch)(e);return Object.assign({},t,{visible:t.view.visible,toggle:function(){return n((0,o.toggleSettings)())},update:function(e){return n((0,o.updateSettings)(e))}})}},705:function(e,t,n){"use strict";t.__esModule=!0,t.settingsMiddleware=void 0;var r=n(109),o=n(227),i=n(70),a=n(115),c=n(160);t.settingsMiddleware=function(e){var t=!1;return function(n){return function(s){var l,u,d=s.type,h=s.payload;if(t||(t=!0,r.storage.get("panel-settings").then((function(t){e.dispatch((0,i.loadSettings)(t))}))),d===i.updateSettings.type||d===i.loadSettings.type||d===i.addHighlightSetting.type||d===i.removeHighlightSetting.type||d===i.updateHighlightSetting.type){var g=null==h?void 0:h.theme;g&&(0,o.setClientTheme)(g),n(s);var p=(0,a.selectSettings)(e.getState());return u=p.fontSize,document.documentElement.style.setProperty("font-size",u+"px"),document.body.style.setProperty("font-size",u+"px"),(l=p.fontFamily)===c.FONTS_DISABLED&&(l=null),document.documentElement.style.setProperty("font-family",l),document.body.style.setProperty("font-family",l),void r.storage.set("panel-settings",p)}return n(s)}}}},706:function(e,t,n){"use strict";t.__esModule=!0,t.settingsReducer=void 0;var r,o=n(70),i=n(225),a=n(160),c=["id"];var s=(0,i.createDefaultHighlightSetting)(),l={version:1,fontSize:13,fontFamily:a.FONTS[0],lineHeight:1.2,theme:"light",adminMusicVolume:.5,highlightText:"",highlightColor:"#ffdd44",highlightSettings:[s.id],highlightSettingById:(r={},r[s.id]=s,r),view:{visible:!1,activeTab:a.SETTINGS_TABS[0].id}};t.settingsReducer=function(e,t){void 0===e&&(e=l);var n=t.type,r=t.payload;if(n===o.updateSettings.type)return Object.assign({},e,r);if(n===o.loadSettings.type){if(null==r||!r.version)return e;delete r.view;var i=Object.assign({},e,r);i.highlightSettings?i.highlightSettingById[s.id]||(i.highlightSettings=[s.id].concat(i.highlightSettings),i.highlightSettingById[s.id]=s):(i.highlightSettings=[s.id],i.highlightSettingById[s.id]=s);var u=i.highlightSettingById[s.id];return u.highlightColor=i.highlightColor,u.highlightText=i.highlightText,i}if(n===o.toggleSettings.type)return Object.assign({},e,{view:Object.assign({},e.view,{visible:!e.view.visible})});if(n===o.openChatSettings.type)return Object.assign({},e,{view:Object.assign({},e.view,{visible:!0,activeTab:"chatPage"})});if(n===o.changeSettingsTab.type){var d=r.tabId;return Object.assign({},e,{view:Object.assign({},e.view,{activeTab:d})})}if(n===o.addHighlightSetting.type){var h,g=r;return e.highlightSettings.length>=a.MAX_HIGHLIGHT_SETTINGS?e:Object.assign({},e,{highlightSettings:[].concat(e.highlightSettings,[g.id]),highlightSettingById:Object.assign({},e.highlightSettingById,(h={},h[g.id]=g,h))})}if(n===o.removeHighlightSetting.type){var p=r.id,f=Object.assign({},e,{highlightSettings:[].concat(e.highlightSettings),highlightSettingById:Object.assign({},e.highlightSettingById)});return p===s.id?f.highlightSettings[s.id]=s:(delete f.highlightSettingById[p],f.highlightSettings=f.highlightSettings.filter((function(e){return e!==p})),f.highlightSettings.length||(f.highlightSettings.push(s.id),f.highlightSettingById[s.id]=s)),f}if(n===o.updateHighlightSetting.type){var m=r.id,v=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(r,c),y=Object.assign({},e,{highlightSettings:[].concat(e.highlightSettings),highlightSettingById:Object.assign({},e.highlightSettingById)});return m===s.id&&(v.highlightText&&(y.highlightText=v.highlightText),v.highlightColor&&(y.highlightColor=v.highlightColor)),y.highlightSettingById[m]&&(y.highlightSettingById[m]=Object.assign({},y.highlightSettingById[m],v)),y}return e}},707:function(e,t,n){"use strict";t.__esModule=!0,t.SettingsPanel=t.SettingsGeneral=void 0;var r=n(46),o=n(8),i=n(1),a=n(21),c=n(2),s=n(161),l=n(86),u=n(227),d=n(70),h=n(160),g=n(115),p=["id"];t.SettingsPanel=function(e,t){var n=(0,a.useSelector)(t,g.selectActiveTab),o=(0,a.useDispatch)(t);return(0,r.createComponentVNode)(2,c.Flex,{fill:!0,children:[(0,r.createComponentVNode)(2,c.Flex.Item,{children:(0,r.createComponentVNode)(2,c.Section,{fitted:!0,fill:!0,minHeight:"8em",children:(0,r.createComponentVNode)(2,c.Tabs,{vertical:!0,children:h.SETTINGS_TABS.map((function(e){return(0,r.createComponentVNode)(2,c.Tabs.Tab,{selected:e.id===n,onClick:function(){return o((0,d.changeSettingsTab)({tabId:e.id}))},children:e.name},e.id)}))})})}),(0,r.createComponentVNode)(2,c.Flex.Item,{grow:1,basis:0,children:["general"===n&&(0,r.createComponentVNode)(2,f),"chatPage"===n&&(0,r.createComponentVNode)(2,s.ChatPageSettings),"textHighlight"===n&&(0,r.createComponentVNode)(2,m)]})]})};var f=t.SettingsGeneral=function(e,t){var n=(0,a.useSelector)(t,g.selectSettings),s=n.theme,p=n.fontFamily,f=n.fontSize,m=n.lineHeight,v=(0,a.useDispatch)(t),y=(0,i.useLocalState)(t,"freeFont",!1),S=y[0],b=y[1];return(0,r.createComponentVNode)(2,c.Section,{children:[(0,r.createComponentVNode)(2,c.LabeledList,{children:[(0,r.createComponentVNode)(2,c.LabeledList.Item,{label:"Theme",children:(0,r.createComponentVNode)(2,c.Dropdown,{selected:s,options:u.THEMES,onSelected:function(e){return v((0,d.updateSettings)({theme:e}))}})}),(0,r.createComponentVNode)(2,c.LabeledList.Item,{label:"Font style",children:(0,r.createComponentVNode)(2,c.Flex,{inline:!0,align:"baseline",children:[(0,r.createComponentVNode)(2,c.Flex.Item,{children:!S&&(0,r.createComponentVNode)(2,c.Dropdown,{selected:p,options:h.FONTS,onSelected:function(e){return v((0,d.updateSettings)({fontFamily:e}))}})||(0,r.createComponentVNode)(2,c.Input,{value:p,onChange:function(e,t){return v((0,d.updateSettings)({fontFamily:t}))}})}),(0,r.createComponentVNode)(2,c.Flex.Item,{children:(0,r.createComponentVNode)(2,c.Button,{content:"Custom font",icon:S?"lock-open":"lock",color:S?"good":"bad",ml:1,onClick:function(){b(!S)}})})]})}),(0,r.createComponentVNode)(2,c.LabeledList.Item,{label:"Font size",children:(0,r.createComponentVNode)(2,c.NumberInput,{width:"4.2em",step:1,stepPixelSize:10,minValue:8,maxValue:32,value:f,unit:"px",format:function(e){return(0,o.toFixed)(e)},onChange:function(e,t){return v((0,d.updateSettings)({fontSize:t}))}})}),(0,r.createComponentVNode)(2,c.LabeledList.Item,{label:"Line height",children:(0,r.createComponentVNode)(2,c.NumberInput,{width:"4.2em",step:.01,stepPixelSize:2,minValue:.8,maxValue:5,value:m,format:function(e){return(0,o.toFixed)(e,2)},onDrag:function(e,t){return v((0,d.updateSettings)({lineHeight:t}))}})})]}),(0,r.createComponentVNode)(2,c.Divider),(0,r.createComponentVNode)(2,c.Button,{icon:"save",onClick:function(){return v((0,l.saveChatToDisk)())},children:"Save chat log"})]})},m=function(e,t){var n=(0,a.useSelector)(t,g.selectHighlightSettings),o=(0,a.useDispatch)(t);return(0,r.createComponentVNode)(2,c.Section,{fill:!0,scrollable:!0,height:"200px",children:[(0,r.createComponentVNode)(2,c.Section,{p:0,children:(0,r.createComponentVNode)(2,c.Flex,{direction:"column",children:[n.map((function(e,t){return(0,r.createComponentVNode)(2,v,{id:e,mb:t+1===n.length?0:"10px"},t)})),n.length<h.MAX_HIGHLIGHT_SETTINGS&&(0,r.createComponentVNode)(2,c.Flex.Item,{children:(0,r.createComponentVNode)(2,c.Button,{color:"transparent",icon:"plus",content:"Add Highlight Setting",onClick:function(){o((0,d.addHighlightSetting)())}})})]})}),(0,r.createComponentVNode)(2,c.Divider),(0,r.createComponentVNode)(2,c.Box,{children:[(0,r.createComponentVNode)(2,c.Button,{icon:"check",onClick:function(){return o((0,l.rebuildChat)())},children:"Apply now"}),(0,r.createComponentVNode)(2,c.Box,{inline:!0,fontSize:"0.9em",ml:1,color:"label",children:"Can freeze the chat for a while."})]})]})},v=function(e,t){var n=e.id,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,p),i=(0,a.useSelector)(t,g.selectHighlightSettingById),s=(0,a.useDispatch)(t),l=i[n],u=l.highlightColor,h=l.highlightText,f=l.highlightWholeMessage,m=l.matchWord,v=l.matchCase;return(0,r.normalizeProps)((0,r.createComponentVNode)(2,c.Flex.Item,Object.assign({},o,{children:[(0,r.createComponentVNode)(2,c.Flex,{mb:1,color:"label",align:"baseline",children:[(0,r.createComponentVNode)(2,c.Flex.Item,{grow:!0,children:(0,r.createComponentVNode)(2,c.Button,{content:"Delete",color:"transparent",icon:"times",onClick:function(){return s((0,d.removeHighlightSetting)({id:n}))}})}),(0,r.createComponentVNode)(2,c.Flex.Item,{children:(0,r.createComponentVNode)(2,c.Button.Checkbox,{checked:f,content:"Whole Message",tooltip:"If this option is selected, the entire message will be highlighted in yellow.",mr:"5px",onClick:function(){return s((0,d.updateHighlightSetting)({id:n,highlightWholeMessage:!f}))}})}),(0,r.createComponentVNode)(2,c.Flex.Item,{children:(0,r.createComponentVNode)(2,c.Button.Checkbox,{content:"Exact",checked:m,tooltipPosition:"bottom-start",tooltip:"If this option is selected, only exact matches (no extra letters before or after) will trigger. Not compatible with punctuation. Overriden if regex is used.",onClick:function(){return s((0,d.updateHighlightSetting)({id:n,matchWord:!m}))}})}),(0,r.createComponentVNode)(2,c.Flex.Item,{children:(0,r.createComponentVNode)(2,c.Button.Checkbox,{content:"Case",tooltip:"If this option is selected, the highlight will be case-sensitive.",checked:v,onClick:function(){return s((0,d.updateHighlightSetting)({id:n,matchCase:!v}))}})}),(0,r.createComponentVNode)(2,c.Flex.Item,{shrink:0,children:[(0,r.createComponentVNode)(2,c.ColorBox,{mr:1,color:u}),(0,r.createComponentVNode)(2,c.Input,{width:"5em",monospace:!0,placeholder:"#ffffff",value:u,onInput:function(e,t){return s((0,d.updateHighlightSetting)({id:n,highlightColor:t}))}})]})]}),(0,r.createComponentVNode)(2,c.TextArea,{height:"3em",value:h,placeholder:"Put words to highlight here. Separate terms with commas, i.e. (term1, term2, term3)",onChange:function(e,t){return s((0,d.updateHighlightSetting)({id:n,highlightText:t}))}})]})))}},708:function(e,t,n){"use strict";t.__esModule=!0,t.ChatPageSettings=void 0;var r=n(46),o=n(21),i=n(2),a=n(86),c=n(117),s=n(162);t.ChatPageSettings=function(e,t){var n=(0,o.useSelector)(t,s.selectCurrentChatPage),l=(0,o.useDispatch)(t);return(0,r.createComponentVNode)(2,i.Section,{fill:!0,children:[(0,r.createComponentVNode)(2,i.Flex,{mx:-.5,align:"center",children:[(0,r.createComponentVNode)(2,i.Flex.Item,{mx:.5,grow:1,children:(0,r.createComponentVNode)(2,i.Input,{fluid:!0,value:n.name,onChange:function(e,t){return l((0,a.updateChatPage)({pageId:n.id,name:t}))}})}),(0,r.createComponentVNode)(2,i.Flex.Item,{mx:.5,children:(0,r.createComponentVNode)(2,i.Button,{icon:"times",color:"red",onClick:function(){return l((0,a.removeChatPage)({pageId:n.id}))},children:"Remove"})})]}),(0,r.createComponentVNode)(2,i.Divider),(0,r.createComponentVNode)(2,i.Section,{title:"Messages to display",level:2,children:[c.MESSAGE_TYPES.filter((function(e){return!e.important&&!e.admin})).map((function(e){return(0,r.createComponentVNode)(2,i.Button.Checkbox,{checked:n.acceptedTypes[e.type],onClick:function(){return l((0,a.toggleAcceptedType)({pageId:n.id,type:e.type}))},children:e.name},e.type)})),(0,r.createComponentVNode)(2,i.Collapsible,{mt:1,color:"transparent",title:"Admin stuff",children:c.MESSAGE_TYPES.filter((function(e){return!e.important&&e.admin})).map((function(e){return(0,r.createComponentVNode)(2,i.Button.Checkbox,{checked:n.acceptedTypes[e.type],onClick:function(){return l((0,a.toggleAcceptedType)({pageId:n.id,type:e.type}))},children:e.name},e.type)}))})]})]})}},709:function(e,t,n){"use strict";t.__esModule=!0,t.ChatPanel=void 0;var r=n(46),o=n(6),i=n(2),a=n(228);function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}t.ChatPanel=function(e){var t,n;function s(){var t;return(t=e.call(this)||this).ref=(0,r.createRef)(),t.state={scrollTracking:!0},t.handleScrollTrackingChange=function(e){return t.setState({scrollTracking:e})},t}n=e,(t=s).prototype=Object.create(n.prototype),t.prototype.constructor=t,c(t,n);var l=s.prototype;return l.componentDidMount=function(){a.chatRenderer.mount(this.ref.current),a.chatRenderer.events.on("scrollTrackingChanged",this.handleScrollTrackingChange),this.componentDidUpdate()},l.componentWillUnmount=function(){a.chatRenderer.events.off("scrollTrackingChanged",this.handleScrollTrackingChange)},l.componentDidUpdate=function(e){requestAnimationFrame((function(){a.chatRenderer.ensureScrollTracking()})),(!e||(0,o.shallowDiffers)(this.props,e))&&a.chatRenderer.assignStyle({width:"100%","white-space":"pre-wrap","font-size":this.props.fontSize,"line-height":this.props.lineHeight})},l.render=function(){var e=this.state.scrollTracking;return(0,r.createFragment)([(0,r.createVNode)(1,"div","Chat",null,1,null,null,this.ref),!e&&(0,r.createComponentVNode)(2,i.Button,{className:"Chat__scrollButton",icon:"arrow-down",onClick:function(){return a.chatRenderer.scrollToBottom()},children:"Scroll to bottom"})],0)},s}(r.Component)},710:function(e,t,n){"use strict";function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.__esModule=!0,t.replaceInTextNode=t.linkifyNode=t.highlightNode=void 0;var i=function(e){for(var t,n,r,o,i=e.node,a=e.regex,c=e.createNode,s=e.captureAdjust,l=i.textContent,u=l.length,d=0,h=0,g=0;r=a.exec(l);){if(h+=1,++g>9999)return{};o||(o=document.createDocumentFragment()),t||(t=[]);var p=s?s(r[0]):r[0],f=p.length,m=r.index+r[0].indexOf(p);d<m&&(n=document.createTextNode(l.substring(d,m)),t.push(n),o.appendChild(n)),d=m+f,n=c(p),t.push(n),o.appendChild(n)}return o&&(d<u&&(n=document.createTextNode(l.substring(d,u)),t.push(n),o.appendChild(n)),i.parentNode.replaceChild(o,i)),{nodes:t,n:h}},a=t.replaceInTextNode=function(e,t,n){return function(o){var a,c,s=0;if(e&&(a=(c=i({node:o,regex:e,createNode:n})).nodes,s+=c.n),t){for(var l,u=0,d="(",h=r(t);!(l=h()).done;){var g=l.value;d+="^"+g+"\\W|\\W"+g+"\\W|\\W"+g+"$|^"+g+"$",++u!==t.length&&(d+="|")}d+=")";var p=new RegExp(d,"gi");if(e&&a)for(var f,m=r(a);!(f=m()).done;){var v=f.value;s+=(c=i({node:v,regex:p,createNode:n,captureAdjust:function(e){return e.replace(/^\W|\W$/g,"")}})).n}else s+=(c=i({node:o,regex:p,createNode:n,captureAdjust:function(e){return e.replace(/^\W|\W$/g,"")}})).n}return s}},c=function(e){var t=document.createElement("span");return t.setAttribute("style","background-color:#fd4;color:#000"),t.textContent=e,t},s=(t.highlightNode=function l(e,t,n,r){void 0===r&&(r=c),r||(r=c);for(var o=0,i=e.childNodes,s=0;s<i.length;s++){var u=i[s];3===u.nodeType?o+=a(t,n,r)(u):o+=l(u,t,n,r)}return o},t.linkifyNode=function u(e){for(var t=0,n=e.childNodes,r=0;r<n.length;r++){var o=n[r],i=String(o.nodeName).toLowerCase();3===o.nodeType?t+=s(o):"a"!==i&&(t+=u(o))}return t},a(/(?:(?:https?:\/\/)|(?:www\.))(?:[^ ]*?\.[^ ]*?)+[-A-Za-z0-9+&@#/%?=~_|$!:,.;(){}]+/gi,null,(function(e){var t=document.createElement("a");return t.href=e,t.textContent=e,t})))},711:function(e,t,n){"use strict";t.__esModule=!0,t.ChatTabs=void 0;var r=n(46),o=n(21),i=n(2),a=n(86),c=n(162),s=n(70),l=function(e){var t=e.value;return(0,r.createComponentVNode)(2,i.Box,{style:{"font-size":"0.7em","border-radius":"0.25em",width:"1.7em","line-height":"1.55em","background-color":"crimson",color:"#fff"},children:Math.min(t,99)})};t.ChatTabs=function(e,t){var n=(0,o.useSelector)(t,c.selectChatPages),u=(0,o.useSelector)(t,c.selectCurrentChatPage),d=(0,o.useDispatch)(t);return(0,r.createComponentVNode)(2,i.Flex,{align:"center",children:[(0,r.createComponentVNode)(2,i.Flex.Item,{children:(0,r.createComponentVNode)(2,i.Tabs,{textAlign:"center",children:n.map((function(e){return(0,r.createComponentVNode)(2,i.Tabs.Tab,{selected:e===u,rightSlot:e.unreadCount>0&&(0,r.createComponentVNode)(2,l,{value:e.unreadCount}),onClick:function(){return d((0,a.changeChatPage)({pageId:e.id}))},children:e.name},e.id)}))})}),(0,r.createComponentVNode)(2,i.Flex.Item,{ml:1,children:(0,r.createComponentVNode)(2,i.Button,{color:"transparent",icon:"plus",onClick:function(){d((0,a.addChatPage)()),d((0,s.openChatSettings)())}})})]})}},712:function(e,t,n){"use strict";t.__esModule=!0,t.chatMiddleware=void 0;var r=n(109),o=n(70),i=n(115),a=n(86),c=n(117),s=n(116),l=n(228),u=n(162);n(26);function d(){d=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),c=new I(r||[]);return o(a,"_invoke",{value:N(e,n,c)}),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var g="suspendedStart",p="executing",f="completed",m={};function v(){}function y(){}function S(){}var b={};l(b,a,(function(){return this}));var _=Object.getPrototypeOf,C=_&&_(_(P([])));C&&C!==n&&r.call(C,a)&&(b=C);var E=S.prototype=v.prototype=Object.create(b);function w(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function n(o,i,a,c){var s=h(e[o],e,i);if("throw"!==s.type){var l=s.arg,u=l.value;return u&&"object"==typeof u&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function N(t,n,r){var o=g;return function(i,a){if(o===p)throw new Error("Generator is already running");if(o===f){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var c=r.delegate;if(c){var s=T(c,r);if(s){if(s===m)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===g)throw o=f,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var l=h(t,n,r);if("normal"===l.type){if(o=r.done?f:"suspendedYield",l.arg===m)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=f,r.method="throw",r.arg=l.arg)}}}function T(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator["return"]&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var i=h(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function M(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(M,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(typeof t+" is not iterable")}return y.prototype=S,o(E,"constructor",{value:S,configurable:!0}),o(S,"constructor",{value:y,configurable:!0}),y.displayName=l(S,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,S):(e.__proto__=S,l(e,s,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},w(A.prototype),l(A.prototype,c,(function(){return this})),t.AsyncIterator=A,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new A(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(E),l(E,s,"Generator"),l(E,a,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function o(){for(;n.length;){var e=n.pop();if(e in t)return o.value=e,o.done=!1,o}return o.done=!0,o}},t.values=P,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),m}},"catch":function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}function h(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(l){return void n(l)}c.done?t(s):Promise.resolve(s).then(r,o)}function g(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){h(i,r,o,a,c,"next",e)}function c(e){h(i,r,o,a,c,"throw",e)}a(undefined)}))}}var p=function(){var e=g(d().mark((function t(e){var n,o,i;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=(0,u.selectChat)(e.getState()),o=Math.max(0,l.chatRenderer.messages.length-c.MAX_PERSISTED_MESSAGES),i=l.chatRenderer.messages.slice(o).map((function(e){return(0,s.serializeMessage)(e)})),r.storage.set("chat-state",n),r.storage.set("chat-messages",i);case 5:case"end":return t.stop()}}),t)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=g(d().mark((function t(e){var n,o,i,c;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([r.storage.get("chat-state"),r.storage.get("chat-messages")]);case 2:if(n=t.sent,o=n[0],i=n[1],!(o&&o.version<=4)){t.next=8;break}return e.dispatch((0,a.loadChat)()),t.abrupt("return");case 8:i&&(c=[].concat(i,[(0,s.createMessage)({type:"internal/reconnected"})]),l.chatRenderer.processBatch(c,{prepend:!0})),e.dispatch((0,a.loadChat)(o));case 10:case"end":return t.stop()}}),t)})));return function(t){return e.apply(this,arguments)}}();t.chatMiddleware=function(e){var t=!1,n=!1;return l.chatRenderer.events.on("batchProcessed",(function(t){n&&e.dispatch((0,a.updateMessageCount)(t))})),l.chatRenderer.events.on("scrollTrackingChanged",(function(t){e.dispatch((0,a.changeScrollTracking)(t))})),setInterval((function(){return p(e)}),c.MESSAGE_SAVE_INTERVAL),function(r){return function(c){var s=c.type,d=c.payload;if(t||(t=!0,f(e)),"chat/message"!==s){if(s===a.loadChat.type){r(c);var h=(0,u.selectCurrentChatPage)(e.getState());return l.chatRenderer.changePage(h),l.chatRenderer.onStateLoaded(),void(n=!0)}if(s!==a.changeChatPage.type&&s!==a.addChatPage.type&&s!==a.removeChatPage.type&&s!==a.toggleAcceptedType.type){if(s===a.rebuildChat.type)return l.chatRenderer.rebuildChat(),r(c);if(s!==o.updateSettings.type&&s!==o.loadSettings.type&&s!==o.addHighlightSetting.type&&s!==o.removeHighlightSetting.type&&s!==o.updateHighlightSetting.type){if("roundrestart"===s)return p(e),r(c);if(s!==a.saveChatToDisk.type)return r(c);l.chatRenderer.saveToDisk()}else{r(c);var g=(0,i.selectSettings)(e.getState());l.chatRenderer.setHighlight(g.highlightSettings,g.highlightSettingById)}}else{r(c);var m=(0,u.selectCurrentChatPage)(e.getState());l.chatRenderer.changePage(m)}}else{var v=Array.isArray(d)?d:[d];l.chatRenderer.processBatch(v)}}}}},713:function(e,t,n){"use strict";t.__esModule=!0,t.initialState=t.chatReducer=void 0;var r,o=n(86),i=n(116),a=["pageId"];function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l=(0,i.createMainPage)(),u=t.initialState={version:5,currentPageId:l.id,scrollTracking:!0,pages:[l.id],pageById:(r={},r[l.id]=l,r)};t.chatReducer=function(e,t){void 0===e&&(e=u);var n,r=t.type,s=t.payload;if(r===o.loadChat.type){if((null==s?void 0:s.version)!==e.version)return e;for(var d=0,h=Object.keys(s.pageById);d<h.length;d++)for(var g=h[d],p=s.pageById[g].acceptedTypes,f=l.acceptedTypes,m=0,v=Object.keys(f);m<v.length;m++){var y=v[m];p[y]===undefined&&(p[y]=f[y])}for(var S=0,b=Object.keys(s.pageById);S<b.length;S++){var _=b[S];s.pageById[_].unreadCount=0}return Object.assign({},e,s)}if(r===o.changeScrollTracking.type){var C=s,E=Object.assign({},e,{scrollTracking:C});if(C){var w,A=e.currentPageId,N=Object.assign({},e.pageById[A],{unreadCount:0});E.pageById=Object.assign({},e.pageById,((w={})[A]=N,w))}return E}if(r===o.updateMessageCount.type){for(var T,M=s,x=e.pages.map((function(t){return e.pageById[t]})),I=e.pageById[e.currentPageId],P=Object.assign({},e.pageById),F=c(x);!(T=F()).done;){for(var k=T.value,O=0,L=0,V=Object.keys(M);L<V.length;L++){var B=V[L];(0,i.canPageAcceptType)(k,B)&&(k===I&&e.scrollTracking||k!==I&&(0,i.canPageAcceptType)(I,B)||(O+=M[B]))}O>0&&(P[k.id]=Object.assign({},k,{unreadCount:k.unreadCount+O}))}return Object.assign({},e,{pageById:P})}if(r===o.addChatPage.type)return Object.assign({},e,{currentPageId:s.id,pages:[].concat(e.pages,[s.id]),pageById:Object.assign({},e.pageById,(n={},n[s.id]=s,n))});if(r===o.changeChatPage.type){var R,G=s.pageId,j=Object.assign({},e.pageById[G],{unreadCount:0});return Object.assign({},e,{currentPageId:G,pageById:Object.assign({},e.pageById,(R={},R[G]=j,R))})}if(r===o.updateChatPage.type){var D,H=s.pageId,Y=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(s,a),W=Object.assign({},e.pageById[H],Y);return Object.assign({},e,{pageById:Object.assign({},e.pageById,(D={},D[H]=W,D))})}if(r===o.toggleAcceptedType.type){var U,z=s.pageId,X=s.type,q=Object.assign({},e.pageById[z]);return q.acceptedTypes=Object.assign({},q.acceptedTypes),q.acceptedTypes[X]=!q.acceptedTypes[X],Object.assign({},e,{pageById:Object.assign({},e.pageById,(U={},U[z]=q,U))})}if(r===o.removeChatPage.type){var $=s.pageId,Q=Object.assign({},e,{pages:[].concat(e.pages),pageById:Object.assign({},e.pageById)});return delete Q.pageById[$],Q.pages=Q.pages.filter((function(e){return e!==$})),0===Q.pages.length&&(Q.pages.push(l.id),Q.pageById[l.id]=l,Q.currentPageId=l.id),Q.currentPageId&&Q.currentPageId!==$||(Q.currentPageId=Q.pages[0]),Q}return e}},714:function(e,t,n){"use strict";t.__esModule=!0,t.audioReducer=void 0;var r={visible:!1,playing:!1,track:null};t.audioReducer=function(e,t){void 0===e&&(e=r);var n=t.type,o=t.payload;return"audio/playing"===n?Object.assign({},e,{visible:!0,playing:!0}):"audio/stopped"===n?Object.assign({},e,{visible:!1,playing:!1}):"audio/playMusic"===n?Object.assign({},e,{meta:o}):"audio/stopMusic"===n?Object.assign({},e,{visible:!1,playing:!1,meta:null}):"audio/toggle"===n?Object.assign({},e,{visible:!e.visible}):e}},715:function(e,t,n){"use strict";t.__esModule=!0,t.useGame=void 0;var r=n(21),o=n(230);t.useGame=function(e){return(0,r.useSelector)(e,o.selectGame)}},716:function(e,t,n){"use strict";t.__esModule=!0,t.gameMiddleware=void 0;var r=n(163),o=n(231),i=n(230),a=n(717),c=function(e){return Object.assign({},e,{meta:Object.assign({},e.meta,{now:Date.now()})})};t.gameMiddleware=function(e){var t;return setInterval((function(){var n=e.getState();if(n){var r=(0,i.selectGame)(n),s=t&&Date.now()>=t+a.CONNECTION_LOST_AFTER;!r.connectionLostAt&&s&&e.dispatch(c((0,o.connectionLost)())),r.connectionLostAt&&!s&&e.dispatch(c((0,o.connectionRestored)()))}}),1e3),function(e){return function(n){var i=n.type;return i===r.pingSuccess.type||i===r.pingSoft.type?(t=Date.now(),e(n)):i===o.roundRestarted.type?e(c(n)):e(n)}}}},717:function(e,t,n){"use strict";t.__esModule=!0,t.CONNECTION_LOST_AFTER=void 0;t.CONNECTION_LOST_AFTER=2e4},718:function(e,t,n){"use strict";t.__esModule=!0,t.gameReducer=void 0;var r=n(231),o={roundId:null,roundTime:null,roundRestartedAt:null,connectionLostAt:null};t.gameReducer=function(e,t){void 0===e&&(e=o);var n=t.type,i=(t.payload,t.meta);return"roundrestart"===n?Object.assign({},e,{roundRestartedAt:i.now}):n===r.connectionLost.type?Object.assign({},e,{connectionLostAt:i.now}):n===r.connectionRestored.type?Object.assign({},e,{connectionLostAt:null}):e}},719:function(e,t,n){"use strict";(function(e){t.__esModule=!0,t.setupPanelFocusHacks=void 0;var r=n(206),o=n(62),i=n(207),a=function(){return e((function(){return(0,i.focusMap)()}))};t.setupPanelFocusHacks=function(){var e=!1,t=null;window.addEventListener("focusin",(function(t){e=(0,o.canStealFocus)(t.target)})),window.addEventListener("mousedown",(function(e){t=[e.screenX,e.screenY]})),window.addEventListener("mouseup",(function(n){if(t){var o=[n.screenX,n.screenY];(0,r.vecLength)((0,r.vecSubtract)(o,t))>=10&&(e=!0)}e||a()})),o.globalEvents.on("keydown",(function(e){e.isModifierKey()||a()}))}}).call(this,n(108).setImmediate)},720:function(e,t,n){"use strict";t.__esModule=!0,t.pingMiddleware=void 0;var r=n(1),o=n(163),i=n(233);t.pingMiddleware=function(e){var t=!1,n=0,a=[],c=function(){for(var t=0;t<i.PING_QUEUE_SIZE;t++){var c=a[t];c&&Date.now()-c.sentAt>i.PING_TIMEOUT&&(a[t]=null,e.dispatch((0,o.pingFail)()))}var s={index:n,sentAt:Date.now()};a[n]=s,(0,r.sendMessage)({type:"ping",payload:{index:n}}),n=(n+1)%i.PING_QUEUE_SIZE};return function(e){return function(n){var r=n.type,i=n.payload;if(t||(t=!0,c()),r===o.pingSoft.type)return i.afk||c(),e(n);if(r===o.pingReply.type){var s=i.index,l=a[s];if(!l)return;return a[s]=null,e((0,o.pingSuccess)(l))}return e(n)}}}},721:function(e,t,n){"use strict";t.__esModule=!0,t.PingIndicator=void 0;var r=n(46),o=n(722),i=n(8),a=n(21),c=n(2),s=n(723);t.PingIndicator=function(e,t){var n=(0,a.useSelector)(t,s.selectPing),l=o.Color.lookup(n.networkQuality,[new o.Color(220,40,40),new o.Color(220,200,40),new o.Color(60,220,40)]),u=n.roundtrip?(0,i.toFixed)(n.roundtrip):"--";return(0,r.createVNode)(1,"div","Ping",[(0,r.createComponentVNode)(2,c.Box,{className:"Ping__indicator",backgroundColor:l}),u],0)}},722:function(e,t,n){"use strict";t.__esModule=!0,t.Color=void 0;var r=t.Color=function(){function e(e,t,n,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=1),this.r=e,this.g=t,this.b=n,this.a=r}return e.prototype.toString=function(){return"rgba("+(0|this.r)+", "+(0|this.g)+", "+(0|this.b)+", "+(0|this.a)+")"},e}();r.fromHex=function(e){return new r(parseInt(e.substr(1,2),16),parseInt(e.substr(3,2),16),parseInt(e.substr(5,2),16))},r.lerp=function(e,t,n){return new r((t.r-e.r)*n+e.r,(t.g-e.g)*n+e.g,(t.b-e.b)*n+e.b,(t.a-e.a)*n+e.a)},r.lookup=function(e,t){void 0===t&&(t=[]);var n=t.length;if(n<2)throw new Error("Needs at least two colors!");var o=e*(n-1);if(e<1e-4)return t[0];if(e>=.9999)return t[n-1];var i=o%1,a=0|o;return r.lerp(t[a],t[a+1],i)}},723:function(e,t,n){"use strict";t.__esModule=!0,t.selectPing=void 0;t.selectPing=function(e){return e.ping}},724:function(e,t,n){"use strict";t.__esModule=!0,t.pingReducer=void 0;var r=n(8),o=n(163),i=n(233);t.pingReducer=function(e,t){void 0===e&&(e={});var n=t.type,a=t.payload;if(n===o.pingSuccess.type){var c=a.roundtrip,s=e.roundtripAvg||c,l=Math.round(.4*s+.6*c);return{roundtrip:c,roundtripAvg:l,failCount:0,networkQuality:1-(0,r.scale)(l,i.PING_ROUNDTRIP_BEST,i.PING_ROUNDTRIP_WORST)}}if(n===o.pingFail.type){var u=e.failCount,d=void 0===u?0:u,h=(0,r.clamp01)(e.networkQuality-d/i.PING_MAX_FAILS),g=Object.assign({},e,{failCount:d+1,networkQuality:h});return d>i.PING_MAX_FAILS&&(g.roundtrip=undefined,g.roundtripAvg=undefined),g}return e}},725:function(e,t,n){"use strict";t.__esModule=!0,t.telemetryMiddleware=void 0;var r=n(1),o=n(109);function i(){i=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),c=new I(r||[]);return o(a,"_invoke",{value:N(e,n,c)}),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var g="suspendedStart",p="executing",f="completed",m={};function v(){}function y(){}function S(){}var b={};u(b,c,(function(){return this}));var _=Object.getPrototypeOf,C=_&&_(_(P([])));C&&C!==n&&r.call(C,c)&&(b=C);var E=S.prototype=v.prototype=Object.create(b);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function n(o,i,a,c){var s=h(e[o],e,i);if("throw"!==s.type){var l=s.arg,u=l.value;return u&&"object"==typeof u&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function N(t,n,r){var o=g;return function(i,a){if(o===p)throw new Error("Generator is already running");if(o===f){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var c=r.delegate;if(c){var s=T(c,r);if(s){if(s===m)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===g)throw o=f,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var l=h(t,n,r);if("normal"===l.type){if(o=r.done?f:"suspendedYield",l.arg===m)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=f,r.method="throw",r.arg=l.arg)}}}function T(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator["return"]&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var i=h(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function M(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(M,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[c];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(typeof t+" is not iterable")}return y.prototype=S,o(E,"constructor",{value:S,configurable:!0}),o(S,"constructor",{value:y,configurable:!0}),y.displayName=u(S,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,S):(e.__proto__=S,u(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},w(A.prototype),u(A.prototype,s,(function(){return this})),t.AsyncIterator=A,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new A(d(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(E),u(E,l,"Generator"),u(E,c,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function o(){for(;n.length;){var e=n.pop();if(e in t)return o.value=e,o.done=!1,o}return o.done=!0,o}},t.values=P,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),m}},"catch":function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}function a(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(l){return void n(l)}c.done?t(s):Promise.resolve(s).then(r,o)}var c=(0,n(26).createLogger)("telemetry");t.telemetryMiddleware=function(e){var t,n;return function(s){return function(l){var u,d=l.type,h=l.payload;if("telemetry/request"!==d)return"backend/update"===d?(s(l),void(u=i().mark((function f(){var r,a,s,l;return i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(a=null==h||null==(r=h.config)?void 0:r.client){i.next=4;break}return c.error("backend/update payload is missing client data!"),i.abrupt("return");case 4:if(t){i.next=13;break}return i.next=7,o.storage.get("telemetry");case 7:if(i.t0=i.sent,i.t0){i.next=10;break}i.t0={};case 10:(t=i.t0).connections||(t.connections=[]),c.debug("retrieved telemetry from storage",t);case 13:s=!1,t.connections.find((function(e){return n=a,(t=e).ckey===n.ckey&&t.address===n.address&&t.computer_id===n.computer_id;var t,n}))||(s=!0,t.connections.unshift(a),t.connections.length>10&&t.connections.pop()),s&&(c.debug("saving telemetry to storage",t),o.storage.set("telemetry",t)),n&&(l=n,n=null,e.dispatch({type:"telemetry/request",payload:l}));case 18:case"end":return i.stop()}}),f)})),function(){var e=this,t=arguments;return new Promise((function(n,r){var o=u.apply(e,t);function i(e){a(o,n,r,i,c,"next",e)}function c(e){a(o,n,r,i,c,"throw",e)}i(undefined)}))})()):s(l);if(!t)return c.debug("deferred"),void(n=h);c.debug("sending");var g=(null==h?void 0:h.limits)||{},p=t.connections.slice(0,g.connections);(0,r.sendMessage)({type:"telemetry",payload:{connections:p}})}}}},726:function(e,t,n){"use strict";t.__esModule=!0,t.Panel=void 0;var r=n(46),o=n(2),i=n(3),a=n(223),c=n(161),s=n(229),l=n(727),u=n(232),d=n(728),h=n(159),g=(t.Panel=function(e,t){if(Byond.IS_LTE_IE10)return(0,r.createComponentVNode)(2,g);var n=(0,a.useAudio)(t),p=(0,h.useSettings)(t),f=(0,s.useGame)(t);return(0,r.createComponentVNode)(2,i.Pane,{theme:p.theme,children:(0,r.createComponentVNode)(2,o.Flex,{direction:"column",height:"100%",children:[(0,r.createComponentVNode)(2,o.Flex.Item,{children:(0,r.createComponentVNode)(2,o.Section,{fitted:!0,children:(0,r.createComponentVNode)(2,o.Flex,{mx:.5,align:"center",children:[(0,r.createComponentVNode)(2,o.Flex.Item,{mx:.5,grow:1,overflowX:"auto",children:(0,r.createComponentVNode)(2,c.ChatTabs)}),(0,r.createComponentVNode)(2,o.Flex.Item,{mx:.5,children:(0,r.createComponentVNode)(2,u.PingIndicator)}),(0,r.createComponentVNode)(2,o.Flex.Item,{mx:.5,children:(0,r.createComponentVNode)(2,o.Button,{color:"grey",selected:n.visible,icon:"music",tooltip:"Music player",tooltipPosition:"bottom-left",onClick:function(){return n.toggle()}})}),(0,r.createComponentVNode)(2,o.Flex.Item,{mx:.5,children:(0,r.createComponentVNode)(2,o.Button,{icon:p.visible?"times":"cog",selected:p.visible,tooltip:p.visible?"Close settings":"Open settings",tooltipPosition:"bottom-left",onClick:function(){return p.toggle()}})})]})})}),n.visible&&(0,r.createComponentVNode)(2,o.Flex.Item,{mt:1,children:(0,r.createComponentVNode)(2,o.Section,{children:(0,r.createComponentVNode)(2,a.NowPlayingWidget)})}),p.visible&&(0,r.createComponentVNode)(2,o.Flex.Item,{mt:1,children:(0,r.createComponentVNode)(2,h.SettingsPanel)}),(0,r.createComponentVNode)(2,o.Flex.Item,{mt:1,grow:1,children:(0,r.createComponentVNode)(2,o.Section,{fill:!0,fitted:!0,position:"relative",children:[(0,r.createComponentVNode)(2,i.Pane.Content,{className:"scrollable",scrollable:!0,children:(0,r.createComponentVNode)(2,c.ChatPanel,{lineHeight:p.lineHeight})}),(0,r.createComponentVNode)(2,l.Notifications,{children:[f.connectionLostAt&&(0,r.createComponentVNode)(2,l.Notifications.Item,{rightSlot:(0,r.createComponentVNode)(2,d.ReconnectButton),children:"You are either AFK, experiencing lag or the connection has closed."}),f.roundRestartedAt&&(0,r.createComponentVNode)(2,l.Notifications.Item,{children:["The connection has been closed because the server is restarting. ",(0,r.createVNode)(1,"br")," Please wait while you automatically reconnect."]})]})]})})]})})},function(e,t){var n=(0,h.useSettings)(t);return(0,r.createComponentVNode)(2,i.Pane,{theme:n.theme,children:(0,r.createComponentVNode)(2,i.Pane.Content,{scrollable:!0,children:[(0,r.createComponentVNode)(2,o.Button,{style:{position:"fixed",top:"1em",right:"2em","z-index":1e3},selected:n.visible,onClick:function(){return n.toggle()},children:"Settings"}),n.visible&&(0,r.createComponentVNode)(2,o.Flex.Item,{mt:1,children:(0,r.createComponentVNode)(2,h.SettingsPanel)})||(0,r.createComponentVNode)(2,c.ChatPanel,{lineHeight:n.lineHeight})]})})})},727:function(e,t,n){"use strict";t.__esModule=!0,t.Notifications=void 0;var r=n(46),o=n(2);(t.Notifications=function(e){var t=e.children;return(0,r.createVNode)(1,"div","Notifications",t,0)}).Item=function(e){var t=e.rightSlot,n=e.children;return(0,r.createComponentVNode)(2,o.Flex,{align:"center",className:"Notification",children:[(0,r.createComponentVNode)(2,o.Flex.Item,{className:"Notification__content",grow:1,children:n}),t&&(0,r.createComponentVNode)(2,o.Flex.Item,{className:"Notification__rightSlot",children:t})]})}},728:function(e,t,n){"use strict";t.__esModule=!0,t.ReconnectButton=void 0;var r=n(46),o=n(2),i=null;setInterval((function(){Byond.winget("","url").then((function(e){e&&!e.match(/:0$/)&&(i=e)}))}),0);t.ReconnectButton=function(e,t){return i&&(0,r.createComponentVNode)(2,o.Flex,{children:[(0,r.createComponentVNode)(2,o.Flex.Item,{mr:"3px",children:(0,r.createComponentVNode)(2,o.Button,{fluid:!0,icon:"history",color:"white",content:"Reconnect",onClick:function(){Byond.command(".reconnect")}})}),(0,r.createComponentVNode)(2,o.Flex.Item,{children:(0,r.createComponentVNode)(2,o.Button,{icon:"power-off",color:"white",tooltip:"Restart game",tooltipPosition:"top-left",onClick:function(){location.href="byond://"+i,Byond.command(".quit")}})})]})}},86:function(e,t,n){"use strict";t.__esModule=!0,t.updateMessageCount=t.updateChatPage=t.toggleAcceptedType=t.saveChatToDisk=t.removeChatPage=t.rebuildChat=t.loadChat=t.changeScrollTracking=t.changeChatPage=t.addChatPage=void 0;var r=n(21),o=n(116);t.loadChat=(0,r.createAction)("chat/load"),t.rebuildChat=(0,r.createAction)("chat/rebuild"),t.updateMessageCount=(0,r.createAction)("chat/updateMessageCount"),t.addChatPage=(0,r.createAction)("chat/addPage",(function(){return{payload:(0,o.createPage)()}})),t.changeChatPage=(0,r.createAction)("chat/changePage"),t.updateChatPage=(0,r.createAction)("chat/updatePage"),t.toggleAcceptedType=(0,r.createAction)("chat/toggleAcceptedType"),t.removeChatPage=(0,r.createAction)("chat/removePage"),t.changeScrollTracking=(0,r.createAction)("chat/changeScrollTracking"),t.saveChatToDisk=(0,r.createAction)("chat/saveToDisk")}});