var NanoUtility=function(){var a={};return{init:function(){var e=$("body");a=e.data("urlParameters")},generateHref:function(e){var t="?";for(var n in a)a.hasOwnProperty(n)&&("?"!==t&&(t+=";"),t+=n+"="+a[n]);for(var n in e)e.hasOwnProperty(n)&&("?"!==t&&(t+=";"),t+=n+"="+e[n]);return t},winset:function(e,t,n){var a,r;return null==n&&(n=NanoStateManager.getData().config.window.ref),(a={})[n+"."+e]=t,r=a,location.href=NanoUtility.href("winset",r)},extend:function(n,a){return Object.keys(a).forEach(function(e){var t;return(t=a[e])&&"[object Object]"===Object.prototype.toString.call(t)?(n[e]=n[e]||{},NanoUtility.extend(n[e],t)):n[e]=t}),n},href:function(e,t){return null==e&&(e=""),null==t&&(t={}),e=new Url("byond://"+e),NanoUtility.extend(e.query,t),e},close:function(){var e;return e={command:"nanoclose "+a.src},this.winset("is-visible","false"),location.href=NanoUtility.href("winset",e)}}}();"undefined"==typeof jQuery&&reportError("ERROR: Javascript library failed to load!"),"undefined"==typeof doT&&reportError("ERROR: Template engine failed to load!");var reportError=function(e){window.location="byond://?nano_err="+encodeURIComponent(e),alert(e)};$(document).ready(function(){NanoUtility.init(),NanoStateManager.init(),NanoTemplate.init(),NanoWindow.init()}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length,n=Number(arguments[1])||0;for((n=n<0?Math.ceil(n):Math.floor(n))<0&&(n+=t);n<t;n++)if(n in this&&this[n]===e)return n;return-1}),String.prototype.format||(String.prototype.format=function(n){return this.replace(String.prototype.format.regex,function(e){var t=parseInt(e.substring(1,e.length-1));return 0<=t?n[t]:-1===t?"{":-2===t?"}":""})},String.prototype.format.regex=new RegExp("{-?[0-9]+}","g")),Object.size=function(e){var t=0;for(var n in e)e.hasOwnProperty(n)&&t++;return t},window.console||(window.console={log:function(e){return!1}}),String.prototype.toTitleCase=function(){var r=/^(a|an|and|as|at|but|by|en|for|if|in|of|on|or|the|to|vs?\.?|via)$/i;return this.replace(/([^\W_]+[^\s-]*) */g,function(e,t,n,a){return 0<n&&n+t.length!==a.length&&-1<t.search(r)&&":"!==a.charAt(n-2)&&a.charAt(n-1).search(/[^\s-]/)<0?e.toLowerCase():-1<t.substr(1).search(/[A-Z]|\../)?e:e.charAt(0).toUpperCase()+e.substr(1)})},$.ajaxSetup({cache:!1}),Function.prototype.inheritsFrom=function(e){return this.prototype=new e,(this.prototype.constructor=this).prototype.parent=e.prototype,this},String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),String.prototype.ckey||(String.prototype.ckey=function(){return this.replace(/\W/g,"").toLowerCase()}),NanoStateManager=function(){function t(e,t){for(var n in e)e.hasOwnProperty(n)&&jQuery.isFunction(e[n])&&(t=e[n].call(this,t));return t}var n=!1,a=null,r={},o={},i={},s=null,l=function(e){null!=s&&(!1!==(e=s.onBeforeUpdate(e))?(a=e,s.onUpdate(a),s.onAfterUpdate(a)):reportError("data is false, return"))};return{init:function(){!function(){null!=(a=$("body").data("initialData"))&&a.hasOwnProperty("config")&&a.hasOwnProperty("data")||reportError("Error: Initial data did not load correctly."+JSON.stringify(a));var e="default";a.config.hasOwnProperty("stateKey")&&a.config.stateKey&&(e=a.config.stateKey.toLowerCase()),NanoStateManager.setCurrentState(e),$(document).on("templatesLoaded",function(){l(a),n=!0})}()},receiveUpdateData:function(e){!function(e){var t;try{t=jQuery.parseJSON(e)}catch(e){return reportError("recieveUpdateData failed. <br>Error name: "+e.name+"<br>Error Message: "+e.message)}t.hasOwnProperty("data")||(a&&a.hasOwnProperty("data")?t.data=a.data:t.data={}),n?l(t):a=t}(e)},addBeforeUpdateCallback:function(e,t){r[e]=t},addBeforeUpdateCallbacks:function(e){for(var t in e)e.hasOwnProperty(t)&&NanoStateManager.addBeforeUpdateCallback(t,e[t])},removeBeforeUpdateCallback:function(e){r.hasOwnProperty(e)&&delete r[e]},executeBeforeUpdateCallbacks:function(e){return t(r,e)},addAfterUpdateCallback:function(e,t){o[e]=t},addAfterUpdateCallbacks:function(e){for(var t in e)e.hasOwnProperty(t)&&NanoStateManager.addAfterUpdateCallback(t,e[t])},removeAfterUpdateCallback:function(e){o.hasOwnProperty(e)&&delete o[e]},executeAfterUpdateCallbacks:function(e){return t(o,e)},addState:function(e){e instanceof NanoStateClass?e.key?i[e.key]=e:reportError("ERROR: Attempted to add a state with an invalid stateKey"):reportError("ERROR: Attempted to add a state which is not instanceof NanoStateClass")},setCurrentState:function(e){if(void 0===e||!e)return reportError("ERROR: No state key was passed!"),!1;if(!i.hasOwnProperty(e))return reportError("ERROR: Attempted to set a current state which does not exist: "+e),!1;var t=s;return s=i[e],null!=t&&t.onRemove(s),s.onAdd(t),!0},getCurrentState:function(){return s},getData:function(){return a}}}(),NanoBaseCallbacks=function(){var a=!0,t={},n={status:function(n){var e;return 2==n.config.status?(e="good",$(".linkActive").removeClass("inactive")):(e=1==n.config.status?"average":"bad",$(".linkActive").addClass("inactive")),$(".statusicon").removeClass("good bad average").addClass(e),$(".linkActive").stopTime("linkPending"),$(".linkActive").removeClass("linkPending"),$(".linkActive").off("click").on("click",function(e){e.preventDefault();var t=$(this).data("href");null!=t&&a&&(a=!1,$("body").oneTime(300,"enableClick",function(){a=!0}),2==n.config.status&&$(this).oneTime(300,"linkPending",function(){$(this).addClass("linkPending")}),window.location.href=t)}),n},nanomap:function(e){return $(".mapIcon").off("mouseenter mouseleave").on("mouseenter",function(e){$("#uiMapTooltip").html($(this).children(".tooltip").html()).show().stopTime().oneTime(5e3,"hideTooltip",function(){$(this).fadeOut(500)})}),$(".zoomLink").off("click").on("click",function(e){e.preventDefault();var t=$(this).data("zoomLevel"),n=$("#uiMap"),a=n.width()*t,r=n.height()*t;n.css({zoom:t,left:"50%",top:"50%",marginLeft:"-"+Math.floor(a/2)+"px",marginTop:"-"+Math.floor(r/2)+"px"})}),$("#uiMapImage").attr("src",e.config.map+"_nanomap_z"+e.config.mapZLevel+".png"),e}};return{addCallbacks:function(){NanoStateManager.addBeforeUpdateCallbacks(t),NanoStateManager.addAfterUpdateCallbacks(n)},removeCallbacks:function(){for(var e in t)t.hasOwnProperty(e)&&NanoStateManager.removeBeforeUpdateCallback(e);for(var e in n)n.hasOwnProperty(e)&&NanoStateManager.removeAfterUpdateCallback(e)}}}(),NanoBaseHelpers=function(){var t={syndicateMode:function(){return $(".mainBG").css("background","url('syndicate.png') no-repeat fixed center/50% 50%, linear-gradient(to bottom, #8f1414 0%, #4B0A0A 100%) no-repeat fixed center;"),$("#uiTitleFluff").css("background-image","url('uiTitleFluff-Syndicate.png')"),$("#uiTitleFluff").css("background-position","50% 50%"),$("#uiTitleFluff").css("background-repeat","no-repeat"),""},combine:function(e,t){return e&&t?e.concat(t):e||t},dump:function(e){return JSON.stringify(e)},link:function(e,t,n,a,r,o){var i="",s="noIcon";void 0!==t&&t&&(i='<div class="uiLinkPendingIcon"></div><i class="fa fa-fw fa-'+t+'"></i>',s="hasIcon"),void 0!==r&&r||(r="link");var l="";void 0!==o&&o&&(l='id="'+o+'"');var c=NanoTransition.allocID(l+"_"+e.toString().replace(/[^a-z0-9_]/gi,"_")+"_"+t);return void 0!==a&&a?'<div unselectable="on" class="link '+s+" "+c+'" '+l+">"+i+e+'</div><script>$(function() { var newState = {"..class": "'+r+" "+a+'"}; var old = NanoTransition.transitionElement("'+c+'", null, newState, 200); NanoTransition.animateHover("'+c+'", null, old, newState); });<\/script>':'<div unselectable="on" class="linkActive '+s+" "+c+'" data-href="'+NanoUtility.generateHref(n)+'" '+l+">"+i+e+'</div><script>$(function() { var newState = {"..class": "'+r+'"}; var old = NanoTransition.transitionElement("'+c+'", null, newState, 200); NanoTransition.animateHover("'+c+'", null, old, newState); });<\/script>'},xor:function(e,t){return e^t},precisionRound:function(e,t){if(0==t)return Math.round(number);var n=Math.pow(10,t);return Math.round(e*n)/n},round:function(e){return Math.round(e)},fixed:function(e){return Math.round(10*e)/10},floor:function(e){return Math.floor(e)},ceil:function(e){return Math.ceil(e)},string:function(){if(0==arguments.length)return"";if(1==arguments.length)return arguments[0];if(1<arguments.length){stringArgs=[];for(var e=1;e<arguments.length;e++)stringArgs.push(arguments[e]);return arguments[0].format(stringArgs)}return""},formatNumber:function(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")},capitalizeFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},displayBar:function(e,t,n,a,r){t<n?e<t?e=t:n<e&&(e=n):t<e?e=t:e<n&&(e=n),void 0!==a&&a||(a=""),void 0!==r&&r||(r="");var o=Math.round((e-t)/(n-t)*100),i=NanoTransition.allocID(t+"_"+n);return'<div class="displayBar '+i+" "+a+'"><div class="displayBarFill"></div><div class="displayBarText '+a+'">'+r+'</div></div><script>$(function() { NanoTransition.transitionElement("'+i+'", ".displayBarFill", {width: "'+o+'%", "..class": "'+a+'"}); });<\/script>'},dangerToClass:function(e){return 0==e?"good":1==e?"average":"bad"},dangerToSpan:function(e){return 0==e?'"<span class="good">Good</span>"':1==e?'"<span class="average">Minor Alert</span>"':'"<span class="bad">Major Alert</span>"'},generateHref:function(e){var t=$("body");_urlParameters=t.data("urlParameters");var n="?";for(var a in _urlParameters)_urlParameters.hasOwnProperty(a)&&("?"!==n&&(n+=";"),n+=a+"="+_urlParameters[a]);for(var a in e)e.hasOwnProperty(a)&&("?"!==n&&(n+=";"),n+=a+"="+e[a]);return n},displayDNABlocks:function(e,t,n,a,r){if(!e)return'<div class="notice">Please place a valid subject into the DNA modifier.</div>';var o=e.split(""),i='<div class="dnaBlock"><div class="link dnaBlockNumber">1</div>',s=1,l=1;for(var c in o)if(o.hasOwnProperty(c)&&"object"!=typeof o[c]){var d;d="UI"==r.toUpperCase()?{selectUIBlock:s,selectUISubblock:l}:{selectSEBlock:s,selectSESubblock:l};var u="linkActive";s==t&&l==n&&(u="selected"),i+='<div class="link '+u+' dnaSubBlock" data-href="'+NanoUtility.generateHref(d)+'" id="dnaBlock'+c+'">'+o[c]+"</div>",++c%a==0&&c<o.length?(l=1,i+='</div><div class="dnaBlock"><div class="link dnaBlockNumber">'+ ++s+"</div>"):l++}return i+="</div>"},cMirror:function(e){CodeMirror.fromTextArea(document.getElementById(e),{lineNumbers:!0,indentUnit:4,indentWithTabs:!0,theme:"lesser-dark"})},smoothNumber:function(e){var t=NanoTransition.allocID("n");return'<span class="'+t+'"></span><script>$(function() { var newState = {value: '+e+'}; var old = NanoTransition.updateElement("'+t+'", newState); NanoTransition.animateTextValue("'+t+'", null, -1, old["value"], newState["value"]); });<\/script>'},smoothRound:function(e,t){var n=NanoTransition.allocID(t);return void 0===t&&(placed=0),'<span class="'+n+'"></span><script>$(function() { var newState = {value: '+e.toFixed(t)+'}; var old = NanoTransition.updateElement("'+n+'", newState); NanoTransition.animateTextValue("'+n+'", null, '+t+', old["value"], newState["value"]); });<\/script>'}};return{addHelpers:function(){NanoTemplate.addHelpers(t)},removeHelpers:function(){for(var e in t)t.hasOwnProperty(e)&&NanoTemplate.removeHelper(e)}}}(),NanoStateDefaultClass.inheritsFrom(NanoStateClass);var NanoStateDefault=new NanoStateDefaultClass;function NanoStateDefaultClass(){this.key="default",this.key=this.key.toLowerCase(),NanoStateManager.addState(this)}NanoStatePDAClass.inheritsFrom(NanoStateClass);var NanoStatePDA=new NanoStatePDAClass;function NanoStatePDAClass(){this.key="pda",this.key=this.key.toLowerCase(),this.current_template="",NanoStateManager.addState(this)}function NanoStateClass(){}NanoStatePDAClass.prototype.onUpdate=function(t){NanoStateClass.prototype.onUpdate.call(this,t);var n=this;try{if(null!=t.data.app){var a=t.data.app.template;null!=a&&a!=n.current_template?$.when($.ajax({url:a+".tmpl",cache:!1,dataType:"text"})).done(function(e){e+='<div class="clearBoth"></div>';try{NanoTemplate.addTemplate("app",e),NanoTemplate.resetTemplate("app"),$("#uiApp").html(NanoTemplate.parse("app",t)),n.current_template=a,n.onAfterUpdate(t)}catch(e){return void reportError("ERROR: An error occurred while loading the PDA App UI: "+e.message)}}).fail(function(){reportError("ERROR: Loading template app("+a+") failed!")}):NanoTemplate.templateExists("app")&&$("#uiApp").html(NanoTemplate.parse("app",t))}}catch(e){return void reportError("ERROR: An error occurred while rendering the PDA App UI: "+e.message)}},NanoStateClass.prototype.key=null,NanoStateClass.prototype.layoutRendered=!1,NanoStateClass.prototype.contentRendered=!1,NanoStateClass.prototype.mapInitialised=!1,NanoStateClass.prototype.isCurrent=function(){return NanoStateManager.getCurrentState()==this},NanoStateClass.prototype.onAdd=function(e){NanoBaseCallbacks.addCallbacks(),NanoBaseHelpers.addHelpers()},NanoStateClass.prototype.onRemove=function(e){NanoBaseCallbacks.removeCallbacks(),NanoBaseHelpers.removeHelpers()},NanoStateClass.prototype.onBeforeUpdate=function(e){return e=NanoStateManager.executeBeforeUpdateCallbacks(e)},NanoStateClass.prototype.onUpdate=function(e){try{(!this.layoutRendered||e.config.hasOwnProperty("autoUpdateLayout")&&e.config.autoUpdateLayout)&&($("#uiLayout").html(NanoTemplate.parse("layout",e)),this.layoutRendered=!0),(!this.contentRendered||e.config.hasOwnProperty("autoUpdateContent")&&e.config.autoUpdateContent)&&($("#uiContent").html(NanoTemplate.parse("main",e)),this.contentRendered=!0),NanoTemplate.templateExists("mapContent")&&(this.mapInitialised||($("#uiMap").draggable(),$("#uiMapTooltip").off("click").on("click",function(e){e.preventDefault(),$(this).fadeOut(400)}),this.mapInitialised=!0),$("#uiMapContent").html(NanoTemplate.parse("mapContent",e)),e.config.hasOwnProperty("showMap")&&e.config.showMap?($("#uiContent").addClass("hidden"),$("#uiMapWrapper").removeClass("hidden")):($("#uiMapWrapper").addClass("hidden"),$("#uiContent").removeClass("hidden"))),NanoTemplate.templateExists("mapHeader")&&$("#uiMapHeader").html(NanoTemplate.parse("mapHeader",e)),NanoTemplate.templateExists("mapFooter")&&$("#uiMapFooter").html(NanoTemplate.parse("mapFooter",e))}catch(e){return void reportError("ERROR: An error occurred while rendering the UI: "+e.message)}},NanoStateClass.prototype.onAfterUpdate=function(e){NanoStateManager.executeAfterUpdateCallbacks(e)},NanoStateClass.prototype.alertText=function(e){alert(e)};var NanoTemplate=function(){var n={},a={},r={},o={},i=function(){if(Object.size(n)){for(var t in n)if(n.hasOwnProperty(t))return void $.when($.ajax({url:n[t],cache:!1,dataType:"text"})).done(function(e){e+='<div class="clearBoth"></div>';try{NanoTemplate.addTemplate(t,e)}catch(e){return void reportError("ERROR: An error occurred while loading the UI: "+e.message)}delete n[t],i()}).fail(function(){reportError("ERROR: Loading template "+t+"("+n[t]+") failed!")})}else $(document).trigger("templatesLoaded")};return{init:function(){null==(n=$("body").data("templateData"))&&reportError("Error: Template data did not load correctly."),i()},addTemplate:function(e,t){a[e]=t},templateExists:function(e){return a.hasOwnProperty(e)},resetTemplate:function(e){r[e]=null},parse:function(e,t){if(!r.hasOwnProperty(e)||!r[e]){if(!a.hasOwnProperty(e))return reportError('ERROR: Template "'+e+'" does not exist in _compiledTemplates!'),"<h2>Template error (does not exist)</h2>";!function(){for(var e in a)try{r[e]=doT.template(a[e],null,a)}catch(e){reportError(e.message)}}()}return"function"!=typeof r[e]?(reportError(r[e]),reportError('ERROR: Template "'+e+'" failed to compile!'),"<h2>Template error (failed to compile)</h2>"):r[e].call(this,t.data,t.config,o)},addHelper:function(e,t){jQuery.isFunction(t)?o[e]=t:reportError("NanoTemplate.addHelper failed to add "+e+" as it is not a function.")},addHelpers:function(e){for(var t in e)e.hasOwnProperty(t)&&NanoTemplate.addHelper(t,e[t])},removeHelper:function(e){helpers.hasOwnProperty(e)&&delete o[e]}}}();NanoTransition=function(){var s={},l={},t=0;NanoStateManager.addBeforeUpdateCallback("TransitionReset",function(e){return t=0,e});function i(e,t,n){var a,r=s[e];void 0===n&&(n=!1);var o=$("."+e);if(0==o.length)return t;if(o=o[0],r&&r.tagName==o.tagName&&r.tabIndex==o.tabIndex&&r.parent==o.parentNode.tagName&&r.children==o.children.length){if(a=l[e],n){var i={};for(k in a)i[k]=a[k];for(k in t)i[k]=t[k];t=i}}else a=t,s[e]={tagName:o.tagName,tabIndex:o.tabIndex,parent:o.parentNode.tagName,children:o.children.length};return l[e]=t,a}function d(e,t){var n=$("."+e);return t?$(n).children(t):$(n)}function o(e,t,n,a,r){var o=d(e,t);void 0===r&&(r=1900),o.css(n).animate(a,{duration:r,queue:!1});var i=n["..class"],s=a["..class"];if(i&&s&&(o.addClass(i),i!=s)){i=i.split(" "),s=s.split(" ");var l=i.filter(function(e){return-1==s.indexOf(e)}),c=s.filter(function(e){return-1==i.indexOf(e)});i=l.join(" "),s=c.join(" "),o.switchClass(i,s,{duration:r,queue:!1})}}return{allocID:function(e){return"_Hide_Map_close"==e?"transition__map":(void 0===e&&(e=""),"transition__"+t+++"_"+e.toString())},updateElement:i,animateElement:o,animateTextValue:function(e,t,n,a,r,o){var i=d(e,t);void 0===o&&(o=1900),-1==n?i.text(a.toString()):i.text(a.toFixed(n)),a!=r&&i.animate({i:1},{duration:o,queue:!1,step:function(e,t){t.elem.textContent=-1==n?(a*(1-e)+r*e).toString():(a*(1-e)+r*e).toFixed(n)}})},animateHover:function(e,t,n,a,r){var o=d(e,t);void 0===r&&(r=200),n["..hover"]&&o.addClass("hover"),o.hover(function(){o.stop(1,1).addClass("hover",{duration:r,queue:!1}),i(e,{"..hover":!0},!0)},function(){o.stop(1,1).removeClass("hover",{duration:r,queue:!1}),i(e,{"..hover":!1},!0)})},transitionElement:function(e,t,n,a){var r=i(e,n);return o(e,t,r,n,a),r}}}();var NanoWindow=function(){function u(e,t){NanoUtility.winset("pos",e+","+t)}function p(e,t){NanoUtility.winset("size",e+","+t)}function e(){var e=window.screenLeft,t=window.screenTop;u(0,0),f=window.screenLeft,h=window.screenTop;var n=e-f,a=t-h;u(n=n<f?0:n,a=a<h?0:a);var r=$(window).height(),o=$(window).width();$("body").height()>=$(window).height()-29&&(o+=17),$(document).width()>$(window).width()&&(r+=17);var i=Math.max(280,o),s=Math.max(140,r);p(i,s)}var f,h,a,m,v,y,g,t=function(){NanoUtility.winset("titlebar",0),NanoUtility.winset("can-resize",0),NanoUtility.winset("transparent-color","#FF00E4"),$(".fancy").show(),$("#uiTitleFluff").css("right","72px"),$(".statusicon").css("left","34px"),$("#uiTitleText").css("left","66px")},n=function(){$(".close").on("click",function(e){NanoUtility.close()}),$(".minimize").on("click",function(e){NanoUtility.winset("is-minimized","true")})},r=function(){$("body").on("mousemove","#uiTitleWrapper",function(e){o(e)}),$("body").on("mousedown","#uiTitleWrapper",function(){a=!0,$(this)[0].setCapture&&$(this)[0].setCapture()}),$("body").on("mouseup","#uiTitleWrapper",function(){a=!1,$(this)[0].releaseCapture&&$(this)[0].releaseCapture()}),$("body").on("mousemove","div.resizeArea",function(e){i.call(this,e)}),$("body").on("mousedown","div.resizeArea",function(){y=!0,this.setCapture&&this.setCapture()}),$("body").on("mouseup","div.resizeArea",function(){y=!1,this.releaseCapture&&this.releaseCapture()})},o=function(e){if(e=e||window.event,m!==e.screenX||v!==e.screenY){if(void 0===m&&(m=e.screenX,v=e.clientY),a){var t=e.screenX-m,n=e.screenY-v;t+=window.screenLeft-f,n+=window.screenTop-h,u(t,n)}m=e.screenX,v=e.screenY}},i=function(e){if(!g){if(g=!0,e=e||window.event,void 0===m&&(m=e.screenX-f,v=e.screenY-h),y){var t=$(window).width(),n=$(window).height();$("body").height()>=$(window).height()-29&&(t+=17),$(document).width()>$(window).width()&&(n+=17);var a=Number($(this).attr("rx")),r=Number($(this).attr("ry")),o=e.screenX-f-m,i=e.screenY-h-v,s=window.screenLeft-f,l=window.screenTop-h,c=t+o*a;-1==a&&(s+=o);var d=n+i*r;-1==r&&(l+=i),c=Math.max(280,c),d=Math.max(140,d),u(s,l),p(c,d)}m=e.screenX-f,v=e.screenY-h,g=!1}};return{init:function(){$(document).on("templatesLoaded",function(){e(),NanoStateManager.getData().config.user.fancy&&(t(),e(),n(),r())})}}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5hbm8uanMiXSwibmFtZXMiOlsiTmFub1V0aWxpdHkiLCJfdXJsUGFyYW1ldGVycyIsImluaXQiLCJib2R5IiwiJCIsImRhdGEiLCJnZW5lcmF0ZUhyZWYiLCJwYXJhbWV0ZXJzIiwicXVlcnlTdHJpbmciLCJrZXkiLCJoYXNPd25Qcm9wZXJ0eSIsIndpbnNldCIsInZhbHVlIiwid2luZG93Iiwib2JqIiwicGFyYW1zIiwiTmFub1N0YXRlTWFuYWdlciIsImdldERhdGEiLCJjb25maWciLCJyZWYiLCJsb2NhdGlvbiIsImhyZWYiLCJleHRlbmQiLCJmaXJzdCIsInNlY29uZCIsIk9iamVjdCIsImtleXMiLCJmb3JFYWNoIiwic2Vjb25kVmFsIiwicHJvdG90eXBlIiwidG9TdHJpbmciLCJjYWxsIiwidXJsIiwiVXJsIiwicXVlcnkiLCJjbG9zZSIsImNvbW1hbmQiLCJzcmMiLCJ0aGlzIiwialF1ZXJ5IiwicmVwb3J0RXJyb3IiLCJkb1QiLCJzdHIiLCJlbmNvZGVVUklDb21wb25lbnQiLCJhbGVydCIsImRvY3VtZW50IiwicmVhZHkiLCJOYW5vVGVtcGxhdGUiLCJOYW5vV2luZG93IiwiQXJyYXkiLCJpbmRleE9mIiwiZWx0IiwibGVuIiwibGVuZ3RoIiwiZnJvbSIsIk51bWJlciIsImFyZ3VtZW50cyIsIk1hdGgiLCJjZWlsIiwiZmxvb3IiLCJTdHJpbmciLCJmb3JtYXQiLCJhcmdzIiwicmVwbGFjZSIsInJlZ2V4IiwiaXRlbSIsImludFZhbCIsInBhcnNlSW50Iiwic3Vic3RyaW5nIiwiUmVnRXhwIiwic2l6ZSIsImNvbnNvbGUiLCJsb2ciLCJ0b1RpdGxlQ2FzZSIsInNtYWxsV29yZHMiLCJtYXRjaCIsInAxIiwiaW5kZXgiLCJ0aXRsZSIsInNlYXJjaCIsImNoYXJBdCIsInRvTG93ZXJDYXNlIiwic3Vic3RyIiwidG9VcHBlckNhc2UiLCJhamF4U2V0dXAiLCJjYWNoZSIsIkZ1bmN0aW9uIiwiaW5oZXJpdHNGcm9tIiwicGFyZW50Q2xhc3NPck9iamVjdCIsImNvbnN0cnVjdG9yIiwicGFyZW50IiwidHJpbSIsImNrZXkiLCJleGVjdXRlQ2FsbGJhY2tzIiwiY2FsbGJhY2tzIiwiaXNGdW5jdGlvbiIsIl9pc0luaXRpYWxpc2VkIiwiX2RhdGEiLCJfYmVmb3JlVXBkYXRlQ2FsbGJhY2tzIiwiX2FmdGVyVXBkYXRlQ2FsbGJhY2tzIiwiX3N0YXRlcyIsIl9jdXJyZW50U3RhdGUiLCJkb1VwZGF0ZSIsIm9uQmVmb3JlVXBkYXRlIiwib25VcGRhdGUiLCJvbkFmdGVyVXBkYXRlIiwiSlNPTiIsInN0cmluZ2lmeSIsInN0YXRlS2V5Iiwic2V0Q3VycmVudFN0YXRlIiwib24iLCJyZWNlaXZlVXBkYXRlRGF0YSIsImpzb25TdHJpbmciLCJ1cGRhdGVEYXRhIiwicGFyc2VKU09OIiwiZXJyb3IiLCJuYW1lIiwibWVzc2FnZSIsImFkZEJlZm9yZVVwZGF0ZUNhbGxiYWNrIiwiY2FsbGJhY2tGdW5jdGlvbiIsImFkZEJlZm9yZVVwZGF0ZUNhbGxiYWNrcyIsImNhbGxiYWNrS2V5IiwicmVtb3ZlQmVmb3JlVXBkYXRlQ2FsbGJhY2siLCJleGVjdXRlQmVmb3JlVXBkYXRlQ2FsbGJhY2tzIiwiYWRkQWZ0ZXJVcGRhdGVDYWxsYmFjayIsImFkZEFmdGVyVXBkYXRlQ2FsbGJhY2tzIiwicmVtb3ZlQWZ0ZXJVcGRhdGVDYWxsYmFjayIsImV4ZWN1dGVBZnRlclVwZGF0ZUNhbGxiYWNrcyIsImFkZFN0YXRlIiwic3RhdGUiLCJOYW5vU3RhdGVDbGFzcyIsInByZXZpb3VzU3RhdGUiLCJvblJlbW92ZSIsIm9uQWRkIiwiZ2V0Q3VycmVudFN0YXRlIiwiTmFub0Jhc2VDYWxsYmFja3MiLCJfY2FuQ2xpY2siLCJfYmFzZUJlZm9yZVVwZGF0ZUNhbGxiYWNrcyIsIl9iYXNlQWZ0ZXJVcGRhdGVDYWxsYmFja3MiLCJzdGF0dXMiLCJ1aVN0YXR1c0NsYXNzIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsInN0b3BUaW1lIiwib2ZmIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsIm9uZVRpbWUiLCJuYW5vbWFwIiwiaHRtbCIsImNoaWxkcmVuIiwic2hvdyIsImZhZGVPdXQiLCJ6b29tTGV2ZWwiLCJ1aU1hcE9iamVjdCIsInVpTWFwV2lkdGgiLCJ3aWR0aCIsInVpTWFwSGVpZ2h0IiwiaGVpZ2h0IiwiY3NzIiwiem9vbSIsImxlZnQiLCJ0b3AiLCJtYXJnaW5MZWZ0IiwibWFyZ2luVG9wIiwiYXR0ciIsImFkZENhbGxiYWNrcyIsInJlbW92ZUNhbGxiYWNrcyIsIk5hbm9CYXNlSGVscGVycyIsIl9iYXNlSGVscGVycyIsInN5bmRpY2F0ZU1vZGUiLCJjb21iaW5lIiwiYXJyMSIsImFycjIiLCJjb25jYXQiLCJkdW1wIiwibGluayIsInRleHQiLCJpY29uIiwiZWxlbWVudENsYXNzIiwiZWxlbWVudElkIiwiaWNvbkh0bWwiLCJpY29uQ2xhc3MiLCJlbGVtZW50SWRIdG1sIiwidGlkIiwiTmFub1RyYW5zaXRpb24iLCJhbGxvY0lEIiwieG9yIiwibnVtYmVyIiwiYml0IiwicHJlY2lzaW9uUm91bmQiLCJwbGFjZXMiLCJyb3VuZCIsIm11bHRpcGxpZXIiLCJwb3ciLCJmaXhlZCIsInN0cmluZyIsInN0cmluZ0FyZ3MiLCJpIiwicHVzaCIsImZvcm1hdE51bWJlciIsIngiLCJwYXJ0cyIsInNwbGl0Iiwiam9pbiIsImNhcGl0YWxpemVGaXJzdExldHRlciIsInNsaWNlIiwiZGlzcGxheUJhciIsInJhbmdlTWluIiwicmFuZ2VNYXgiLCJzdHlsZUNsYXNzIiwic2hvd1RleHQiLCJwZXJjZW50YWdlIiwiZGFuZ2VyVG9DbGFzcyIsImxldmVsIiwiZGFuZ2VyVG9TcGFuIiwiZGlzcGxheUROQUJsb2NrcyIsImRuYVN0cmluZyIsInNlbGVjdGVkQmxvY2siLCJzZWxlY3RlZFN1YmJsb2NrIiwiYmxvY2tTaXplIiwicGFyYW1LZXkiLCJjaGFyYWN0ZXJzIiwiYmxvY2siLCJzdWJibG9jayIsInNlbGVjdFVJQmxvY2siLCJzZWxlY3RVSVN1YmJsb2NrIiwic2VsZWN0U0VCbG9jayIsInNlbGVjdFNFU3ViYmxvY2siLCJjTWlycm9yIiwidGV4dGJveCIsIkNvZGVNaXJyb3IiLCJmcm9tVGV4dEFyZWEiLCJnZXRFbGVtZW50QnlJZCIsImxpbmVOdW1iZXJzIiwiaW5kZW50VW5pdCIsImluZGVudFdpdGhUYWJzIiwidGhlbWUiLCJzbW9vdGhOdW1iZXIiLCJzbW9vdGhSb3VuZCIsInVuZGVmaW5lZCIsInBsYWNlZCIsInRvRml4ZWQiLCJhZGRIZWxwZXJzIiwicmVtb3ZlSGVscGVycyIsImhlbHBlcktleSIsInJlbW92ZUhlbHBlciIsIk5hbm9TdGF0ZURlZmF1bHRDbGFzcyIsIk5hbm9TdGF0ZURlZmF1bHQiLCJOYW5vU3RhdGVQREFDbGFzcyIsIk5hbm9TdGF0ZVBEQSIsImN1cnJlbnRfdGVtcGxhdGUiLCJ0ZW1wbGF0ZSIsIndoZW4iLCJhamF4IiwiZGF0YVR5cGUiLCJkb25lIiwidGVtcGxhdGVNYXJrdXAiLCJhZGRUZW1wbGF0ZSIsInJlc2V0VGVtcGxhdGUiLCJwYXJzZSIsImZhaWwiLCJ0ZW1wbGF0ZUV4aXN0cyIsImxheW91dFJlbmRlcmVkIiwiY29udGVudFJlbmRlcmVkIiwibWFwSW5pdGlhbGlzZWQiLCJpc0N1cnJlbnQiLCJuZXh0U3RhdGUiLCJkcmFnZ2FibGUiLCJhbGVydFRleHQiLCJfdGVtcGxhdGVEYXRhIiwiX3RlbXBsYXRlcyIsIl9jb21waWxlZFRlbXBsYXRlcyIsIl9oZWxwZXJzIiwibG9hZE5leHRUZW1wbGF0ZSIsInRyaWdnZXIiLCJ0ZW1wbGF0ZVN0cmluZyIsInRlbXBsYXRlS2V5IiwiY29tcGlsZVRlbXBsYXRlcyIsImFkZEhlbHBlciIsImhlbHBlck5hbWUiLCJoZWxwZXJGdW5jdGlvbiIsImhlbHBlcnMiLCJpZENhY2hlIiwic3RhdGVDYWNoZSIsImN1cnJlbnRJRCIsIl91cGRhdGVFbGVtZW50IiwiaWQiLCJuZXdTdGF0ZSIsIm1lcmdlIiwib2xkU3RhdGUiLCJlbGVtZW50IiwidGFnTmFtZSIsInRhYkluZGV4IiwicGFyZW50Tm9kZSIsIm5ld1N0YXRlQ29weSIsImsiLCJfcmVzb2x2ZVRhcmdldCIsImZpbHRlciIsIl9hbmltYXRlRWxlbWVudCIsInRpbWUiLCJ0YXJnZXQiLCJhbmltYXRlIiwiZHVyYXRpb24iLCJxdWV1ZSIsIm9sZENsYXNzIiwibmV3Q2xhc3MiLCJmaWx0ZXJlZE9sZENsYXNzIiwiZmlsdGVyZWROZXdDbGFzcyIsInN3aXRjaENsYXNzIiwidW5pcXVlSUQiLCJ1cGRhdGVFbGVtZW50IiwiYW5pbWF0ZUVsZW1lbnQiLCJhbmltYXRlVGV4dFZhbHVlIiwib2xkVmFsdWUiLCJuZXdWYWx1ZSIsInN0ZXAiLCJub3ciLCJmeCIsImVsZW0iLCJ0ZXh0Q29udGVudCIsImFuaW1hdGVIb3ZlciIsImhvdmVyIiwic3RvcCIsIi4uaG92ZXIiLCJ0cmFuc2l0aW9uRWxlbWVudCIsIm9sZCIsInNldFBvcyIsInkiLCJzZXRTaXplIiwidyIsImgiLCJvYmV5TGltaXRzIiwicHJldlgiLCJzY3JlZW5MZWZ0IiwicHJldlkiLCJzY3JlZW5Ub3AiLCJvZmZzZXRYIiwib2Zmc2V0WSIsImNsYW1wZWRYIiwiY2xhbXBlZFkiLCJuZXdXaWR0aCIsIm1heCIsIm5ld0hlaWdodCIsImRyYWdnaW5nIiwibGFzdFgiLCJsYXN0WSIsInJlc2l6aW5nIiwicmVzaXplV29ya2luZyIsImZhbmN5Q2hyb21lIiwiYXR0YWNoQnV0dG9ucyIsImF0dGFjaERyYWdBbmRSZXNpemUiLCJldiIsImRyYWciLCJzZXRDYXB0dXJlIiwicmVsZWFzZUNhcHR1cmUiLCJyZXNpemUiLCJzY3JlZW5YIiwic2NyZWVuWSIsImNsaWVudFkiLCJkeCIsImR5IiwicngiLCJyeSIsIm5ld1giLCJuZXdZIiwibmV3VyIsIm5ld0giLCJ1c2VyIiwiZmFuY3kiXSwibWFwcGluZ3MiOiJBQUNBLElBQUlBLFlBQWMsV0FDZCxJQUFJQyxFQUFpQixHQUVyQixNQUFPLENBQ0hDLEtBQU0sV0FDRixJQUFJQyxFQUFPQyxFQUFFLFFBQ2JILEVBQWlCRSxFQUFLRSxLQUFLLGtCQUcvQkMsYUFBYyxT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QUMzQnhDLEVBQU9xQyxFQUFNQyxHQUNicEMsRUFBUXFDLEVBQU1DLEdBR2xCdEIsRUFBUU8sRUFBR0ssUUFBVXBCLEVBQ3JCUyxFQUFRTSxFQUFHTSxRQUFVcEIsRUFFckJVLEdBQWdCLElBSXBCLE1BQU8sQ0FDSDFWLEtBQU0sV0FDRkUsRUFBRXlDLFVBQVVpRSxHQUFHLGtCQUFtQixXQTdKdEM4TixJQUVJNVQsaUJBQWlCQyxVQUFVQyxPQUFPOFYsS0FBS0MsUUFJM0NwQixJQUdBakIsSUFFQWtCLElBQ0FDLFNBOURTIiwiZmlsZSI6Im5hbm8uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBOYW5vVXRpbGl0eSBpcyB0aGUgcGxhY2UgdG8gc3RvcmUgdXRpbGl0eSBmdW5jdGlvbnNcclxudmFyIE5hbm9VdGlsaXR5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIF91cmxQYXJhbWV0ZXJzID0ge307IC8vIFRoaXMgaXMgcG9wdWxhdGVkIHdpdGggdGhlIGJhc2UgdXJsIHBhcmFtZXRlcnMgKHVzZWQgYnkgYWxsIGxpbmtzKSwgd2hpY2ggaXMgcHJvYmFieSBqdXN0IHRoZSBcInNyY1wiIHBhcmFtZXRlclxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaW5pdDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgYm9keSA9ICQoJ2JvZHknKTsgLy8gV2Ugc3RvcmUgZGF0YSBpbiB0aGUgYm9keSB0YWcsIGl0J3MgYXMgZ29vZCBhIHBsYWNlIGFzIGFueVxyXG4gICAgICAgICAgICBfdXJsUGFyYW1ldGVycyA9IGJvZHkuZGF0YSgndXJsUGFyYW1ldGVycycpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgLy8gZ2VuZXJhdGUgYSBCeW9uZCBocmVmLCBjb21iaW5lcyBfdXJsUGFyYW1ldGVycyB3aXRoIHBhcmFtZXRlcnNcclxuICAgICAgICBnZW5lcmF0ZUhyZWY6IGZ1bmN0aW9uIChwYXJhbWV0ZXJzKSB7XHJcbiAgICAgICAgICAgIHZhciBxdWVyeVN0cmluZyA9ICc/JztcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBfdXJsUGFyYW1ldGVycykge1xyXG4gICAgICAgICAgICAgICAgaWYgKF91cmxQYXJhbWV0ZXJzLmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocXVlcnlTdHJpbmcgIT09ICc/Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBxdWVyeVN0cmluZyArPSAnOyc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5U3RyaW5nICs9IGtleSArICc9JyArIF91cmxQYXJhbWV0ZXJzW2tleV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBwYXJhbWV0ZXJzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAocGFyYW1ldGVycy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHF1ZXJ5U3RyaW5nICE9PSAnPycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlTdHJpbmcgKz0gJzsnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBxdWVyeVN0cmluZyArPSBrZXkgKyAnPScgKyBwYXJhbWV0ZXJzW2tleV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHF1ZXJ5U3RyaW5nO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgd2luc2V0OiBmdW5jdGlvbiAoa2V5LCB2YWx1ZSwgd2luZG93KSB7XHJcbiAgICAgICAgICAgIHZhciBvYmosIHBhcmFtcywgd2luc2V0UmVmO1xyXG4gICAgICAgICAgICBpZiAod2luZG93ID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdyA9IE5hbm9TdGF0ZU1hbmFnZXIuZ2V0RGF0YSgpLmNvbmZpZy53aW5kb3cucmVmO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHBhcmFtcyA9IChcclxuICAgICAgICAgICAgICAgIG9iaiA9IHt9LFxyXG4gICAgICAgICAgICAgICAgb2JqW3dpbmRvdyArIFwiLlwiICsga2V5XSA9IHZhbHVlLFxyXG4gICAgICAgICAgICAgICAgb2JqXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHJldHVybiBsb2NhdGlvbi5ocmVmID0gTmFub1V0aWxpdHkuaHJlZihcIndpbnNldFwiLCBwYXJhbXMpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZXh0ZW5kOiBmdW5jdGlvbihmaXJzdCwgc2Vjb25kKSB7XHJcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHNlY29uZCkuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBzZWNvbmRWYWw7XHJcbiAgICAgICAgICAgICAgICBzZWNvbmRWYWwgPSBzZWNvbmRba2V5XTtcclxuICAgICAgICAgICAgICAgIGlmIChzZWNvbmRWYWwgJiYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHNlY29uZFZhbCkgPT09IFwiW29iamVjdCBPYmplY3RdXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBmaXJzdFtrZXldID0gZmlyc3Rba2V5XSB8fCB7fTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gTmFub1V0aWxpdHkuZXh0ZW5kKGZpcnN0W2tleV0sIHNlY29uZFZhbCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmaXJzdFtrZXldID0gc2Vjb25kVmFsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIGZpcnN0O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaHJlZjogZnVuY3Rpb24odXJsLCBwYXJhbXMpIHtcclxuICAgICAgICAgICAgaWYgKHVybCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB1cmwgPSBcIlwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChwYXJhbXMgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgcGFyYW1zID0ge307XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdXJsID0gbmV3IFVybChcImJ5b25kOi8vXCIgKyB1cmwpO1xyXG4gICAgICAgICAgICBOYW5vVXRpbGl0eS5leHRlbmQodXJsLnF1ZXJ5LCBwYXJhbXMpO1xyXG4gICAgICAgICAgICByZXR1cm4gdXJsO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY2xvc2U6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgcGFyYW1zO1xyXG4gICAgICAgICAgICBwYXJhbXMgPSB7XHJcbiAgICAgICAgICAgICAgICBjb21tYW5kOiBcIm5hbm9jbG9zZSBcIiArIF91cmxQYXJhbWV0ZXJzLnNyY1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLndpbnNldChcImlzLXZpc2libGVcIiwgXCJmYWxzZVwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIGxvY2F0aW9uLmhyZWYgPSBOYW5vVXRpbGl0eS5ocmVmKFwid2luc2V0XCIsIHBhcmFtcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59ICgpO1xyXG5cclxuaWYgKHR5cGVvZiBqUXVlcnkgPT0gJ3VuZGVmaW5lZCcpIHsgIFxyXG4gICAgcmVwb3J0RXJyb3IoJ0VSUk9SOiBKYXZhc2NyaXB0IGxpYnJhcnkgZmFpbGVkIHRvIGxvYWQhJyk7XHJcbn1cclxuaWYgKHR5cGVvZiBkb1QgPT0gJ3VuZGVmaW5lZCcpIHsgIFxyXG4gICAgcmVwb3J0RXJyb3IoJ0VSUk9SOiBUZW1wbGF0ZSBlbmdpbmUgZmFpbGVkIHRvIGxvYWQhJyk7XHJcbn1cclxuXHJcbnZhciByZXBvcnRFcnJvciA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIHdpbmRvdy5sb2NhdGlvbiA9IFwiYnlvbmQ6Ly8/bmFub19lcnI9XCIgKyBlbmNvZGVVUklDb21wb25lbnQoc3RyKTtcclxuICAgIGFsZXJ0KHN0cik7XHJcbn1cclxuXHJcbi8vIEFsbCBzY3JpcHRzIGFyZSBpbml0aWFsaXNlZCBoZXJlLCB0aGlzIGFsbG93cyBjb250cm9sIG9mIGluaXQgb3JkZXJcclxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xyXG4gICAgTmFub1V0aWxpdHkuaW5pdCgpO1xyXG4gICAgTmFub1N0YXRlTWFuYWdlci5pbml0KCk7XHJcbiAgICBOYW5vVGVtcGxhdGUuaW5pdCgpO1xyXG4gICAgTmFub1dpbmRvdy5pbml0KCk7XHJcbn0pO1xyXG5cclxuaWYgKCFBcnJheS5wcm90b3R5cGUuaW5kZXhPZilcclxue1xyXG4gICAgQXJyYXkucHJvdG90eXBlLmluZGV4T2YgPSBmdW5jdGlvbihlbHQgLyosIGZyb20qLylcclxuICAgIHtcclxuICAgICAgICB2YXIgbGVuID0gdGhpcy5sZW5ndGg7XHJcblxyXG4gICAgICAgIHZhciBmcm9tID0gTnVtYmVyKGFyZ3VtZW50c1sxXSkgfHwgMDtcclxuICAgICAgICBmcm9tID0gKGZyb20gPCAwKVxyXG4gICAgICAgICAgICA/IE1hdGguY2VpbChmcm9tKVxyXG4gICAgICAgICAgICA6IE1hdGguZmxvb3IoZnJvbSk7XHJcbiAgICAgICAgaWYgKGZyb20gPCAwKVxyXG4gICAgICAgICAgICBmcm9tICs9IGxlbjtcclxuXHJcbiAgICAgICAgZm9yICg7IGZyb20gPCBsZW47IGZyb20rKylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChmcm9tIGluIHRoaXMgJiZcclxuICAgICAgICAgICAgICAgIHRoaXNbZnJvbV0gPT09IGVsdClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmcm9tO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gLTE7XHJcbiAgICB9O1xyXG59O1xyXG5cclxuaWYgKCFTdHJpbmcucHJvdG90eXBlLmZvcm1hdClcclxue1xyXG4gICAgU3RyaW5nLnByb3RvdHlwZS5mb3JtYXQgPSBmdW5jdGlvbiAoYXJncykge1xyXG4gICAgICAgIHZhciBzdHIgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBzdHIucmVwbGFjZShTdHJpbmcucHJvdG90eXBlLmZvcm1hdC5yZWdleCwgZnVuY3Rpb24oaXRlbSkge1xyXG4gICAgICAgICAgICB2YXIgaW50VmFsID0gcGFyc2VJbnQoaXRlbS5zdWJzdHJpbmcoMSwgaXRlbS5sZW5ndGggLSAxKSk7XHJcbiAgICAgICAgICAgIHZhciByZXBsYWNlO1xyXG4gICAgICAgICAgICBpZiAoaW50VmFsID49IDApIHtcclxuICAgICAgICAgICAgICAgIHJlcGxhY2UgPSBhcmdzW2ludFZhbF07XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaW50VmFsID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgcmVwbGFjZSA9IFwie1wiO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGludFZhbCA9PT0gLTIpIHtcclxuICAgICAgICAgICAgICAgIHJlcGxhY2UgPSBcIn1cIjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJlcGxhY2UgPSBcIlwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXBsYWNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFN0cmluZy5wcm90b3R5cGUuZm9ybWF0LnJlZ2V4ID0gbmV3IFJlZ0V4cChcInstP1swLTldK31cIiwgXCJnXCIpO1xyXG59O1xyXG5cclxuT2JqZWN0LnNpemUgPSBmdW5jdGlvbihvYmopIHtcclxuICAgIHZhciBzaXplID0gMCwga2V5O1xyXG4gICAgZm9yICh2YXIga2V5IGluIG9iaikge1xyXG4gICAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkoa2V5KSkgc2l6ZSsrO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHNpemU7XHJcbn07XHJcblxyXG5pZighd2luZG93LmNvbnNvbGUpIHtcclxuICAgIHdpbmRvdy5jb25zb2xlID0ge1xyXG4gICAgICAgIGxvZyA6IGZ1bmN0aW9uKHN0cikge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufTtcclxuXHJcblN0cmluZy5wcm90b3R5cGUudG9UaXRsZUNhc2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc21hbGxXb3JkcyA9IC9eKGF8YW58YW5kfGFzfGF0fGJ1dHxieXxlbnxmb3J8aWZ8aW58b2Z8b258b3J8dGhlfHRvfHZzP1xcLj98dmlhKSQvaTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5yZXBsYWNlKC8oW15cXFdfXStbXlxccy1dKikgKi9nLCBmdW5jdGlvbiAobWF0Y2gsIHAxLCBpbmRleCwgdGl0bGUpIHtcclxuICAgICAgICBpZiAoaW5kZXggPiAwICYmIGluZGV4ICsgcDEubGVuZ3RoICE9PSB0aXRsZS5sZW5ndGggJiZcclxuICAgICAgICAgICAgcDEuc2VhcmNoKHNtYWxsV29yZHMpID4gLTEgJiYgdGl0bGUuY2hhckF0KGluZGV4IC0gMikgIT09IFwiOlwiICYmXHJcbiAgICAgICAgICAgIHRpdGxlLmNoYXJBdChpbmRleCAtIDEpLnNlYXJjaCgvW15cXHMtXS8pIDwgMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbWF0Y2gudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChwMS5zdWJzdHIoMSkuc2VhcmNoKC9bQS1aXXxcXC4uLykgPiAtMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbWF0Y2g7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbWF0Y2guY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBtYXRjaC5zdWJzdHIoMSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbiQuYWpheFNldHVwKHtcclxuICAgIGNhY2hlOiBmYWxzZVxyXG59KTtcclxuXHJcbkZ1bmN0aW9uLnByb3RvdHlwZS5pbmhlcml0c0Zyb20gPSBmdW5jdGlvbiAocGFyZW50Q2xhc3NPck9iamVjdCkge1xyXG4gICAgdGhpcy5wcm90b3R5cGUgPSBuZXcgcGFyZW50Q2xhc3NPck9iamVjdDtcclxuICAgIHRoaXMucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gdGhpcztcclxuICAgIHRoaXMucHJvdG90eXBlLnBhcmVudCA9IHBhcmVudENsYXNzT3JPYmplY3QucHJvdG90eXBlO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbn07XHJcblxyXG5pZiAoIVN0cmluZy5wcm90b3R5cGUudHJpbSkge1xyXG4gICAgU3RyaW5nLnByb3RvdHlwZS50cmltID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlcGxhY2UoL15cXHMrfFxccyskL2csICcnKTtcclxuICAgIH07XHJcbn1cclxuXHJcbi8vIFJlcGxpY2F0ZSB0aGUgY2tleSBwcm9jIGZyb20gQllPTkRcclxuaWYgKCFTdHJpbmcucHJvdG90eXBlLmNrZXkpIHtcclxuICAgIFN0cmluZy5wcm90b3R5cGUuY2tleSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZXBsYWNlKC9cXFcvZywgJycpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICB9O1xyXG59XG4vLyBOYW5vU3RhdGVNYW5hZ2VyIGhhbmRsZXMgZGF0YSBmcm9tIHRoZSBzZXJ2ZXIgYW5kIHVzZXMgaXQgdG8gcmVuZGVyIHRlbXBsYXRlc1xyXG5OYW5vU3RhdGVNYW5hZ2VyID0gZnVuY3Rpb24gKCkgXHJcbntcclxuICAgIC8vIF9pc0luaXRpYWxpc2VkIGlzIHNldCB0byB0cnVlIHdoZW4gYWxsIG9mIHRoaXMgdWkncyB0ZW1wbGF0ZXMgaGF2ZSBiZWVuIHByb2Nlc3NlZC9yZW5kZXJlZFxyXG4gICAgdmFyIF9pc0luaXRpYWxpc2VkID0gZmFsc2U7XHJcbiAgICAvLyB0aGUgZGF0YSBmb3IgdGhpcyB1aVxyXG4gICAgdmFyIF9kYXRhID0gbnVsbDtcclxuXHJcbiAgICAvLyB0aGlzIGlzIGFuIGFycmF5IG9mIGNhbGxiYWNrcyB3aGljaCBhcmUgY2FsbGVkIHdoZW4gbmV3IGRhdGEgYXJyaXZlcywgYmVmb3JlIGl0IGlzIHByb2Nlc3NlZFxyXG4gICAgdmFyIF9iZWZvcmVVcGRhdGVDYWxsYmFja3MgPSB7fTtcclxuICAgIC8vIHRoaXMgaXMgYW4gYXJyYXkgb2YgY2FsbGJhY2tzIHdoaWNoIGFyZSBjYWxsZWQgd2hlbiBuZXcgZGF0YSBhcnJpdmVzLCBiZWZvcmUgaXQgaXMgcHJvY2Vzc2VkXHJcbiAgICB2YXIgX2FmdGVyVXBkYXRlQ2FsbGJhY2tzID0ge307XHJcbiAgICBcclxuICAgIC8vIHRoaXMgaXMgYW4gYXJyYXkgb2Ygc3RhdGUgb2JqZWN0cywgdGhlc2UgY2FuIGJlIHVzZWQgdG8gcHJvdmlkZSBjdXN0b20gamF2YXNjcmlwdCBsb2dpY1xyXG4gICAgdmFyIF9zdGF0ZXMgPSB7fTtcclxuICAgIHZhciBfY3VycmVudFN0YXRlID0gbnVsbDtcclxuICAgIFxyXG4gICAgLy8gdGhlIGluaXQgZnVuY3Rpb24gaXMgY2FsbGVkIHdoZW4gdGhlIHVpIGhhcyBsb2FkZWRcclxuICAgIC8vIHRoaXMgZnVuY3Rpb24gc2V0cyB1cCB0aGUgdGVtcGxhdGVzIGFuZCBiYXNlIGZ1bmN0aW9uYWxpdHlcclxuICAgIHZhciBpbml0ID0gZnVuY3Rpb24gKCkgXHJcbiAgICB7XHJcbiAgICAgICAgLy8gV2Ugc3RvcmUgaW5pdGlhbERhdGEgYW5kIHRlbXBsYXRlRGF0YSBpbiB0aGUgYm9keSB0YWcsIGl0J3MgYXMgZ29vZCBhIHBsYWNlIGFzIGFueVxyXG4gICAgICAgIF9kYXRhID0gJCgnYm9keScpLmRhdGEoJ2luaXRpYWxEYXRhJyk7ICBcclxuICAgICAgICBcclxuICAgICAgICBpZiAoX2RhdGEgPT0gbnVsbCB8fCAhX2RhdGEuaGFzT3duUHJvcGVydHkoJ2NvbmZpZycpIHx8ICFfZGF0YS5oYXNPd25Qcm9wZXJ0eSgnZGF0YScpKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmVwb3J0RXJyb3IoJ0Vycm9yOiBJbml0aWFsIGRhdGEgZGlkIG5vdCBsb2FkIGNvcnJlY3RseS4nICsgSlNPTi5zdHJpbmdpZnkoX2RhdGEpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBzdGF0ZUtleSA9ICdkZWZhdWx0JztcclxuICAgICAgICBpZiAoX2RhdGFbJ2NvbmZpZyddLmhhc093blByb3BlcnR5KCdzdGF0ZUtleScpICYmIF9kYXRhWydjb25maWcnXVsnc3RhdGVLZXknXSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHN0YXRlS2V5ID0gX2RhdGFbJ2NvbmZpZyddWydzdGF0ZUtleSddLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBOYW5vU3RhdGVNYW5hZ2VyLnNldEN1cnJlbnRTdGF0ZShzdGF0ZUtleSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ3RlbXBsYXRlc0xvYWRlZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZG9VcGRhdGUoX2RhdGEpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgX2lzSW5pdGlhbGlzZWQgPSB0cnVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgLy8gUmVjZWl2ZSB1cGRhdGUgZGF0YSBmcm9tIHRoZSBzZXJ2ZXJcclxuICAgIHZhciByZWNlaXZlVXBkYXRlRGF0YSA9IGZ1bmN0aW9uIChqc29uU3RyaW5nKVxyXG4gICAge1xyXG4gICAgICAgIHZhciB1cGRhdGVEYXRhO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIHJlcG9ydEVycm9yKFwicmVjaWV2ZVVwZGF0ZURhdGEgY2FsbGVkLlwiICsgXCI8YnI+VHlwZTogXCIgKyB0eXBlb2YganNvblN0cmluZyk7IC8vZGVidWcgaG9va1xyXG4gICAgICAgIHRyeVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgLy8gcGFyc2UgdGhlIEpTT04gc3RyaW5nIGZyb20gdGhlIHNlcnZlciBpbnRvIGEgSlNPTiBvYmplY3RcclxuICAgICAgICAgICAgdXBkYXRlRGF0YSA9IGpRdWVyeS5wYXJzZUpTT04oanNvblN0cmluZyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlcnJvcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJlcG9ydEVycm9yKFwicmVjaWV2ZVVwZGF0ZURhdGEgZmFpbGVkLiBcIiArIFwiPGJyPkVycm9yIG5hbWU6IFwiICsgZXJyb3IubmFtZSArIFwiPGJyPkVycm9yIE1lc3NhZ2U6IFwiICsgZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHJlcG9ydEVycm9yKFwicmVjaWV2ZVVwZGF0ZURhdGEgcGFzc2VkIHRyeWNhdGNoIGJsb2NrLlwiKTsgLy9kZWJ1ZyBob29rXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKCF1cGRhdGVEYXRhLmhhc093blByb3BlcnR5KCdkYXRhJykpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoX2RhdGEgJiYgX2RhdGEuaGFzT3duUHJvcGVydHkoJ2RhdGEnKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnZGF0YSddID0gX2RhdGFbJ2RhdGEnXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEnXSA9IHt9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChfaXNJbml0aWFsaXNlZCkgLy8gYWxsIHRlbXBsYXRlcyBoYXZlIGJlZW4gcmVnaXN0ZXJlZCwgc28gcmVuZGVyIHRoZW1cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGRvVXBkYXRlKHVwZGF0ZURhdGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfZGF0YSA9IHVwZGF0ZURhdGE7IC8vIGFsbCB0ZW1wbGF0ZXMgaGF2ZSBub3QgYmVlbiByZWdpc3RlcmVkLiBXZSBzZXQgX2RhdGEgZGlyZWN0bHkgaGVyZSB3aGljaCB3aWxsIGJlIGFwcGxpZWQgYWZ0ZXIgdGhlIHRlbXBsYXRlIGlzIGxvYWRlZCB3aXRoIHRoZSBpbml0aWFsIGRhdGFcclxuICAgICAgICB9ICAgXHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFRoaXMgZnVuY3Rpb24gZG9lcyB0aGUgdXBkYXRlIGJ5IGNhbGxpbmcgdGhlIG1ldGhvZHMgb24gdGhlIGN1cnJlbnQgc3RhdGVcclxuICAgIHZhciBkb1VwZGF0ZSA9IGZ1bmN0aW9uIChkYXRhKVxyXG4gICAge1xyXG4gICAgICAgIGlmIChfY3VycmVudFN0YXRlID09IG51bGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkYXRhID0gX2N1cnJlbnRTdGF0ZS5vbkJlZm9yZVVwZGF0ZShkYXRhKTtcclxuXHJcbiAgICAgICAgaWYgKGRhdGEgPT09IGZhbHNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmVwb3J0RXJyb3IoJ2RhdGEgaXMgZmFsc2UsIHJldHVybicpO1xyXG4gICAgICAgICAgICByZXR1cm47IC8vIEEgYmVmb3JlVXBkYXRlQ2FsbGJhY2sgcmV0dXJuZWQgYSBmYWxzZSB2YWx1ZSwgdGhpcyBwcmV2ZW50cyB0aGUgcmVuZGVyIGZyb20gb2NjdXJpbmdcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgX2RhdGEgPSBkYXRhO1xyXG5cclxuICAgICAgICBfY3VycmVudFN0YXRlLm9uVXBkYXRlKF9kYXRhKTtcclxuXHJcbiAgICAgICAgX2N1cnJlbnRTdGF0ZS5vbkFmdGVyVXBkYXRlKF9kYXRhKTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIC8vIEV4ZWN1dGUgYWxsIGNhbGxiYWNrcyBpbiB0aGUgY2FsbGJhY2tzIGFycmF5L29iamVjdCBwcm92aWRlZCwgdXBkYXRlRGF0YSBpcyBwYXNzZWQgdG8gdGhlbSBmb3IgcHJvY2Vzc2luZyBhbmQgcG90ZW50aWFsIG1vZGlmaWNhdGlvblxyXG4gICAgdmFyIGV4ZWN1dGVDYWxsYmFja3MgPSBmdW5jdGlvbiAoY2FsbGJhY2tzLCBkYXRhKVxyXG4gICAgeyAgIFxyXG4gICAgICAgIGZvciAodmFyIGtleSBpbiBjYWxsYmFja3MpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoY2FsbGJhY2tzLmhhc093blByb3BlcnR5KGtleSkgJiYgalF1ZXJ5LmlzRnVuY3Rpb24oY2FsbGJhY2tzW2tleV0pKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBkYXRhID0gY2FsbGJhY2tzW2tleV0uY2FsbCh0aGlzLCBkYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBpbml0OiBmdW5jdGlvbiAoKSBcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGluaXQoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlY2VpdmVVcGRhdGVEYXRhOiBmdW5jdGlvbiAoanNvblN0cmluZykgXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZWNlaXZlVXBkYXRlRGF0YShqc29uU3RyaW5nKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGFkZEJlZm9yZVVwZGF0ZUNhbGxiYWNrOiBmdW5jdGlvbiAoa2V5LCBjYWxsYmFja0Z1bmN0aW9uKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2JlZm9yZVVwZGF0ZUNhbGxiYWNrc1trZXldID0gY2FsbGJhY2tGdW5jdGlvbjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGFkZEJlZm9yZVVwZGF0ZUNhbGxiYWNrczogZnVuY3Rpb24gKGNhbGxiYWNrcykgeyAgICAgICAgXHJcbiAgICAgICAgICAgIGZvciAodmFyIGNhbGxiYWNrS2V5IGluIGNhbGxiYWNrcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFjYWxsYmFja3MuaGFzT3duUHJvcGVydHkoY2FsbGJhY2tLZXkpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgTmFub1N0YXRlTWFuYWdlci5hZGRCZWZvcmVVcGRhdGVDYWxsYmFjayhjYWxsYmFja0tleSwgY2FsbGJhY2tzW2NhbGxiYWNrS2V5XSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlbW92ZUJlZm9yZVVwZGF0ZUNhbGxiYWNrOiBmdW5jdGlvbiAoa2V5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKF9iZWZvcmVVcGRhdGVDYWxsYmFja3MuaGFzT3duUHJvcGVydHkoa2V5KSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIF9iZWZvcmVVcGRhdGVDYWxsYmFja3Nba2V5XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZXhlY3V0ZUJlZm9yZVVwZGF0ZUNhbGxiYWNrczogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGV4ZWN1dGVDYWxsYmFja3MoX2JlZm9yZVVwZGF0ZUNhbGxiYWNrcywgZGF0YSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBhZGRBZnRlclVwZGF0ZUNhbGxiYWNrOiBmdW5jdGlvbiAoa2V5LCBjYWxsYmFja0Z1bmN0aW9uKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2FmdGVyVXBkYXRlQ2FsbGJhY2tzW2tleV0gPSBjYWxsYmFja0Z1bmN0aW9uO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYWRkQWZ0ZXJVcGRhdGVDYWxsYmFja3M6IGZ1bmN0aW9uIChjYWxsYmFja3MpIHsgICAgIFxyXG4gICAgICAgICAgICBmb3IgKHZhciBjYWxsYmFja0tleSBpbiBjYWxsYmFja3MpIHtcclxuICAgICAgICAgICAgICAgIGlmICghY2FsbGJhY2tzLmhhc093blByb3BlcnR5KGNhbGxiYWNrS2V5KSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIE5hbm9TdGF0ZU1hbmFnZXIuYWRkQWZ0ZXJVcGRhdGVDYWxsYmFjayhjYWxsYmFja0tleSwgY2FsbGJhY2tzW2NhbGxiYWNrS2V5XSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlbW92ZUFmdGVyVXBkYXRlQ2FsbGJhY2s6IGZ1bmN0aW9uIChrZXkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoX2FmdGVyVXBkYXRlQ2FsbGJhY2tzLmhhc093blByb3BlcnR5KGtleSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSBfYWZ0ZXJVcGRhdGVDYWxsYmFja3Nba2V5XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZXhlY3V0ZUFmdGVyVXBkYXRlQ2FsbGJhY2tzOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZXhlY3V0ZUNhbGxiYWNrcyhfYWZ0ZXJVcGRhdGVDYWxsYmFja3MsIGRhdGEpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYWRkU3RhdGU6IGZ1bmN0aW9uIChzdGF0ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICghKHN0YXRlIGluc3RhbmNlb2YgTmFub1N0YXRlQ2xhc3MpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXBvcnRFcnJvcignRVJST1I6IEF0dGVtcHRlZCB0byBhZGQgYSBzdGF0ZSB3aGljaCBpcyBub3QgaW5zdGFuY2VvZiBOYW5vU3RhdGVDbGFzcycpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghc3RhdGUua2V5KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXBvcnRFcnJvcignRVJST1I6IEF0dGVtcHRlZCB0byBhZGQgYSBzdGF0ZSB3aXRoIGFuIGludmFsaWQgc3RhdGVLZXknKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfc3RhdGVzW3N0YXRlLmtleV0gPSBzdGF0ZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldEN1cnJlbnRTdGF0ZTogZnVuY3Rpb24gKHN0YXRlS2V5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBzdGF0ZUtleSA9PSAndW5kZWZpbmVkJyB8fCAhc3RhdGVLZXkpIHtcclxuICAgICAgICAgICAgICAgIHJlcG9ydEVycm9yKCdFUlJPUjogTm8gc3RhdGUga2V5IHdhcyBwYXNzZWQhJyk7ICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCFfc3RhdGVzLmhhc093blByb3BlcnR5KHN0YXRlS2V5KSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmVwb3J0RXJyb3IoJ0VSUk9SOiBBdHRlbXB0ZWQgdG8gc2V0IGEgY3VycmVudCBzdGF0ZSB3aGljaCBkb2VzIG5vdCBleGlzdDogJyArIHN0YXRlS2V5KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSAgICAgICAgICAgXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB2YXIgcHJldmlvdXNTdGF0ZSA9IF9jdXJyZW50U3RhdGU7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBfY3VycmVudFN0YXRlID0gX3N0YXRlc1tzdGF0ZUtleV07XHJcblxyXG4gICAgICAgICAgICBpZiAocHJldmlvdXNTdGF0ZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBwcmV2aW91c1N0YXRlLm9uUmVtb3ZlKF9jdXJyZW50U3RhdGUpO1xyXG4gICAgICAgICAgICB9ICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBfY3VycmVudFN0YXRlLm9uQWRkKHByZXZpb3VzU3RhdGUpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBnZXRDdXJyZW50U3RhdGU6IGZ1bmN0aW9uICgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gX2N1cnJlbnRTdGF0ZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGdldERhdGE6IGZ1bmN0aW9uICgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gX2RhdGE7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufSAoKTtcclxuIFxuLy8gTmFub0Jhc2VDYWxsYmFja3MgaXMgd2hlcmUgdGhlIGJhc2UgY2FsbGJhY2tzIChjb21tb24gdG8gYWxsIHRlbXBsYXRlcykgYXJlIHN0b3JlZFxyXG5OYW5vQmFzZUNhbGxiYWNrcyA9IGZ1bmN0aW9uICgpXHJcbntcclxuICAgIC8vIF9jYW5DbGljayBpcyB1c2VkIHRvIGRpc2FibGUgY2xpY2tzIGZvciBhIHNob3J0IHBlcmlvZCBhZnRlciBlYWNoIGNsaWNrICh0byBhdm9pZCBtaXMtY2xpY2tzKVxyXG4gICAgdmFyIF9jYW5DbGljayA9IHRydWU7XHJcbiAgICB2YXIgX2Jhc2VCZWZvcmVVcGRhdGVDYWxsYmFja3MgPSB7fTtcclxuICAgIHZhciBfYmFzZUFmdGVyVXBkYXRlQ2FsbGJhY2tzID0ge1xyXG4gICAgICAgIC8vIHRoaXMgY2FsbGJhY2sgaXMgdHJpZ2dlcmVkIGFmdGVyIG5ldyBkYXRhIGlzIHByb2Nlc3NlZFxyXG4gICAgICAgIC8vIGl0IHVwZGF0ZXMgdGhlIHN0YXR1cy92aXNpYmlsaXR5IGljb24gYW5kIGFkZHMgY2xpY2sgZXZlbnQgaGFuZGxpbmcgdG8gYnV0dG9ucy9saW5rcyAgICAgXHJcbiAgICAgICAgc3RhdHVzOiBmdW5jdGlvbiAodXBkYXRlRGF0YSkge1xyXG4gICAgICAgICAgICB2YXIgdWlTdGF0dXNDbGFzcztcclxuICAgICAgICAgICAgaWYgKHVwZGF0ZURhdGFbJ2NvbmZpZyddWydzdGF0dXMnXSA9PSAyKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB1aVN0YXR1c0NsYXNzID0gJ2dvb2QnO1xyXG4gICAgICAgICAgICAgICAgJCgnLmxpbmtBY3RpdmUnKS5yZW1vdmVDbGFzcygnaW5hY3RpdmUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh1cGRhdGVEYXRhWydjb25maWcnXVsnc3RhdHVzJ10gPT0gMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdWlTdGF0dXNDbGFzcyA9ICdhdmVyYWdlJztcclxuICAgICAgICAgICAgICAgICQoJy5saW5rQWN0aXZlJykuYWRkQ2xhc3MoJ2luYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB1aVN0YXR1c0NsYXNzID0gJ2JhZCc7XHJcbiAgICAgICAgICAgICAgICAkKCcubGlua0FjdGl2ZScpLmFkZENsYXNzKCdpbmFjdGl2ZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICQoJy5zdGF0dXNpY29uJykucmVtb3ZlQ2xhc3MoXCJnb29kIGJhZCBhdmVyYWdlXCIpLmFkZENsYXNzKHVpU3RhdHVzQ2xhc3MpO1xyXG4gICAgICAgICAgICAkKCcubGlua0FjdGl2ZScpLnN0b3BUaW1lKCdsaW5rUGVuZGluZycpO1xyXG4gICAgICAgICAgICAkKCcubGlua0FjdGl2ZScpLnJlbW92ZUNsYXNzKCdsaW5rUGVuZGluZycpO1xyXG5cclxuICAgICAgICAgICAgJCgnLmxpbmtBY3RpdmUnKVxyXG4gICAgICAgICAgICAgICAgLm9mZignY2xpY2snKVxyXG4gICAgICAgICAgICAgICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhyZWYgPSAkKHRoaXMpLmRhdGEoJ2hyZWYnKTtcclxuICAgICAgICAgICAgICAgICAgICBpZihocmVmICE9IG51bGwgJiYgX2NhbkNsaWNrKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2NhbkNsaWNrID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJ2JvZHknKS5vbmVUaW1lKDMwMCwgJ2VuYWJsZUNsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NhbkNsaWNrID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1cGRhdGVEYXRhWydjb25maWcnXVsnc3RhdHVzJ10gPT0gMilcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5vbmVUaW1lKDMwMCwgJ2xpbmtQZW5kaW5nJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2xpbmtQZW5kaW5nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGhyZWY7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdXBkYXRlRGF0YTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIG5hbm9tYXA6IGZ1bmN0aW9uICh1cGRhdGVEYXRhKSB7XHJcbiAgICAgICAgICAgICQoJy5tYXBJY29uJylcclxuICAgICAgICAgICAgICAgIC5vZmYoJ21vdXNlZW50ZXIgbW91c2VsZWF2ZScpXHJcbiAgICAgICAgICAgICAgICAub24oJ21vdXNlZW50ZXInLFxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyN1aU1hcFRvb2x0aXAnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmh0bWwoJCh0aGlzKS5jaGlsZHJlbignLnRvb2x0aXAnKS5odG1sKCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2hvdygpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc3RvcFRpbWUoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uZVRpbWUoNTAwMCwgJ2hpZGVUb29sdGlwJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuZmFkZU91dCg1MDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICQoJy56b29tTGluaycpXHJcbiAgICAgICAgICAgICAgICAub2ZmKCdjbGljaycpXHJcbiAgICAgICAgICAgICAgICAub24oJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgem9vbUxldmVsID0gJCh0aGlzKS5kYXRhKCd6b29tTGV2ZWwnKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdWlNYXBPYmplY3QgPSAkKCcjdWlNYXAnKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdWlNYXBXaWR0aCA9IHVpTWFwT2JqZWN0LndpZHRoKCkgKiB6b29tTGV2ZWw7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVpTWFwSGVpZ2h0ID0gdWlNYXBPYmplY3QuaGVpZ2h0KCkgKiB6b29tTGV2ZWw7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHVpTWFwT2JqZWN0LmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHpvb206IHpvb21MZXZlbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogJzUwJScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogJzUwJScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbkxlZnQ6ICctJyArIE1hdGguZmxvb3IodWlNYXBXaWR0aCAvIDIpICsgJ3B4JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luVG9wOiAnLScgKyBNYXRoLmZsb29yKHVpTWFwSGVpZ2h0IC8gMikgKyAncHgnXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICQoJyN1aU1hcEltYWdlJykuYXR0cignc3JjJyx1cGRhdGVEYXRhWydjb25maWcnXVsnbWFwJ10gKyAnX25hbm9tYXBfeicgKyB1cGRhdGVEYXRhWydjb25maWcnXVsnbWFwWkxldmVsJ10gKyAnLnBuZycpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZURhdGE7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGFkZENhbGxiYWNrczogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBOYW5vU3RhdGVNYW5hZ2VyLmFkZEJlZm9yZVVwZGF0ZUNhbGxiYWNrcyhfYmFzZUJlZm9yZVVwZGF0ZUNhbGxiYWNrcyk7XHJcbiAgICAgICAgICAgIE5hbm9TdGF0ZU1hbmFnZXIuYWRkQWZ0ZXJVcGRhdGVDYWxsYmFja3MoX2Jhc2VBZnRlclVwZGF0ZUNhbGxiYWNrcyk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICByZW1vdmVDYWxsYmFja3M6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgY2FsbGJhY2tLZXkgaW4gX2Jhc2VCZWZvcmVVcGRhdGVDYWxsYmFja3MpIHtcclxuICAgICAgICAgICAgICAgIGlmIChfYmFzZUJlZm9yZVVwZGF0ZUNhbGxiYWNrcy5oYXNPd25Qcm9wZXJ0eShjYWxsYmFja0tleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBOYW5vU3RhdGVNYW5hZ2VyLnJlbW92ZUJlZm9yZVVwZGF0ZUNhbGxiYWNrKGNhbGxiYWNrS2V5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmb3IgKHZhciBjYWxsYmFja0tleSBpbiBfYmFzZUFmdGVyVXBkYXRlQ2FsbGJhY2tzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoX2Jhc2VBZnRlclVwZGF0ZUNhbGxiYWNrcy5oYXNPd25Qcm9wZXJ0eShjYWxsYmFja0tleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBOYW5vU3RhdGVNYW5hZ2VyLnJlbW92ZUFmdGVyVXBkYXRlQ2FsbGJhY2soY2FsbGJhY2tLZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufSgpO1xyXG5cbi8vIE5hbm9CYXNlSGVscGVycyBpcyB3aGVyZSB0aGUgYmFzZSB0ZW1wbGF0ZSBoZWxwZXJzIChjb21tb24gdG8gYWxsIHRlbXBsYXRlcykgYXJlIHN0b3JlZFxyXG5OYW5vQmFzZUhlbHBlcnMgPSBmdW5jdGlvbiAoKVxyXG57XHJcbiAgICB2YXIgX2Jhc2VIZWxwZXJzID0ge1xyXG4gICAgICAgICAgICAvLyBjaGFuZ2UgdWkgc3R5bGluZyB0byBcInN5bmRpY2F0ZSBtb2RlXCJcclxuICAgICAgICAgICAgc3luZGljYXRlTW9kZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcubWFpbkJHJykuY3NzKFwiYmFja2dyb3VuZFwiLCBcInVybCgnc3luZGljYXRlLnBuZycpIG5vLXJlcGVhdCBmaXhlZCBjZW50ZXIvNTAlIDUwJSwgbGluZWFyLWdyYWRpZW50KHRvIGJvdHRvbSwgIzhmMTQxNCAwJSwgIzRCMEEwQSAxMDAlKSBuby1yZXBlYXQgZml4ZWQgY2VudGVyO1wiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAkKCcjdWlUaXRsZUZsdWZmJykuY3NzKFwiYmFja2dyb3VuZC1pbWFnZVwiLFwidXJsKCd1aVRpdGxlRmx1ZmYtU3luZGljYXRlLnBuZycpXCIpO1xyXG4gICAgICAgICAgICAgICAgJCgnI3VpVGl0bGVGbHVmZicpLmNzcyhcImJhY2tncm91bmQtcG9zaXRpb25cIixcIjUwJSA1MCVcIik7XHJcbiAgICAgICAgICAgICAgICAkKCcjdWlUaXRsZUZsdWZmJykuY3NzKFwiYmFja2dyb3VuZC1yZXBlYXRcIiwgXCJuby1yZXBlYXRcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgY29tYmluZTogZnVuY3Rpb24oIGFycjEsIGFycjIgKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYXJyMSAmJiBhcnIyID8gYXJyMS5jb25jYXQoYXJyMikgOiBhcnIxIHx8IGFycjI7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGR1bXA6IGZ1bmN0aW9uKCBhcnIxICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGFycjEpO1xyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgLy8gR2VuZXJhdGUgYSBCeW9uZCBsaW5rXHJcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uKCB0ZXh0LCBpY29uLCBwYXJhbWV0ZXJzLCBzdGF0dXMsIGVsZW1lbnRDbGFzcywgZWxlbWVudElkICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGljb25IdG1sID0gJyc7XHJcbiAgICAgICAgICAgICAgICB2YXIgaWNvbkNsYXNzID0gJ25vSWNvbic7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGljb24gIT0gJ3VuZGVmaW5lZCcgJiYgaWNvbilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpY29uSHRtbCA9ICc8ZGl2IGNsYXNzPVwidWlMaW5rUGVuZGluZ0ljb25cIj48L2Rpdj48aSBjbGFzcz1cImZhIGZhLWZ3IGZhLScgKyBpY29uICsgJ1wiPjwvaT4nO1xyXG4gICAgICAgICAgICAgICAgICAgIGljb25DbGFzcyA9ICdoYXNJY29uJztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGVsZW1lbnRDbGFzcyA9PSAndW5kZWZpbmVkJyB8fCAhZWxlbWVudENsYXNzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRDbGFzcyA9ICdsaW5rJztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudElkSHRtbCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBlbGVtZW50SWQgIT0gJ3VuZGVmaW5lZCcgJiYgZWxlbWVudElkKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRJZEh0bWwgPSAnaWQ9XCInICsgZWxlbWVudElkICsgJ1wiJztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgdGlkID0gTmFub1RyYW5zaXRpb24uYWxsb2NJRChlbGVtZW50SWRIdG1sICsgXCJfXCIgKyB0ZXh0LnRvU3RyaW5nKCkucmVwbGFjZSgvW15hLXowLTlfXS9naSwgXCJfXCIpICsgXCJfXCIgKyBpY29uKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHN0YXR1cyAhPSAndW5kZWZpbmVkJyAmJiBzdGF0dXMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICc8ZGl2IHVuc2VsZWN0YWJsZT1cIm9uXCIgY2xhc3M9XCJsaW5rICcgKyBpY29uQ2xhc3MgKyAnICcgKyB0aWQgKyAnXCIgJyArIGVsZW1lbnRJZEh0bWwgKyAnPicgKyBpY29uSHRtbCArIHRleHQgKyAnPC9kaXY+PHNjcmlwdD4kKGZ1bmN0aW9uKCkgeyB2YXIgbmV3U3RhdGUgPSB7XCIuLmNsYXNzXCI6IFwiJyArIGVsZW1lbnRDbGFzcyArICcgJyArIHN0YXR1cyArICdcIn07IHZhciBvbGQgPSBOYW5vVHJhbnNpdGlvbi50cmFuc2l0aW9uRWxlbWVudChcIicgKyB0aWQgKyAnXCIsIG51bGwsIG5ld1N0YXRlLCAyMDApOyBOYW5vVHJhbnNpdGlvbi5hbmltYXRlSG92ZXIoXCInICsgdGlkICsgJ1wiLCBudWxsLCBvbGQsIG5ld1N0YXRlKTsgfSk7PC9zY3JpcHQ+JztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJzxkaXYgdW5zZWxlY3RhYmxlPVwib25cIiBjbGFzcz1cImxpbmtBY3RpdmUgJyArIGljb25DbGFzcyArICcgJyArIHRpZCArICdcIiBkYXRhLWhyZWY9XCInICsgTmFub1V0aWxpdHkuZ2VuZXJhdGVIcmVmKHBhcmFtZXRlcnMpICsgJ1wiICcgKyBlbGVtZW50SWRIdG1sICsgJz4nICsgaWNvbkh0bWwgKyB0ZXh0ICsgJzwvZGl2PjxzY3JpcHQ+JChmdW5jdGlvbigpIHsgdmFyIG5ld1N0YXRlID0ge1wiLi5jbGFzc1wiOiBcIicgKyBlbGVtZW50Q2xhc3MgKyAnXCJ9OyB2YXIgb2xkID0gTmFub1RyYW5zaXRpb24udHJhbnNpdGlvbkVsZW1lbnQoXCInICsgdGlkICsgJ1wiLCBudWxsLCBuZXdTdGF0ZSwgMjAwKTsgTmFub1RyYW5zaXRpb24uYW5pbWF0ZUhvdmVyKFwiJyArIHRpZCArICdcIiwgbnVsbCwgb2xkLCBuZXdTdGF0ZSk7IH0pOzwvc2NyaXB0Pic7XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICB4b3I6IGZ1bmN0aW9uIChudW1iZXIsYml0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVtYmVyIF4gYml0O1xyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgcHJlY2lzaW9uUm91bmQ6IGZ1bmN0aW9uICh2YWx1ZSwgcGxhY2VzKSB7XHJcbiAgICAgICAgICAgICAgICBpZihwbGFjZXMgPT0gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hdGgucm91bmQobnVtYmVyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciBtdWx0aXBsaWVyID0gTWF0aC5wb3coMTAsIHBsYWNlcyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKE1hdGgucm91bmQodmFsdWUgKiBtdWx0aXBsaWVyKSAvIG11bHRpcGxpZXIpO1xyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgLy8gUm91bmQgYSBudW1iZXIgdG8gdGhlIG5lYXJlc3QgaW50ZWdlclxyXG4gICAgICAgICAgICByb3VuZDogZnVuY3Rpb24obnVtYmVyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5yb3VuZChudW1iZXIpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmaXhlZDogZnVuY3Rpb24obnVtYmVyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5yb3VuZChudW1iZXIgKiAxMCkgLyAxMDtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8gUm91bmQgYSBudW1iZXIgZG93biB0byBpbnRlZ2VyXHJcbiAgICAgICAgICAgIGZsb29yOiBmdW5jdGlvbihudW1iZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLmZsb29yKG51bWJlcik7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIFJvdW5kIGEgbnVtYmVyIHVwIHRvIGludGVnZXJcclxuICAgICAgICAgICAgY2VpbDogZnVuY3Rpb24obnVtYmVyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5jZWlsKG51bWJlcik7XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAvLyBGb3JtYXQgYSBzdHJpbmcgKH5zdHJpbmcoXCJIZWxsbyB7MH0sIGhvdyBhcmUgezF9P1wiLCAnTWFydGluJywgJ3lvdScpIGJlY29tZXMgXCJIZWxsbyBNYXJ0aW4sIGhvdyBhcmUgeW91P1wiKVxyXG4gICAgICAgICAgICBzdHJpbmc6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChhcmd1bWVudHMubGVuZ3RoID09IDEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyZ3VtZW50c1swXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0cmluZ0FyZ3MgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZ0FyZ3MucHVzaChhcmd1bWVudHNbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJndW1lbnRzWzBdLmZvcm1hdChzdHJpbmdBcmdzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZm9ybWF0TnVtYmVyOiBmdW5jdGlvbih4KSB7XHJcbiAgICAgICAgICAgICAgICAvLyBGcm9tIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMjkwMTEwMi9ob3ctdG8tcHJpbnQtYS1udW1iZXItd2l0aC1jb21tYXMtYXMtdGhvdXNhbmRzLXNlcGFyYXRvcnMtaW4tamF2YXNjcmlwdFxyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnRzID0geC50b1N0cmluZygpLnNwbGl0KFwiLlwiKTtcclxuICAgICAgICAgICAgICAgIHBhcnRzWzBdID0gcGFydHNbMF0ucmVwbGFjZSgvXFxCKD89KFxcZHszfSkrKD8hXFxkKSkvZywgXCIsXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnRzLmpvaW4oXCIuXCIpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvLyBDYXBpdGFsaXplIHRoZSBmaXJzdCBsZXR0ZXIgb2YgYSBzdHJpbmcuIEZyb20gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xMDI2MDY5L2NhcGl0YWxpemUtdGhlLWZpcnN0LWxldHRlci1vZi1zdHJpbmctaW4tamF2YXNjcmlwdFxyXG4gICAgICAgICAgICBjYXBpdGFsaXplRmlyc3RMZXR0ZXI6IGZ1bmN0aW9uKCBzdHJpbmcgKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RyaW5nLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyaW5nLnNsaWNlKDEpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvLyBEaXNwbGF5IGEgYmFyLiBVc2VkIHRvIHNob3cgaGVhbHRoLCBjYXBhY2l0eSwgZXRjLlxyXG4gICAgICAgICAgICBkaXNwbGF5QmFyOiBmdW5jdGlvbiggdmFsdWUsIHJhbmdlTWluLCByYW5nZU1heCwgc3R5bGVDbGFzcywgc2hvd1RleHQgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHJhbmdlTWluIDwgcmFuZ2VNYXgpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlIDwgcmFuZ2VNaW4pXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHJhbmdlTWluO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSA+IHJhbmdlTWF4KVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSByYW5nZU1heDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID4gcmFuZ2VNaW4pXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHJhbmdlTWluO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSA8IHJhbmdlTWF4KVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSByYW5nZU1heDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzdHlsZUNsYXNzID09ICd1bmRlZmluZWQnIHx8ICFzdHlsZUNsYXNzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlQ2xhc3MgPSAnJztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHNob3dUZXh0ID09ICd1bmRlZmluZWQnIHx8ICFzaG93VGV4dClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBzaG93VGV4dCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBwZXJjZW50YWdlID0gTWF0aC5yb3VuZCgodmFsdWUgLSByYW5nZU1pbikgLyAocmFuZ2VNYXggLSByYW5nZU1pbikgKiAxMDApO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRpZCA9IE5hbm9UcmFuc2l0aW9uLmFsbG9jSUQocmFuZ2VNaW4gKyBcIl9cIiArIHJhbmdlTWF4KTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJzxkaXYgY2xhc3M9XCJkaXNwbGF5QmFyICcgKyB0aWQgKyAnICcgKyBzdHlsZUNsYXNzICsgJ1wiPjxkaXYgY2xhc3M9XCJkaXNwbGF5QmFyRmlsbFwiPjwvZGl2PjxkaXYgY2xhc3M9XCJkaXNwbGF5QmFyVGV4dCAnICsgc3R5bGVDbGFzcyArICdcIj4nICsgc2hvd1RleHQgKyAnPC9kaXY+PC9kaXY+PHNjcmlwdD4kKGZ1bmN0aW9uKCkgeyBOYW5vVHJhbnNpdGlvbi50cmFuc2l0aW9uRWxlbWVudChcIicgKyB0aWQgKyAnXCIsIFwiLmRpc3BsYXlCYXJGaWxsXCIsIHt3aWR0aDogXCInICsgcGVyY2VudGFnZSArICclXCIsIFwiLi5jbGFzc1wiOiBcIicgKyBzdHlsZUNsYXNzICsgJ1wifSk7IH0pOzwvc2NyaXB0Pic7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIENvbnZlcnQgZGFuZ2VyIGxldmVsIHRvIGNsYXNzIChmb3IgdGhlIGFpciBhbGFybSlcclxuICAgICAgICAgICAgZGFuZ2VyVG9DbGFzczogZnVuY3Rpb24obGV2ZWwpIHtcclxuICAgICAgICAgICAgICAgIGlmKGxldmVsID09IDApIHJldHVybiAnZ29vZCc7XHJcbiAgICAgICAgICAgICAgICBpZihsZXZlbCA9PSAxKSByZXR1cm4gJ2F2ZXJhZ2UnO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdiYWQnO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBkYW5nZXJUb1NwYW46IGZ1bmN0aW9uKGxldmVsKSB7XHJcbiAgICAgICAgICAgICAgICBpZihsZXZlbCA9PSAwKSByZXR1cm4gJ1wiPHNwYW4gY2xhc3M9XCJnb29kXCI+R29vZDwvc3Bhbj5cIic7XHJcbiAgICAgICAgICAgICAgICBpZihsZXZlbCA9PSAxKSByZXR1cm4gJ1wiPHNwYW4gY2xhc3M9XCJhdmVyYWdlXCI+TWlub3IgQWxlcnQ8L3NwYW4+XCInO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdcIjxzcGFuIGNsYXNzPVwiYmFkXCI+TWFqb3IgQWxlcnQ8L3NwYW4+XCInO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBnZW5lcmF0ZUhyZWY6IGZ1bmN0aW9uIChwYXJhbWV0ZXJzKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYm9keSA9ICQoJ2JvZHknKTsgLy8gRm9yIHNvbWUgZnVja2luZyByZWFzb24sIGRhdGEgaXMgc3RvcmVkIGluIHRoZSBib2R5IHRhZy5cclxuICAgICAgICAgICAgICAgIF91cmxQYXJhbWV0ZXJzID0gYm9keS5kYXRhKCd1cmxQYXJhbWV0ZXJzJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcXVlcnlTdHJpbmcgPSAnPyc7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIF91cmxQYXJhbWV0ZXJzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfdXJsUGFyYW1ldGVycy5oYXNPd25Qcm9wZXJ0eShrZXkpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHF1ZXJ5U3RyaW5nICE9PSAnPycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5U3RyaW5nICs9ICc7JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBxdWVyeVN0cmluZyArPSBrZXkgKyAnPScgKyBfdXJsUGFyYW1ldGVyc1trZXldO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gcGFyYW1ldGVycylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocGFyYW1ldGVycy5oYXNPd25Qcm9wZXJ0eShrZXkpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHF1ZXJ5U3RyaW5nICE9PSAnPycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5U3RyaW5nICs9ICc7JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBxdWVyeVN0cmluZyArPSBrZXkgKyAnPScgKyBwYXJhbWV0ZXJzW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHF1ZXJ5U3RyaW5nO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvLyBEaXNwbGF5IEROQSBCbG9ja3MgKGZvciB0aGUgRE5BIE1vZGlmaWVyIFVJKVxyXG4gICAgICAgICAgICBkaXNwbGF5RE5BQmxvY2tzOiBmdW5jdGlvbihkbmFTdHJpbmcsIHNlbGVjdGVkQmxvY2ssIHNlbGVjdGVkU3ViYmxvY2ssIGJsb2NrU2l6ZSwgcGFyYW1LZXkpIHtcclxuICAgICAgICAgICAgICAgIGlmICghZG5hU3RyaW5nKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnPGRpdiBjbGFzcz1cIm5vdGljZVwiPlBsZWFzZSBwbGFjZSBhIHZhbGlkIHN1YmplY3QgaW50byB0aGUgRE5BIG1vZGlmaWVyLjwvZGl2Pic7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGNoYXJhY3RlcnMgPSBkbmFTdHJpbmcuc3BsaXQoJycpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBodG1sID0gJzxkaXYgY2xhc3M9XCJkbmFCbG9ja1wiPjxkaXYgY2xhc3M9XCJsaW5rIGRuYUJsb2NrTnVtYmVyXCI+MTwvZGl2Pic7XHJcbiAgICAgICAgICAgICAgICB2YXIgYmxvY2sgPSAxO1xyXG4gICAgICAgICAgICAgICAgdmFyIHN1YmJsb2NrID0gMTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGluZGV4IGluIGNoYXJhY3RlcnMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWNoYXJhY3RlcnMuaGFzT3duUHJvcGVydHkoaW5kZXgpIHx8IHR5cGVvZiBjaGFyYWN0ZXJzW2luZGV4XSA9PT0gJ29iamVjdCcpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXJhbWV0ZXJzO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJhbUtleS50b1VwcGVyQ2FzZSgpID09ICdVSScpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzID0geyAnc2VsZWN0VUlCbG9jaycgOiBibG9jaywgJ3NlbGVjdFVJU3ViYmxvY2snIDogc3ViYmxvY2sgfTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzID0geyAnc2VsZWN0U0VCbG9jaycgOiBibG9jaywgJ3NlbGVjdFNFU3ViYmxvY2snIDogc3ViYmxvY2sgfTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzdGF0dXMgPSAnbGlua0FjdGl2ZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJsb2NrID09IHNlbGVjdGVkQmxvY2sgJiYgc3ViYmxvY2sgPT0gc2VsZWN0ZWRTdWJibG9jaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMgPSAnc2VsZWN0ZWQnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz1cImxpbmsgJyArIHN0YXR1cyArICcgZG5hU3ViQmxvY2tcIiBkYXRhLWhyZWY9XCInICsgTmFub1V0aWxpdHkuZ2VuZXJhdGVIcmVmKHBhcmFtZXRlcnMpICsgJ1wiIGlkPVwiZG5hQmxvY2snICsgaW5kZXggKyAnXCI+JyArIGNoYXJhY3RlcnNbaW5kZXhdICsgJzwvZGl2Pic7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGluZGV4Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ICUgYmxvY2tTaXplID09IDAgJiYgaW5kZXggPCBjaGFyYWN0ZXJzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBibG9jaysrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJibG9jayA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gJzwvZGl2PjxkaXYgY2xhc3M9XCJkbmFCbG9ja1wiPjxkaXYgY2xhc3M9XCJsaW5rIGRuYUJsb2NrTnVtYmVyXCI+JyArIGJsb2NrICsgJzwvZGl2Pic7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3ViYmxvY2srKztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaHRtbCArPSAnPC9kaXY+JztcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaHRtbDtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY01pcnJvcjogZnVuY3Rpb24odGV4dGJveCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGVkaXRvciA9IENvZGVNaXJyb3IuZnJvbVRleHRBcmVhKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRleHRib3gpLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGluZU51bWJlcnM6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgaW5kZW50VW5pdDogNCxcclxuICAgICAgICAgICAgICAgICAgICBpbmRlbnRXaXRoVGFiczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICB0aGVtZTogXCJsZXNzZXItZGFya1wiXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc21vb3RoTnVtYmVyOiBmdW5jdGlvbihudW1iZXIpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0aWQgPSBOYW5vVHJhbnNpdGlvbi5hbGxvY0lEKFwiblwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJzxzcGFuIGNsYXNzPVwiJyArIHRpZCArICdcIj48L3NwYW4+PHNjcmlwdD4kKGZ1bmN0aW9uKCkgeyB2YXIgbmV3U3RhdGUgPSB7dmFsdWU6ICcgKyBudW1iZXIgKyAnfTsgdmFyIG9sZCA9IE5hbm9UcmFuc2l0aW9uLnVwZGF0ZUVsZW1lbnQoXCInICsgdGlkICsgJ1wiLCBuZXdTdGF0ZSk7IE5hbm9UcmFuc2l0aW9uLmFuaW1hdGVUZXh0VmFsdWUoXCInICsgdGlkICsgJ1wiLCBudWxsLCAtMSwgb2xkW1widmFsdWVcIl0sIG5ld1N0YXRlW1widmFsdWVcIl0pOyB9KTs8L3NjcmlwdD4nO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzbW9vdGhSb3VuZDogZnVuY3Rpb24obnVtYmVyLCBwbGFjZXMpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0aWQgPSBOYW5vVHJhbnNpdGlvbi5hbGxvY0lEKHBsYWNlcyk7XHJcbiAgICAgICAgICAgICAgICBpZihwbGFjZXMgPT09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgICAgICAgICBwbGFjZWQgPSAwO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiAnPHNwYW4gY2xhc3M9XCInICsgdGlkICsgJ1wiPjwvc3Bhbj48c2NyaXB0PiQoZnVuY3Rpb24oKSB7IHZhciBuZXdTdGF0ZSA9IHt2YWx1ZTogJyArIG51bWJlci50b0ZpeGVkKHBsYWNlcykgKyAnfTsgdmFyIG9sZCA9IE5hbm9UcmFuc2l0aW9uLnVwZGF0ZUVsZW1lbnQoXCInICsgdGlkICsgJ1wiLCBuZXdTdGF0ZSk7IE5hbm9UcmFuc2l0aW9uLmFuaW1hdGVUZXh0VmFsdWUoXCInICsgdGlkICsgJ1wiLCBudWxsLCAnICsgcGxhY2VzICsgJywgb2xkW1widmFsdWVcIl0sIG5ld1N0YXRlW1widmFsdWVcIl0pOyB9KTs8L3NjcmlwdD4nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGFkZEhlbHBlcnM6IGZ1bmN0aW9uICgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBOYW5vVGVtcGxhdGUuYWRkSGVscGVycyhfYmFzZUhlbHBlcnMpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIHJlbW92ZUhlbHBlcnM6IGZ1bmN0aW9uICgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBoZWxwZXJLZXkgaW4gX2Jhc2VIZWxwZXJzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoX2Jhc2VIZWxwZXJzLmhhc093blByb3BlcnR5KGhlbHBlcktleSkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgTmFub1RlbXBsYXRlLnJlbW92ZUhlbHBlcihoZWxwZXJLZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufSgpO1xyXG5cblxyXG5OYW5vU3RhdGVEZWZhdWx0Q2xhc3MuaW5oZXJpdHNGcm9tKE5hbm9TdGF0ZUNsYXNzKTtcclxudmFyIE5hbm9TdGF0ZURlZmF1bHQgPSBuZXcgTmFub1N0YXRlRGVmYXVsdENsYXNzKCk7XHJcblxyXG5mdW5jdGlvbiBOYW5vU3RhdGVEZWZhdWx0Q2xhc3MoKSB7XHJcblxyXG4gICAgdGhpcy5rZXkgPSAnZGVmYXVsdCc7XHJcblxyXG4gICAgLy90aGlzLnBhcmVudC5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xyXG5cclxuICAgIHRoaXMua2V5ID0gdGhpcy5rZXkudG9Mb3dlckNhc2UoKTtcclxuXHJcbiAgICBOYW5vU3RhdGVNYW5hZ2VyLmFkZFN0YXRlKHRoaXMpO1xyXG59XHJcblxuTmFub1N0YXRlUERBQ2xhc3MuaW5oZXJpdHNGcm9tKE5hbm9TdGF0ZUNsYXNzKTtcclxudmFyIE5hbm9TdGF0ZVBEQSA9IG5ldyBOYW5vU3RhdGVQREFDbGFzcygpO1xyXG5cclxuZnVuY3Rpb24gTmFub1N0YXRlUERBQ2xhc3MoKSB7XHJcbiAgICB0aGlzLmtleSA9ICdwZGEnO1xyXG4gICAgdGhpcy5rZXkgPSB0aGlzLmtleS50b0xvd2VyQ2FzZSgpO1xyXG5cdHRoaXMuY3VycmVudF90ZW1wbGF0ZSA9IFwiXCI7XHJcblxyXG4gICAgTmFub1N0YXRlTWFuYWdlci5hZGRTdGF0ZSh0aGlzKTtcclxufVxyXG5cdFxyXG5OYW5vU3RhdGVQREFDbGFzcy5wcm90b3R5cGUub25VcGRhdGUgPSBmdW5jdGlvbihkYXRhKSB7XHJcblx0TmFub1N0YXRlQ2xhc3MucHJvdG90eXBlLm9uVXBkYXRlLmNhbGwodGhpcywgZGF0YSk7XHJcblx0dmFyIHN0YXRlID0gdGhpcztcclxuXHRcclxuXHR0cnkge1xyXG5cdFx0aWYoZGF0YVsnZGF0YSddWydhcHAnXSAhPSBudWxsKSB7XHJcblx0XHRcdHZhciB0ZW1wbGF0ZSA9IGRhdGFbJ2RhdGEnXVsnYXBwJ11bJ3RlbXBsYXRlJ107XHJcblx0XHRcdGlmKHRlbXBsYXRlICE9IG51bGwgJiYgdGVtcGxhdGUgIT0gc3RhdGUuY3VycmVudF90ZW1wbGF0ZSkge1xyXG5cdFx0XHRcdCQud2hlbigkLmFqYXgoe1xyXG5cdFx0XHRcdFx0dXJsOiB0ZW1wbGF0ZSArICcudG1wbCcsXHJcblx0XHRcdFx0XHRjYWNoZTogZmFsc2UsXHJcblx0XHRcdFx0XHRkYXRhVHlwZTogJ3RleHQnXHJcblx0XHRcdFx0fSkpXHJcblx0XHRcdFx0LmRvbmUoZnVuY3Rpb24odGVtcGxhdGVNYXJrdXApIHtcclxuXHRcdFx0XHRcdHRlbXBsYXRlTWFya3VwICs9ICc8ZGl2IGNsYXNzPVwiY2xlYXJCb3RoXCI+PC9kaXY+JztcclxuXHJcblx0XHRcdFx0XHR0cnkge1xyXG5cdFx0XHRcdFx0XHROYW5vVGVtcGxhdGUuYWRkVGVtcGxhdGUoJ2FwcCcsIHRlbXBsYXRlTWFya3VwKTtcclxuXHRcdFx0XHRcdFx0TmFub1RlbXBsYXRlLnJlc2V0VGVtcGxhdGUoJ2FwcCcpO1xyXG5cdFx0XHRcdFx0XHQkKFwiI3VpQXBwXCIpLmh0bWwoTmFub1RlbXBsYXRlLnBhcnNlKCdhcHAnLCBkYXRhKSk7XHJcblx0XHRcdFx0XHRcdHN0YXRlLmN1cnJlbnRfdGVtcGxhdGUgPSB0ZW1wbGF0ZTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdHN0YXRlLm9uQWZ0ZXJVcGRhdGUoZGF0YSk7XHJcblx0XHRcdFx0XHR9IGNhdGNoKGVycm9yKSB7XHJcblx0XHRcdFx0XHRcdHJlcG9ydEVycm9yKCdFUlJPUjogQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgbG9hZGluZyB0aGUgUERBIEFwcCBVSTogJyArIGVycm9yLm1lc3NhZ2UpO1xyXG5cdFx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSlcclxuXHRcdFx0XHQuZmFpbCggZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdFx0cmVwb3J0RXJyb3IoJ0VSUk9SOiBMb2FkaW5nIHRlbXBsYXRlIGFwcCgnICsgdGVtcGxhdGUgKyAnKSBmYWlsZWQhJyk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0aWYgKE5hbm9UZW1wbGF0ZS50ZW1wbGF0ZUV4aXN0cygnYXBwJykpIHtcclxuXHRcdFx0XHRcdCQoXCIjdWlBcHBcIikuaHRtbChOYW5vVGVtcGxhdGUucGFyc2UoJ2FwcCcsIGRhdGEpKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9IGNhdGNoKGVycm9yKSB7XHJcblx0XHRyZXBvcnRFcnJvcignRVJST1I6IEFuIGVycm9yIG9jY3VycmVkIHdoaWxlIHJlbmRlcmluZyB0aGUgUERBIEFwcCBVSTogJyArIGVycm9yLm1lc3NhZ2UpO1xyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxufVxuLy8gVGhpcyBpcyB0aGUgYmFzZSBzdGF0ZSBjbGFzcywgaXQgaXMgbm90IHRvIGJlIHVzZWQgZGlyZWN0bHlcclxuXHJcbmZ1bmN0aW9uIE5hbm9TdGF0ZUNsYXNzKCkge31cclxuXHJcbk5hbm9TdGF0ZUNsYXNzLnByb3RvdHlwZS5rZXkgPSBudWxsO1xyXG5OYW5vU3RhdGVDbGFzcy5wcm90b3R5cGUubGF5b3V0UmVuZGVyZWQgPSBmYWxzZTtcclxuTmFub1N0YXRlQ2xhc3MucHJvdG90eXBlLmNvbnRlbnRSZW5kZXJlZCA9IGZhbHNlO1xyXG5OYW5vU3RhdGVDbGFzcy5wcm90b3R5cGUubWFwSW5pdGlhbGlzZWQgPSBmYWxzZTtcclxuXHJcbk5hbm9TdGF0ZUNsYXNzLnByb3RvdHlwZS5pc0N1cnJlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gTmFub1N0YXRlTWFuYWdlci5nZXRDdXJyZW50U3RhdGUoKSA9PSB0aGlzO1xyXG59O1xyXG5cclxuTmFub1N0YXRlQ2xhc3MucHJvdG90eXBlLm9uQWRkID0gZnVuY3Rpb24gKHByZXZpb3VzU3RhdGUpIHtcclxuICAgIC8vIERvIG5vdCBhZGQgY29kZSBoZXJlLCBhZGQgaXQgdG8gdGhlICdkZWZhdWx0JyBzdGF0ZSAobmFub19zdGF0ZV9kZWZhdXQuanMpIG9yIGNyZWF0ZSBhIG5ldyBzdGF0ZSBhbmQgb3ZlcnJpZGUgdGhpcyBmdW5jdGlvblxyXG5cclxuICAgIE5hbm9CYXNlQ2FsbGJhY2tzLmFkZENhbGxiYWNrcygpO1xyXG4gICAgTmFub0Jhc2VIZWxwZXJzLmFkZEhlbHBlcnMoKTtcclxufTtcclxuXHJcbk5hbm9TdGF0ZUNsYXNzLnByb3RvdHlwZS5vblJlbW92ZSA9IGZ1bmN0aW9uIChuZXh0U3RhdGUpIHtcclxuICAgIC8vIERvIG5vdCBhZGQgY29kZSBoZXJlLCBhZGQgaXQgdG8gdGhlICdkZWZhdWx0JyBzdGF0ZSAobmFub19zdGF0ZV9kZWZhdXQuanMpIG9yIGNyZWF0ZSBhIG5ldyBzdGF0ZSBhbmQgb3ZlcnJpZGUgdGhpcyBmdW5jdGlvblxyXG5cclxuICAgIE5hbm9CYXNlQ2FsbGJhY2tzLnJlbW92ZUNhbGxiYWNrcygpO1xyXG4gICAgTmFub0Jhc2VIZWxwZXJzLnJlbW92ZUhlbHBlcnMoKTtcclxufTtcclxuXHJcbk5hbm9TdGF0ZUNsYXNzLnByb3RvdHlwZS5vbkJlZm9yZVVwZGF0ZSA9IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAvLyBEbyBub3QgYWRkIGNvZGUgaGVyZSwgYWRkIGl0IHRvIHRoZSAnZGVmYXVsdCcgc3RhdGUgKG5hbm9fc3RhdGVfZGVmYXV0LmpzKSBvciBjcmVhdGUgYSBuZXcgc3RhdGUgYW5kIG92ZXJyaWRlIHRoaXMgZnVuY3Rpb25cclxuXHJcbiAgICBkYXRhID0gTmFub1N0YXRlTWFuYWdlci5leGVjdXRlQmVmb3JlVXBkYXRlQ2FsbGJhY2tzKGRhdGEpO1xyXG5cclxuICAgIHJldHVybiBkYXRhOyAvLyBSZXR1cm4gZGF0YSB0byBjb250aW51ZSwgcmV0dXJuIGZhbHNlIHRvIHByZXZlbnQgb25VcGRhdGUgYW5kIG9uQWZ0ZXJVcGRhdGVcclxufTtcclxuXHJcbk5hbm9TdGF0ZUNsYXNzLnByb3RvdHlwZS5vblVwZGF0ZSA9IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAvLyBEbyBub3QgYWRkIGNvZGUgaGVyZSwgYWRkIGl0IHRvIHRoZSAnZGVmYXVsdCcgc3RhdGUgKG5hbm9fc3RhdGVfZGVmYXV0LmpzKSBvciBjcmVhdGUgYSBuZXcgc3RhdGUgYW5kIG92ZXJyaWRlIHRoaXMgZnVuY3Rpb25cclxuXHJcbiAgICB0cnlcclxuICAgIHtcclxuICAgICAgICBpZiAoIXRoaXMubGF5b3V0UmVuZGVyZWQgfHwgKGRhdGFbJ2NvbmZpZyddLmhhc093blByb3BlcnR5KCdhdXRvVXBkYXRlTGF5b3V0JykgJiYgZGF0YVsnY29uZmlnJ11bJ2F1dG9VcGRhdGVMYXlvdXQnXSkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAkKFwiI3VpTGF5b3V0XCIpLmh0bWwoTmFub1RlbXBsYXRlLnBhcnNlKCdsYXlvdXQnLCBkYXRhKSk7IC8vIHJlbmRlciB0aGUgJ21haWwnIHRlbXBsYXRlIHRvIHRoZSAjbWFpblRlbXBsYXRlIGRpdlxyXG4gICAgICAgICAgICB0aGlzLmxheW91dFJlbmRlcmVkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLmNvbnRlbnRSZW5kZXJlZCB8fCAoZGF0YVsnY29uZmlnJ10uaGFzT3duUHJvcGVydHkoJ2F1dG9VcGRhdGVDb250ZW50JykgJiYgZGF0YVsnY29uZmlnJ11bJ2F1dG9VcGRhdGVDb250ZW50J10pKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgJChcIiN1aUNvbnRlbnRcIikuaHRtbChOYW5vVGVtcGxhdGUucGFyc2UoJ21haW4nLCBkYXRhKSk7IC8vIHJlbmRlciB0aGUgJ21haWwnIHRlbXBsYXRlIHRvIHRoZSAjbWFpblRlbXBsYXRlIGRpdlxyXG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRSZW5kZXJlZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChOYW5vVGVtcGxhdGUudGVtcGxhdGVFeGlzdHMoJ21hcENvbnRlbnQnKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5tYXBJbml0aWFsaXNlZClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgLy8gQWRkIGRyYWcgZnVuY3Rpb25hbGl0eSB0byB0aGUgbWFwIHVpXHJcbiAgICAgICAgICAgICAgICAkKCcjdWlNYXAnKS5kcmFnZ2FibGUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAkKCcjdWlNYXBUb29sdGlwJylcclxuICAgICAgICAgICAgICAgICAgICAub2ZmKCdjbGljaycpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZhZGVPdXQoNDAwKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLm1hcEluaXRpYWxpc2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJChcIiN1aU1hcENvbnRlbnRcIikuaHRtbChOYW5vVGVtcGxhdGUucGFyc2UoJ21hcENvbnRlbnQnLCBkYXRhKSk7IC8vIHJlbmRlciB0aGUgJ21hcENvbnRlbnQnIHRlbXBsYXRlIHRvIHRoZSAjdWlNYXBDb250ZW50IGRpdlxyXG5cclxuICAgICAgICAgICAgaWYgKGRhdGFbJ2NvbmZpZyddLmhhc093blByb3BlcnR5KCdzaG93TWFwJykgJiYgZGF0YVsnY29uZmlnJ11bJ3Nob3dNYXAnXSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgJCgnI3VpQ29udGVudCcpLmFkZENsYXNzKCdoaWRkZW4nKTtcclxuICAgICAgICAgICAgICAgICQoJyN1aU1hcFdyYXBwZXInKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAkKCcjdWlNYXBXcmFwcGVyJykuYWRkQ2xhc3MoJ2hpZGRlbicpO1xyXG4gICAgICAgICAgICAgICAgJCgnI3VpQ29udGVudCcpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoTmFub1RlbXBsYXRlLnRlbXBsYXRlRXhpc3RzKCdtYXBIZWFkZXInKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgICQoXCIjdWlNYXBIZWFkZXJcIikuaHRtbChOYW5vVGVtcGxhdGUucGFyc2UoJ21hcEhlYWRlcicsIGRhdGEpKTsgLy8gcmVuZGVyIHRoZSAnbWFwSGVhZGVyJyB0ZW1wbGF0ZSB0byB0aGUgI3VpTWFwSGVhZGVyIGRpdlxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoTmFub1RlbXBsYXRlLnRlbXBsYXRlRXhpc3RzKCdtYXBGb290ZXInKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgICQoXCIjdWlNYXBGb290ZXJcIikuaHRtbChOYW5vVGVtcGxhdGUucGFyc2UoJ21hcEZvb3RlcicsIGRhdGEpKTsgLy8gcmVuZGVyIHRoZSAnbWFwRm9vdGVyJyB0ZW1wbGF0ZSB0byB0aGUgI3VpTWFwRm9vdGVyIGRpdlxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNhdGNoKGVycm9yKVxyXG4gICAge1xyXG4gICAgICAgIHJlcG9ydEVycm9yKCdFUlJPUjogQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgcmVuZGVyaW5nIHRoZSBVSTogJyArIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxufTtcclxuXHJcbk5hbm9TdGF0ZUNsYXNzLnByb3RvdHlwZS5vbkFmdGVyVXBkYXRlID0gZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgIC8vIERvIG5vdCBhZGQgY29kZSBoZXJlLCBhZGQgaXQgdG8gdGhlICdkZWZhdWx0JyBzdGF0ZSAobmFub19zdGF0ZV9kZWZhdXQuanMpIG9yIGNyZWF0ZSBhIG5ldyBzdGF0ZSBhbmQgb3ZlcnJpZGUgdGhpcyBmdW5jdGlvblxyXG5cclxuICAgIE5hbm9TdGF0ZU1hbmFnZXIuZXhlY3V0ZUFmdGVyVXBkYXRlQ2FsbGJhY2tzKGRhdGEpO1xyXG59O1xyXG5cclxuTmFub1N0YXRlQ2xhc3MucHJvdG90eXBlLmFsZXJ0VGV4dCA9IGZ1bmN0aW9uICh0ZXh0KSB7XHJcbiAgICAvLyBEbyBub3QgYWRkIGNvZGUgaGVyZSwgYWRkIGl0IHRvIHRoZSAnZGVmYXVsdCcgc3RhdGUgKG5hbm9fc3RhdGVfZGVmYXV0LmpzKSBvciBjcmVhdGUgYSBuZXcgc3RhdGUgYW5kIG92ZXJyaWRlIHRoaXMgZnVuY3Rpb25cclxuXHJcbiAgICBhbGVydCh0ZXh0KTtcclxufTtcclxuXG5cclxudmFyIE5hbm9UZW1wbGF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB2YXIgX3RlbXBsYXRlRGF0YSA9IHt9O1xyXG5cclxuICAgIHZhciBfdGVtcGxhdGVzID0ge307XHJcbiAgICB2YXIgX2NvbXBpbGVkVGVtcGxhdGVzID0ge307XHJcbiAgICBcclxuICAgIHZhciBfaGVscGVycyA9IHt9O1xyXG5cclxuICAgIHZhciBpbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIFdlIHN0b3JlIHRlbXBsYXRlRGF0YSBpbiB0aGUgYm9keSB0YWcsIGl0J3MgYXMgZ29vZCBhIHBsYWNlIGFzIGFueVxyXG4gICAgICAgIF90ZW1wbGF0ZURhdGEgPSAkKCdib2R5JykuZGF0YSgndGVtcGxhdGVEYXRhJyk7XHJcblxyXG4gICAgICAgIGlmIChfdGVtcGxhdGVEYXRhID09IG51bGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXBvcnRFcnJvcignRXJyb3I6IFRlbXBsYXRlIGRhdGEgZGlkIG5vdCBsb2FkIGNvcnJlY3RseS4nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxvYWROZXh0VGVtcGxhdGUoKTtcclxuICAgIH07XHJcblxyXG4gICAgdmFyIGxvYWROZXh0VGVtcGxhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gd2UgY291bnQgdGhlIG51bWJlciBvZiB0ZW1wbGF0ZXMgZm9yIHRoaXMgdWkgc28gdGhhdCB3ZSBrbm93IHdoZW4gdGhleSd2ZSBhbGwgYmVlbiByZW5kZXJlZFxyXG4gICAgICAgIHZhciB0ZW1wbGF0ZUNvdW50ID0gT2JqZWN0LnNpemUoX3RlbXBsYXRlRGF0YSk7XHJcblxyXG4gICAgICAgIGlmICghdGVtcGxhdGVDb3VudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgICQoZG9jdW1lbnQpLnRyaWdnZXIoJ3RlbXBsYXRlc0xvYWRlZCcpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBsb2FkIG1hcmt1cCBmb3IgZWFjaCB0ZW1wbGF0ZSBhbmQgcmVnaXN0ZXIgaXRcclxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gX3RlbXBsYXRlRGF0YSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICghX3RlbXBsYXRlRGF0YS5oYXNPd25Qcm9wZXJ0eShrZXkpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJC53aGVuKCQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBfdGVtcGxhdGVEYXRhW2tleV0sXHJcbiAgICAgICAgICAgICAgICAgICAgY2FjaGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAndGV4dCdcclxuICAgICAgICAgICAgICAgIH0pKVxyXG4gICAgICAgICAgICAgICAgLmRvbmUoIGZ1bmN0aW9uKHRlbXBsYXRlTWFya3VwKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlTWFya3VwICs9ICc8ZGl2IGNsYXNzPVwiY2xlYXJCb3RoXCI+PC9kaXY+JztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTmFub1RlbXBsYXRlLmFkZFRlbXBsYXRlKGtleSwgdGVtcGxhdGVNYXJrdXApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjYXRjaChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXBvcnRFcnJvcignRVJST1I6IEFuIGVycm9yIG9jY3VycmVkIHdoaWxlIGxvYWRpbmcgdGhlIFVJOiAnICsgZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBfdGVtcGxhdGVEYXRhW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgbG9hZE5leHRUZW1wbGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5mYWlsKCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVwb3J0RXJyb3IoJ0VSUk9SOiBMb2FkaW5nIHRlbXBsYXRlICcgKyBrZXkgKyAnKCcgKyBfdGVtcGxhdGVEYXRhW2tleV0gKyAnKSBmYWlsZWQhJyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBjb21waWxlVGVtcGxhdGVzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGZvciAodmFyIGtleSBpbiBfdGVtcGxhdGVzKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBfY29tcGlsZWRUZW1wbGF0ZXNba2V5XSA9IGRvVC50ZW1wbGF0ZShfdGVtcGxhdGVzW2tleV0sIG51bGwsIF90ZW1wbGF0ZXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgcmVwb3J0RXJyb3IoZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaW5pdDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpbml0KCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBhZGRUZW1wbGF0ZTogZnVuY3Rpb24gKGtleSwgdGVtcGxhdGVTdHJpbmcpIHtcclxuICAgICAgICAgICAgX3RlbXBsYXRlc1trZXldID0gdGVtcGxhdGVTdHJpbmc7XHJcbiAgICAgICAgfSxcclxuICAgICAgICB0ZW1wbGF0ZUV4aXN0czogZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RlbXBsYXRlcy5oYXNPd25Qcm9wZXJ0eShrZXkpO1xyXG4gICAgICAgIH0sXHJcblx0XHRyZXNldFRlbXBsYXRlOiBmdW5jdGlvbiAoa2V5KSB7XHJcblx0XHRcdF9jb21waWxlZFRlbXBsYXRlc1trZXldID0gbnVsbDtcclxuXHRcdH0sXHJcbiAgICAgICAgcGFyc2U6IGZ1bmN0aW9uICh0ZW1wbGF0ZUtleSwgZGF0YSkge1xyXG4gICAgICAgICAgICBpZiAoIV9jb21waWxlZFRlbXBsYXRlcy5oYXNPd25Qcm9wZXJ0eSh0ZW1wbGF0ZUtleSkgfHwgIV9jb21waWxlZFRlbXBsYXRlc1t0ZW1wbGF0ZUtleV0pIHtcclxuICAgICAgICAgICAgICAgIGlmICghX3RlbXBsYXRlcy5oYXNPd25Qcm9wZXJ0eSh0ZW1wbGF0ZUtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXBvcnRFcnJvcignRVJST1I6IFRlbXBsYXRlIFwiJyArIHRlbXBsYXRlS2V5ICsgJ1wiIGRvZXMgbm90IGV4aXN0IGluIF9jb21waWxlZFRlbXBsYXRlcyEnKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJzxoMj5UZW1wbGF0ZSBlcnJvciAoZG9lcyBub3QgZXhpc3QpPC9oMj4nO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29tcGlsZVRlbXBsYXRlcygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgX2NvbXBpbGVkVGVtcGxhdGVzW3RlbXBsYXRlS2V5XSAhPSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICByZXBvcnRFcnJvcihfY29tcGlsZWRUZW1wbGF0ZXNbdGVtcGxhdGVLZXldKTtcclxuICAgICAgICAgICAgICAgIHJlcG9ydEVycm9yKCdFUlJPUjogVGVtcGxhdGUgXCInICsgdGVtcGxhdGVLZXkgKyAnXCIgZmFpbGVkIHRvIGNvbXBpbGUhJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJzxoMj5UZW1wbGF0ZSBlcnJvciAoZmFpbGVkIHRvIGNvbXBpbGUpPC9oMj4nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBfY29tcGlsZWRUZW1wbGF0ZXNbdGVtcGxhdGVLZXldLmNhbGwodGhpcywgZGF0YVsnZGF0YSddLCBkYXRhWydjb25maWcnXSwgX2hlbHBlcnMpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYWRkSGVscGVyOiBmdW5jdGlvbiAoaGVscGVyTmFtZSwgaGVscGVyRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgaWYgKCFqUXVlcnkuaXNGdW5jdGlvbihoZWxwZXJGdW5jdGlvbikpIHtcclxuICAgICAgICAgICAgICAgIHJlcG9ydEVycm9yKCdOYW5vVGVtcGxhdGUuYWRkSGVscGVyIGZhaWxlZCB0byBhZGQgJyArIGhlbHBlck5hbWUgKyAnIGFzIGl0IGlzIG5vdCBhIGZ1bmN0aW9uLicpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuOyBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgX2hlbHBlcnNbaGVscGVyTmFtZV0gPSBoZWxwZXJGdW5jdGlvbjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGFkZEhlbHBlcnM6IGZ1bmN0aW9uIChoZWxwZXJzKSB7ICAgICAgICBcclxuICAgICAgICAgICAgZm9yICh2YXIgaGVscGVyTmFtZSBpbiBoZWxwZXJzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWhlbHBlcnMuaGFzT3duUHJvcGVydHkoaGVscGVyTmFtZSkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBOYW5vVGVtcGxhdGUuYWRkSGVscGVyKGhlbHBlck5hbWUsIGhlbHBlcnNbaGVscGVyTmFtZV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICByZW1vdmVIZWxwZXI6IGZ1bmN0aW9uIChoZWxwZXJOYW1lKSB7XHJcbiAgICAgICAgICAgIGlmIChoZWxwZXJzLmhhc093blByb3BlcnR5KGhlbHBlck5hbWUpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgX2hlbHBlcnNbaGVscGVyTmFtZV07XHJcbiAgICAgICAgICAgIH0gICBcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59KCk7XHJcblxuTmFub1RyYW5zaXRpb24gPSBmdW5jdGlvbigpIHtcclxuXHR2YXIgaWRDYWNoZSA9IHt9O1xyXG5cdHZhciBzdGF0ZUNhY2hlID0ge307XHJcblx0dmFyIGN1cnJlbnRJRCA9IDA7XHJcblxyXG5cdE5hbm9TdGF0ZU1hbmFnZXIuYWRkQmVmb3JlVXBkYXRlQ2FsbGJhY2soXCJUcmFuc2l0aW9uUmVzZXRcIiwgZnVuY3Rpb24odXBkYXRlRGF0YSkge1xyXG5cdFx0Y3VycmVudElEID0gMDtcclxuXHRcdHJldHVybiB1cGRhdGVEYXRhO1xyXG5cdH0pO1xyXG5cclxuXHQvLyBnZXQgYSB0cmFuc2l0aW9uIGhhbmRsZSwgYWRkIHRoaXMgdG8geW91ciBlbGVtZW50J3MgY2xhc3NcclxuXHR2YXIgX2FsbG9jSUQgPSBmdW5jdGlvbih1bmlxdWVJRCkge1xyXG5cdFx0aWYodW5pcXVlSUQgPT0gXCJfSGlkZV9NYXBfY2xvc2VcIikgLy8gaGFjayBiZWNhdXNlIG5hbm8gZG9lcyB3ZWlyZCB0aGluZyBvbiBmaXJzdCB0aWNrXHJcblx0XHRcdHJldHVybiBcInRyYW5zaXRpb25fX21hcFwiO1xyXG5cclxuXHRcdGlmKHVuaXF1ZUlEID09PSB1bmRlZmluZWQpXHJcblx0XHRcdHVuaXF1ZUlEID0gXCJcIjtcclxuXHRcdHJldHVybiBcInRyYW5zaXRpb25fX1wiICsgKGN1cnJlbnRJRCsrKSArIFwiX1wiICsgdW5pcXVlSUQudG9TdHJpbmcoKTtcclxuXHR9XHJcblxyXG5cdC8vIHNldHVwIHRyYW5zaXRpb25zLCBjYWxsIHRoaXMgZXhhY3RseSBvbmNlIGEgcmVmcmVzaCwgcmV0dXJucyBvbGQgc3RhdGVcclxuXHR2YXIgX3VwZGF0ZUVsZW1lbnQgPSBmdW5jdGlvbihpZCwgbmV3U3RhdGUsIG1lcmdlKSB7XHJcblx0XHR2YXIgY2FjaGUgPSBpZENhY2hlW2lkXTtcclxuXHRcdHZhciBvbGRTdGF0ZTtcclxuXHJcblx0XHRpZihtZXJnZSA9PT0gdW5kZWZpbmVkKVxyXG5cdFx0XHRtZXJnZSA9IGZhbHNlO1xyXG5cclxuXHRcdHZhciBlbGVtZW50ID0gJChcIi5cIiArIGlkKTtcclxuXHRcdGlmKGVsZW1lbnQubGVuZ3RoID09IDApXHJcblx0XHRcdHJldHVybiBuZXdTdGF0ZTtcclxuXHJcblx0XHQvLyB2ZXJpZnkgdGhhdCB0aGUgaWQgc3RpbGwgcG9pbnRzIHRvIHRoZSBzYW1lIHRoaW5nXHJcblx0XHQvLyBhbmQgZ2V0IG9sZCBzdGF0ZVxyXG5cdFx0ZWxlbWVudCA9IGVsZW1lbnRbMF07XHJcblx0XHRpZihjYWNoZVxyXG5cdFx0XHQmJiBjYWNoZS50YWdOYW1lID09IGVsZW1lbnQudGFnTmFtZVxyXG5cdFx0XHQmJiBjYWNoZS50YWJJbmRleCA9PSBlbGVtZW50LnRhYkluZGV4XHJcblx0XHRcdCYmIGNhY2hlLnBhcmVudCA9PSBlbGVtZW50LnBhcmVudE5vZGUudGFnTmFtZVxyXG5cdFx0XHQmJiBjYWNoZS5jaGlsZHJlbiA9PSBlbGVtZW50LmNoaWxkcmVuLmxlbmd0aCkge1xyXG5cclxuXHRcdFx0Ly8geWVwLCB0aGlzIGlzIGNvbnRpbnVhdGlvbiBvZiBvbGQgb2JqZWN0XHJcblx0XHRcdG9sZFN0YXRlID0gc3RhdGVDYWNoZVtpZF07XHJcblxyXG5cdFx0XHRpZihtZXJnZSkge1xyXG5cdFx0XHRcdHZhciBuZXdTdGF0ZUNvcHkgPSB7fTtcclxuXHRcdFx0XHRmb3IoayBpbiBvbGRTdGF0ZSlcclxuXHRcdFx0XHRcdG5ld1N0YXRlQ29weVtrXSA9IG9sZFN0YXRlW2tdO1xyXG5cdFx0XHRcdGZvcihrIGluIG5ld1N0YXRlKVxyXG5cdFx0XHRcdFx0bmV3U3RhdGVDb3B5W2tdID0gbmV3U3RhdGVba107XHJcblx0XHRcdFx0bmV3U3RhdGUgPSBuZXdTdGF0ZUNvcHk7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIG5vcCFcclxuXHRcdFx0b2xkU3RhdGUgPSBuZXdTdGF0ZTtcclxuXHJcblx0XHRcdGlkQ2FjaGVbaWRdID0ge1xyXG5cdFx0XHRcdHRhZ05hbWU6IGVsZW1lbnQudGFnTmFtZSxcclxuXHRcdFx0XHR0YWJJbmRleDogZWxlbWVudC50YWJJbmRleCxcclxuXHRcdFx0XHRwYXJlbnQ6IGVsZW1lbnQucGFyZW50Tm9kZS50YWdOYW1lLFxyXG5cdFx0XHRcdGNoaWxkcmVuOiBlbGVtZW50LmNoaWxkcmVuLmxlbmd0aFxyXG5cdFx0XHR9O1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIHNhdmUgbmV3IHN0YXRlIGZvciBuZXh0IGN5Y2xlXHJcblx0XHRzdGF0ZUNhY2hlW2lkXSA9IG5ld1N0YXRlO1xyXG5cdFx0cmV0dXJuIG9sZFN0YXRlO1xyXG5cdH1cclxuXHJcblx0dmFyIF9yZXNvbHZlVGFyZ2V0ID0gZnVuY3Rpb24oaWQsIGZpbHRlcikge1xyXG5cdFx0dmFyIGVsZW1lbnQgPSAkKFwiLlwiICsgaWQpO1xyXG5cclxuXHRcdHJldHVybiBmaWx0ZXIgPyAkKGVsZW1lbnQpLmNoaWxkcmVuKGZpbHRlcikgOiAkKGVsZW1lbnQpO1xyXG5cdH1cclxuXHJcblx0Ly8gYW5pbWF0ZSBhIHN0YXRlIGNoYW5nZVxyXG5cdHZhciBfYW5pbWF0ZUVsZW1lbnQgPSBmdW5jdGlvbihpZCwgZmlsdGVyLCBvbGRTdGF0ZSwgbmV3U3RhdGUsIHRpbWUpIHtcclxuXHRcdHZhciB0YXJnZXQgPSBfcmVzb2x2ZVRhcmdldChpZCwgZmlsdGVyKTtcclxuXHJcblx0XHRpZih0aW1lID09PSB1bmRlZmluZWQpXHJcblx0XHRcdHRpbWUgPSAxOTAwO1xyXG5cclxuXHRcdC8vICBkbyB0aGUgYW5pbWF0aW9uXHJcblx0XHR0YXJnZXRcclxuXHRcdFx0LmNzcyhvbGRTdGF0ZSlcclxuXHRcdFx0LmFuaW1hdGUobmV3U3RhdGUsIHtcclxuXHRcdFx0XHRkdXJhdGlvbjogdGltZSxcclxuXHRcdFx0XHRxdWV1ZTogZmFsc2VcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0Ly8gbWF5YmUgY2xhc3MgdG9vP1xyXG5cdFx0dmFyIG9sZENsYXNzID0gb2xkU3RhdGVbXCIuLmNsYXNzXCJdO1xyXG5cdFx0dmFyIG5ld0NsYXNzID0gbmV3U3RhdGVbXCIuLmNsYXNzXCJdO1xyXG5cdFx0aWYob2xkQ2xhc3MgJiYgbmV3Q2xhc3MpIHtcclxuXHRcdFx0dGFyZ2V0LmFkZENsYXNzKG9sZENsYXNzKTtcclxuXHRcdFx0aWYob2xkQ2xhc3MgIT0gbmV3Q2xhc3MpIHtcclxuXHRcdFx0XHQvLyBzdHJpcCBjbGFzc2VzIHRoYXQgYXJlIGluIGJvdGhcclxuXHRcdFx0XHR2YXIgb2xkQ2xhc3MgPSBvbGRDbGFzcy5zcGxpdChcIiBcIik7XHJcblx0XHRcdFx0dmFyIG5ld0NsYXNzID0gbmV3Q2xhc3Muc3BsaXQoXCIgXCIpO1xyXG5cclxuXHRcdFx0XHR2YXIgZmlsdGVyZWRPbGRDbGFzcyA9IG9sZENsYXNzLmZpbHRlcihmdW5jdGlvbih4KSB7IHJldHVybiBuZXdDbGFzcy5pbmRleE9mKHgpID09IC0xOyB9KTtcclxuXHRcdFx0XHR2YXIgZmlsdGVyZWROZXdDbGFzcyA9IG5ld0NsYXNzLmZpbHRlcihmdW5jdGlvbih4KSB7IHJldHVybiBvbGRDbGFzcy5pbmRleE9mKHgpID09IC0xOyB9KTtcclxuXHJcblx0XHRcdFx0b2xkQ2xhc3MgPSBmaWx0ZXJlZE9sZENsYXNzLmpvaW4oXCIgXCIpO1xyXG5cdFx0XHRcdG5ld0NsYXNzID0gZmlsdGVyZWROZXdDbGFzcy5qb2luKFwiIFwiKTtcclxuXHJcblx0XHRcdFx0dGFyZ2V0LnN3aXRjaENsYXNzKG9sZENsYXNzLCBuZXdDbGFzcywge1xyXG5cdFx0XHRcdFx0ZHVyYXRpb246IHRpbWUsXHJcblx0XHRcdFx0XHRxdWV1ZTogZmFsc2VcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0dmFyIF9hbmltYXRlVGV4dFZhbHVlID0gZnVuY3Rpb24oaWQsIGZpbHRlciwgcGxhY2VzLCBvbGRWYWx1ZSwgbmV3VmFsdWUsIHRpbWUpIHtcclxuXHRcdHZhciB0YXJnZXQgPSBfcmVzb2x2ZVRhcmdldChpZCwgZmlsdGVyKTtcclxuXHJcblx0XHRpZih0aW1lID09PSB1bmRlZmluZWQpXHJcblx0XHRcdHRpbWUgPSAxOTAwO1xyXG5cclxuXHRcdGlmKHBsYWNlcyA9PSAtMSlcclxuXHRcdFx0dGFyZ2V0LnRleHQob2xkVmFsdWUudG9TdHJpbmcoKSk7Ly9vbGRWYWx1ZS50b1N0cmluZygpKTtcclxuXHRcdGVsc2VcclxuXHRcdFx0dGFyZ2V0LnRleHQob2xkVmFsdWUudG9GaXhlZChwbGFjZXMpKTsvL29sZFZhbHVlLnRvRml4ZWQocGxhY2VzKSk7XHJcblxyXG5cdFx0aWYob2xkVmFsdWUgIT0gbmV3VmFsdWUpXHJcblx0XHRcdHRhcmdldC5hbmltYXRlKHtpOiAxfSwge1xyXG5cdFx0XHRcdGR1cmF0aW9uOiB0aW1lLFxyXG5cdFx0XHRcdHF1ZXVlOiBmYWxzZSxcclxuXHRcdFx0XHRzdGVwOiBmdW5jdGlvbihub3csIGZ4KSB7XHJcblx0XHRcdFx0XHRpZihwbGFjZXMgPT0gLTEpIHtcclxuXHRcdFx0XHRcdFx0ZnguZWxlbS50ZXh0Q29udGVudCA9IChvbGRWYWx1ZSAqICgxIC0gbm93KSArIG5ld1ZhbHVlICogbm93KS50b1N0cmluZygpO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0ZnguZWxlbS50ZXh0Q29udGVudCA9IChvbGRWYWx1ZSAqICgxIC0gbm93KSArIG5ld1ZhbHVlICogbm93KS50b0ZpeGVkKHBsYWNlcyk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHZhciBfYW5pbWF0ZUhvdmVyID0gZnVuY3Rpb24oaWQsIGZpbHRlciwgb2xkU3RhdGUsIG5ld1N0YXRlLCB0aW1lKSB7XHJcblx0XHR2YXIgdGFyZ2V0ID0gX3Jlc29sdmVUYXJnZXQoaWQsIGZpbHRlcik7XHJcblxyXG5cdFx0aWYodGltZSA9PT0gdW5kZWZpbmVkKVxyXG5cdFx0XHR0aW1lID0gMjAwO1xyXG5cclxuXHRcdGlmKG9sZFN0YXRlW1wiLi5ob3ZlclwiXSlcclxuXHRcdFx0dGFyZ2V0LmFkZENsYXNzKFwiaG92ZXJcIik7XHJcblxyXG5cdFx0dGFyZ2V0LmhvdmVyKFxyXG5cdFx0XHRmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR0YXJnZXQuc3RvcCgxLCAxKS5hZGRDbGFzcyhcImhvdmVyXCIsIHtcclxuXHRcdFx0XHRcdGR1cmF0aW9uOiB0aW1lLFxyXG5cdFx0XHRcdFx0cXVldWU6IGZhbHNlXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0X3VwZGF0ZUVsZW1lbnQoaWQsIHtcIi4uaG92ZXJcIjogdHJ1ZX0sIHRydWUpO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR0YXJnZXQuc3RvcCgxLCAxKS5yZW1vdmVDbGFzcyhcImhvdmVyXCIsIHtcclxuXHRcdFx0XHRcdGR1cmF0aW9uOiB0aW1lLFxyXG5cdFx0XHRcdFx0cXVldWU6IGZhbHNlXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0X3VwZGF0ZUVsZW1lbnQoaWQsIHtcIi4uaG92ZXJcIjogZmFsc2V9LCB0cnVlKTtcclxuXHRcdFx0fVxyXG5cdFx0KTtcclxuXHR9XHJcblxyXG5cdC8vIGhlbHBlciBmb3IgbW9zdCBjb21tb24gdXNlXHJcblx0dmFyIF90cmFuc2l0aW9uRWxlbWVudCA9IGZ1bmN0aW9uKGlkLCBmaWx0ZXIsIHN0YXRlLCB0aW1lKSB7XHJcblx0XHR2YXIgb2xkID0gX3VwZGF0ZUVsZW1lbnQoaWQsIHN0YXRlKTtcclxuXHRcdF9hbmltYXRlRWxlbWVudChpZCwgZmlsdGVyLCBvbGQsIHN0YXRlLCB0aW1lKTtcclxuXHRcdHJldHVybiBvbGQ7XHJcblx0fVxyXG5cclxuXHRyZXR1cm4ge1xyXG5cdFx0YWxsb2NJRDogX2FsbG9jSUQsXHJcblx0XHR1cGRhdGVFbGVtZW50OiBfdXBkYXRlRWxlbWVudCxcclxuXHRcdGFuaW1hdGVFbGVtZW50OiBfYW5pbWF0ZUVsZW1lbnQsXHJcblx0XHRhbmltYXRlVGV4dFZhbHVlOiBfYW5pbWF0ZVRleHRWYWx1ZSxcclxuXHRcdGFuaW1hdGVIb3ZlcjogX2FuaW1hdGVIb3ZlcixcclxuXHRcdHRyYW5zaXRpb25FbGVtZW50OiBfdHJhbnNpdGlvbkVsZW1lbnRcclxuXHR9O1xyXG59KCk7XHJcblxudmFyIE5hbm9XaW5kb3cgPSBmdW5jdGlvbiAoKSBcclxue1xyXG4gICAgdmFyIG9mZnNldFgsIG9mZnNldFk7XHJcbiAgICB2YXIgbWluV2lkdGggPSAyODA7XHJcbiAgICB2YXIgbWluSGVpZ2h0ID0gMTQwO1xyXG5cclxuICAgIHZhciBzZXRQb3MgPSBmdW5jdGlvbiAoeCwgeSkge1xyXG4gICAgICAgIE5hbm9VdGlsaXR5LndpbnNldChcInBvc1wiLCB4ICsgXCIsXCIgKyB5KTtcclxuICAgIH07XHJcbiAgICB2YXIgc2V0U2l6ZSA9IGZ1bmN0aW9uICh3LCBoKSB7XHJcbiAgICAgICBOYW5vVXRpbGl0eS53aW5zZXQoXCJzaXplXCIsIHcgKyBcIixcIiArIGgpO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgb2JleUxpbWl0cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBBbGlnbm1lbnQgKFRoYW5rcyBHb29uIChDQyBCWS1OQy1TQSB2MykpXHJcbiAgICAgICAgdmFyIHByZXZYID0gd2luZG93LnNjcmVlbkxlZnQ7XHJcbiAgICAgICAgdmFyIHByZXZZID0gd2luZG93LnNjcmVlblRvcDtcclxuICAgICAgICAvL1B1dCB0aGUgd2luZG93IGF0IHRvcCBsZWZ0XHJcbiAgICAgICAgc2V0UG9zKDAsIDApO1xyXG4gICAgICAgIC8vR2V0IGFueSBvZmZzZXRzIHN0aWxsIHByZXNlbnRcclxuICAgICAgICBvZmZzZXRYID0gd2luZG93LnNjcmVlbkxlZnQ7XHJcbiAgICAgICAgb2Zmc2V0WSA9IHdpbmRvdy5zY3JlZW5Ub3A7XHJcbiAgICAgICAgLy8gQ2xhbXAgaXQgdG8gdGhlIHZpZXdwb3J0XHJcbiAgICAgICAgdmFyIGNsYW1wZWRYID0gcHJldlggLSBvZmZzZXRYO1xyXG4gICAgICAgIHZhciBjbGFtcGVkWSA9IHByZXZZIC0gb2Zmc2V0WTtcclxuICAgICAgICBjbGFtcGVkWCA9IGNsYW1wZWRYIDwgb2Zmc2V0WCA/IDAgOiBjbGFtcGVkWDtcclxuICAgICAgICBjbGFtcGVkWSA9IGNsYW1wZWRZIDwgb2Zmc2V0WSA/IDAgOiBjbGFtcGVkWTtcclxuICAgICAgICAvLyBQdXQgaXQgYmFja1xyXG4gICAgICAgIHNldFBvcyhjbGFtcGVkWCwgY2xhbXBlZFkpXHJcbiAgICAgICAgLy8gRG9uZSB3aXRoIGFsaWdubWVudFxyXG5cclxuICAgICAgICAvLyBTaXplIGNvbnN0cmFpbnRzXHJcbiAgICAgICAgdmFyIGhlaWdodCA9ICQod2luZG93KS5oZWlnaHQoKTtcclxuICAgICAgICB2YXIgd2lkdGggPSAkKHdpbmRvdykud2lkdGgoKTtcclxuICAgICAgICBpZigkKFwiYm9keVwiKS5oZWlnaHQoKSA+PSAoJCh3aW5kb3cpLmhlaWdodCgpIC0gMjkpKSB7IC8vIFNjcm9sbGJhciEhIVxyXG4gICAgICAgICAgICB3aWR0aCArPSAxNyAvLyAxNyBwaXhlbHMgaXMgdGhlIHdpZHRoIG9mIGEgc2Nyb2xsYmFyXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKCQoZG9jdW1lbnQpLndpZHRoKCkgPiAkKHdpbmRvdykud2lkdGgoKSkgeyAvLyBIb3Jpem9udGFsIFNjcm9sbGJhciEhIVxyXG4gICAgICAgICAgICBoZWlnaHQgKz0gMTdcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG5ld1dpZHRoID0gTWF0aC5tYXgobWluV2lkdGgsIHdpZHRoKTtcclxuICAgICAgICB2YXIgbmV3SGVpZ2h0ID0gTWF0aC5tYXgobWluSGVpZ2h0LCBoZWlnaHQpO1xyXG4gICAgICAgIHNldFNpemUobmV3V2lkdGgsIG5ld0hlaWdodCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBpbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8qIFdlIHdhbnQgbmFub1VJIHdpbmRvd3MgdG8gb2JleSB0aGUgbGltaXRzIHJlZ2FyZGxlc3MsIFxyXG4gICAgICAgIGFuZCB3ZSdyZSBoaWphY2tpbmcgdGhpcyBsaWJyYXJ5IHRvIGRvIHNvLCBldmVuIGlmIGZhbmN5IG1vZGUgaXMgdHVybmVkIG9mZi5cclxuICAgICAgICBUbyBiZSBmYWlyLCB0aGlzIGRvZXNuJ3Qgc3RvcCB0aGUgdXNlciBmcm9tIHNocmlua2luZyB0aGVtIHBhc3QgdGhlaXIgaW50ZW5kZWQgbGltaXQgd2hlbiB0aGV5J3JlIG5vdCBpbiBmYW5jeSBtb2RlLCBcclxuICAgICAgICBidXQgaXQncyBhIG5pY2Ugc2FmZWd1YXJkIGFnYWluc3Qgc2hvZGRpbHktY29kZWQgVUlzLiAqL1xyXG4gICAgICAgIG9iZXlMaW1pdHMoKTtcclxuXHJcbiAgICAgICAgaWYoIU5hbm9TdGF0ZU1hbmFnZXIuZ2V0RGF0YSgpLmNvbmZpZy51c2VyLmZhbmN5KSB7XHJcbiAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZmFuY3lDaHJvbWUoKTtcclxuICAgICAgICAvLyAuLi4gYnV0IHdoZW4gZmFuY3kgbW9kZSBpcyB0dXJuZWQgb24sIHdlIGhhdmUgdG8gZG8gaXQgYWdhaW4gdG8gbWFrZSBzdXJlXHJcbiAgICAgICAgLy8gdGhhdCB0aGUgd2luZG93IG9mZnNldHMgYXJlIGNvcnJlY3QgZm9yIHRoZSBzbGlnaHRseSBkaWZmZXJlbnQgd2luZG93LlxyXG4gICAgICAgIG9iZXlMaW1pdHMoKTtcclxuIFxyXG4gICAgICAgIGF0dGFjaEJ1dHRvbnMoKTtcclxuICAgICAgICBhdHRhY2hEcmFnQW5kUmVzaXplKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBmYW5jeUNocm9tZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIE5hbm9VdGlsaXR5LndpbnNldChcInRpdGxlYmFyXCIsIDApO1xyXG4gICAgICAgIE5hbm9VdGlsaXR5LndpbnNldChcImNhbi1yZXNpemVcIiwgMCk7XHJcbiAgICAgICAgTmFub1V0aWxpdHkud2luc2V0KFwidHJhbnNwYXJlbnQtY29sb3JcIiwgXCIjRkYwMEU0XCIpXHJcbiAgICAgICAgJCgnLmZhbmN5Jykuc2hvdygpO1xyXG4gICAgICAgICQoJyN1aVRpdGxlRmx1ZmYnKS5jc3MoXCJyaWdodFwiLCBcIjcycHhcIik7XHJcbiAgICAgICAgJCgnLnN0YXR1c2ljb24nKS5jc3MoXCJsZWZ0XCIsIFwiMzRweFwiKTtcclxuICAgICAgICAkKCcjdWlUaXRsZVRleHQnKS5jc3MoXCJsZWZ0XCIsIFwiNjZweFwiKTtcclxuICAgIH07XHJcblxyXG4gICAgdmFyIGF0dGFjaEJ1dHRvbnMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgY2xvc2UgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIE5hbm9VdGlsaXR5LmNsb3NlKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgbWluaW1pemUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIE5hbm9VdGlsaXR5LndpbnNldChcImlzLW1pbmltaXplZFwiLCBcInRydWVcIik7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAkKFwiLmNsb3NlXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIGNsb3NlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChcIi5taW5pbWl6ZVwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBtaW5pbWl6ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgYXR0YWNoRHJhZ0FuZFJlc2l6ZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8qIERyYWcgKi9cclxuICAgICAgICAkKFwiYm9keVwiKS5vbihcIm1vdXNlbW92ZVwiLCBcIiN1aVRpdGxlV3JhcHBlclwiLCBmdW5jdGlvbiAoZXYpIHtcclxuICAgICAgICAgICAgZHJhZyhldik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQoXCJib2R5XCIpLm9uKFwibW91c2Vkb3duXCIsIFwiI3VpVGl0bGVXcmFwcGVyXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZHJhZ2dpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICBpZiAoJCh0aGlzKVswXS5zZXRDYXB0dXJlKSB7ICQodGhpcylbMF0uc2V0Q2FwdHVyZSgpOyB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQoXCJib2R5XCIpLm9uKFwibW91c2V1cFwiLCBcIiN1aVRpdGxlV3JhcHBlclwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGRyYWdnaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmICgkKHRoaXMpWzBdLnJlbGVhc2VDYXB0dXJlKSB7ICQodGhpcylbMF0ucmVsZWFzZUNhcHR1cmUoKTsgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvKiBSZXNpemUgKi9cclxuICAgICAgICAkKFwiYm9keVwiKS5vbihcIm1vdXNlbW92ZVwiLCBcImRpdi5yZXNpemVBcmVhXCIsIGZ1bmN0aW9uIChldikge1xyXG4gICAgICAgICAgICByZXNpemUuY2FsbCh0aGlzLCBldik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQoXCJib2R5XCIpLm9uKFwibW91c2Vkb3duXCIsIFwiZGl2LnJlc2l6ZUFyZWFcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXNpemluZyA9IHRydWU7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNldENhcHR1cmUpIHsgdGhpcy5zZXRDYXB0dXJlKCk7IH1cclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICAkKFwiYm9keVwiKS5vbihcIm1vdXNldXBcIiwgXCJkaXYucmVzaXplQXJlYVwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJlc2l6aW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnJlbGVhc2VDYXB0dXJlKSB7IHRoaXMucmVsZWFzZUNhcHR1cmUoKTsgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKiBTdG9sZW4gR29vbiBjb2RlIGZ0dyAoQ0MgQlktTkMtU0EgdjMuMCkgKi9cclxuICAgIHZhciBkcmFnZ2luZywgbGFzdFgsIGxhc3RZO1xyXG4gICAgdmFyIGRyYWcgPSBmdW5jdGlvbiAoZXYpIHtcclxuICAgICAgICBldiA9IGV2IHx8IHdpbmRvdy5ldmVudDtcclxuICAgICAgICBpZiAobGFzdFggPT09IGV2LnNjcmVlblggJiYgbGFzdFkgPT09IGV2LnNjcmVlblkpIHtcclxuICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAobGFzdFggPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBsYXN0WCA9IGV2LnNjcmVlblg7XHJcbiAgICAgICAgICAgIGxhc3RZID0gZXYuY2xpZW50WTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChkcmFnZ2luZykge1xyXG4gICAgICAgICAgICB2YXIgZHggPSAoZXYuc2NyZWVuWCAtIGxhc3RYKTtcclxuICAgICAgICAgICAgdmFyIGR5ID0gKGV2LnNjcmVlblkgLSBsYXN0WSk7XHJcbiAgICAgICAgICAgIGR4ICs9IHdpbmRvdy5zY3JlZW5MZWZ0IC0gb2Zmc2V0WDtcclxuICAgICAgICAgICAgZHkgKz0gd2luZG93LnNjcmVlblRvcCAtIG9mZnNldFk7XHJcblxyXG4gICAgICAgICAgICBzZXRQb3MoZHgsIGR5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxhc3RYID0gZXYuc2NyZWVuWDtcclxuICAgICAgICBsYXN0WSA9IGV2LnNjcmVlblk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHJlc2l6aW5nLCByZXNpemVXb3JraW5nXHJcbiAgICB2YXIgcmVzaXplID0gZnVuY3Rpb24gKGV2KSB7XHJcbiAgICAgICAgaWYgKHJlc2l6ZVdvcmtpbmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmVzaXplV29ya2luZyA9IHRydWU7XHJcbiAgICAgICAgZXYgPSBldiB8fCB3aW5kb3cuZXZlbnQ7XHJcblxyXG4gICAgICAgIGlmIChsYXN0WCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGxhc3RYID0gZXYuc2NyZWVuWCAtIG9mZnNldFg7XHJcbiAgICAgICAgICAgIGxhc3RZID0gZXYuc2NyZWVuWSAtIG9mZnNldFk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAocmVzaXppbmcpIHtcclxuICAgICAgICAgICAgdmFyIHdpZHRoID0gJCh3aW5kb3cpLndpZHRoKCk7XHJcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSAkKHdpbmRvdykuaGVpZ2h0KCk7XHJcblxyXG4gICAgICAgICAgICBpZigkKFwiYm9keVwiKS5oZWlnaHQoKSA+PSAoJCh3aW5kb3cpLmhlaWdodCgpIC0gMjkpKSB7IC8vIFZlcnRpY2FsIFNjcm9sbGJhciEhIVxyXG4gICAgICAgICAgICAgICAgd2lkdGggKz0gMTcgLy8gMTcgcGl4ZWxzIGlzIHRoZSB3aWR0aCBvZiBhIHNjcm9sbGJhclxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZigkKGRvY3VtZW50KS53aWR0aCgpID4gJCh3aW5kb3cpLndpZHRoKCkpIHsgLy8gSG9yaXpvbnRhbCBTY3JvbGxiYXIhISFcclxuICAgICAgICAgICAgICAgIGhlaWdodCArPSAxN1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgcnggPSBOdW1iZXIoJCh0aGlzKS5hdHRyKFwicnhcIikpO1xyXG4gICAgICAgICAgICB2YXIgcnkgPSBOdW1iZXIoJCh0aGlzKS5hdHRyKFwicnlcIikpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdmFyIGR4ID0gKChldi5zY3JlZW5YLW9mZnNldFgpIC0gbGFzdFgpO1xyXG4gICAgICAgICAgICB2YXIgZHkgPSAoKGV2LnNjcmVlblktb2Zmc2V0WSkgLSBsYXN0WSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB2YXIgbmV3WCA9IHdpbmRvdy5zY3JlZW5MZWZ0IC0gb2Zmc2V0WDtcclxuICAgICAgICAgICAgdmFyIG5ld1kgPSB3aW5kb3cuc2NyZWVuVG9wIC0gb2Zmc2V0WTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHZhciBuZXdXID0gd2lkdGggKyAoZHggKiByeCk7XHJcbiAgICAgICAgICAgIGlmKHJ4ID09IC0xKXtcclxuICAgICAgICAgICAgICAgIG5ld1ggKz0gZHg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIG5ld0ggPSBoZWlnaHQgKyAoZHkgKiByeSk7XHJcbiAgICAgICAgICAgIGlmKHJ5ID09IC0xKXtcclxuICAgICAgICAgICAgICAgIG5ld1kgKz0gZHk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG5ld1cgPSBNYXRoLm1heChtaW5XaWR0aCwgbmV3Vyk7XHJcbiAgICAgICAgICAgIG5ld0ggPSBNYXRoLm1heChtaW5IZWlnaHQsIG5ld0gpOyBcclxuICAgICAgICAgICAgc2V0UG9zKG5ld1gsIG5ld1kpO1xyXG4gICAgICAgICAgICBzZXRTaXplKG5ld1csIG5ld0gpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGFzdFggPSBldi5zY3JlZW5YIC0gb2Zmc2V0WDtcclxuICAgICAgICBsYXN0WSA9IGV2LnNjcmVlblkgLSBvZmZzZXRZO1xyXG5cclxuICAgICAgICByZXNpemVXb3JraW5nID0gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgLyogRW5kIHN0b2xlbiBHb29uIGNvZGUgKi9cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uICgpIHsgLy9jcmF6eSBidXQgZW5zdXJlcyBjb3JyZWN0IGxvYWQgb3JkZXIgKG5hbm91dGlsIC0gbmFub3RlbXBsYXRlIC0gbmFub3dpbmRvdylcclxuICAgICAgICAgICAgJChkb2N1bWVudCkub24oJ3RlbXBsYXRlc0xvYWRlZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGluaXQoKTtcclxuICAgICAgICAgICAgfSk7IFxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn0oKTsiXX0=
