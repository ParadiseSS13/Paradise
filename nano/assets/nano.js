var NanoUtility=function(){var a={};return{init:function(){var e=$("body");a=e.data("urlParameters")},generateHref:function(e){var t="?";for(var n in a)a.hasOwnProperty(n)&&("?"!==t&&(t+=";"),t+=n+"="+a[n]);for(var n in e)e.hasOwnProperty(n)&&("?"!==t&&(t+=";"),t+=n+"="+e[n]);return t},winset:function(e,t,n){var a;return null==n&&(n=NanoStateManager.getData().config.window.ref),(a={})[n+"."+e]=t,location.href=NanoUtility.href("winset",a)},extend:function(n,a){return Object.keys(a).forEach(function(e){var t;return(t=a[e])&&"[object Object]"===Object.prototype.toString.call(t)?(n[e]=n[e]||{},NanoUtility.extend(n[e],t)):n[e]=t}),n},href:function(e,t){return null==e&&(e=""),null==t&&(t={}),e=new Url("byond://"+e),NanoUtility.extend(e.query,t),e},close:function(){var e;return e={command:"nanoclose "+a.src},this.winset("is-visible","false"),location.href=NanoUtility.href("winset",e)}}}();"undefined"==typeof jQuery&&reportError("ERROR: Javascript library failed to load!"),"undefined"==typeof doT&&reportError("ERROR: Template engine failed to load!");var reportError=function(e){window.location="byond://?nano_err="+encodeURIComponent(e),alert(e)};$(document).ready(function(){NanoUtility.init(),NanoStateManager.init(),NanoTemplate.init(),NanoWindow.init()}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length,n=Number(arguments[1])||0;for((n=n<0?Math.ceil(n):Math.floor(n))<0&&(n+=t);n<t;n++)if(n in this&&this[n]===e)return n;return-1}),String.prototype.format||(String.prototype.format=function(n){return this.replace(String.prototype.format.regex,function(e){var t=parseInt(e.substring(1,e.length-1));return 0<=t?n[t]:-1===t?"{":-2===t?"}":""})},String.prototype.format.regex=new RegExp("{-?[0-9]+}","g")),Object.size=function(e){var t=0;for(var n in e)e.hasOwnProperty(n)&&t++;return t},window.console||(window.console={log:function(e){return!1}}),String.prototype.toTitleCase=function(){var r=/^(a|an|and|as|at|but|by|en|for|if|in|of|on|or|the|to|vs?\.?|via)$/i;return this.replace(/([^\W_]+[^\s-]*) */g,function(e,t,n,a){return 0<n&&n+t.length!==a.length&&-1<t.search(r)&&":"!==a.charAt(n-2)&&a.charAt(n-1).search(/[^\s-]/)<0?e.toLowerCase():-1<t.substr(1).search(/[A-Z]|\../)?e:e.charAt(0).toUpperCase()+e.substr(1)})},$.ajaxSetup({cache:!1}),Function.prototype.inheritsFrom=function(e){return this.prototype=new e,(this.prototype.constructor=this).prototype.parent=e.prototype,this},String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),String.prototype.ckey||(String.prototype.ckey=function(){return this.replace(/\W/g,"").toLowerCase()}),NanoStateManager=function(){function t(e,t){for(var n in e)e.hasOwnProperty(n)&&jQuery.isFunction(e[n])&&(t=e[n].call(this,t));return t}var n=!1,a=null,r={},o={},i={},s=null,l=function(e){null!=s&&(!1!==(e=s.onBeforeUpdate(e))?(a=e,s.onUpdate(a),s.onAfterUpdate(a)):reportError("data is false, return"))};return{init:function(){!function(){null!=(a=$("body").data("initialData"))&&a.hasOwnProperty("config")&&a.hasOwnProperty("data")||reportError("Error: Initial data did not load correctly."+JSON.stringify(a));var e="default";a.config.hasOwnProperty("stateKey")&&a.config.stateKey&&(e=a.config.stateKey.toLowerCase()),NanoStateManager.setCurrentState(e),$(document).on("templatesLoaded",function(){l(a),n=!0})}()},receiveUpdateData:function(e){!function(e){var t;try{t=jQuery.parseJSON(e)}catch(e){return reportError("recieveUpdateData failed. <br>Error name: "+e.name+"<br>Error Message: "+e.message)}t.hasOwnProperty("data")||(a&&a.hasOwnProperty("data")?t.data=a.data:t.data={}),n?l(t):a=t}(e)},addBeforeUpdateCallback:function(e,t){r[e]=t},addBeforeUpdateCallbacks:function(e){for(var t in e)e.hasOwnProperty(t)&&NanoStateManager.addBeforeUpdateCallback(t,e[t])},removeBeforeUpdateCallback:function(e){r.hasOwnProperty(e)&&delete r[e]},executeBeforeUpdateCallbacks:function(e){return t(r,e)},addAfterUpdateCallback:function(e,t){o[e]=t},addAfterUpdateCallbacks:function(e){for(var t in e)e.hasOwnProperty(t)&&NanoStateManager.addAfterUpdateCallback(t,e[t])},removeAfterUpdateCallback:function(e){o.hasOwnProperty(e)&&delete o[e]},executeAfterUpdateCallbacks:function(e){return t(o,e)},addState:function(e){e instanceof NanoStateClass?e.key?i[e.key]=e:reportError("ERROR: Attempted to add a state with an invalid stateKey"):reportError("ERROR: Attempted to add a state which is not instanceof NanoStateClass")},setCurrentState:function(e){if(void 0===e||!e)return reportError("ERROR: No state key was passed!"),!1;if(!i.hasOwnProperty(e))return reportError("ERROR: Attempted to set a current state which does not exist: "+e),!1;var t=s;return s=i[e],null!=t&&t.onRemove(s),s.onAdd(t),!0},getCurrentState:function(){return s},getData:function(){return a}}}(),NanoBaseCallbacks=function(){var a=!0,t={},n={status:function(n){var e;return 2==n.config.status?(e="good",$(".linkActive").removeClass("inactive")):(e=1==n.config.status?"average":"bad",$(".linkActive").addClass("inactive")),$(".statusicon").removeClass("good bad average").addClass(e),$(".linkActive").stopTime("linkPending"),$(".linkActive").removeClass("linkPending"),$(".linkActive").off("click").on("click",function(e){e.preventDefault();var t=$(this).data("href");null!=t&&a&&(a=!1,$("body").oneTime(300,"enableClick",function(){a=!0}),2==n.config.status&&$(this).oneTime(300,"linkPending",function(){$(this).addClass("linkPending")}),window.location.href=t)}),n},nanomap:function(e){return $(".mapIcon").off("mouseenter mouseleave").on("mouseenter",function(e){$("#uiMapTooltip").html($(this).children(".tooltip").html()).show().stopTime().oneTime(5e3,"hideTooltip",function(){$(this).fadeOut(500)})}),$(".zoomLink").off("click").on("click",function(e){e.preventDefault();var t=$(this).data("zoomLevel"),n=$("#uiMap"),a=n.width()*t,r=n.height()*t;n.css({zoom:t,left:"50%",top:"50%",marginLeft:"-"+Math.floor(a/2)+"px",marginTop:"-"+Math.floor(r/2)+"px"})}),$("#uiMapImage").attr("src",e.config.map+"_nanomap_z"+e.config.mapZLevel+".png"),e}};return{addCallbacks:function(){NanoStateManager.addBeforeUpdateCallbacks(t),NanoStateManager.addAfterUpdateCallbacks(n)},removeCallbacks:function(){for(var e in t)t.hasOwnProperty(e)&&NanoStateManager.removeBeforeUpdateCallback(e);for(var e in n)n.hasOwnProperty(e)&&NanoStateManager.removeAfterUpdateCallback(e)}}}(),NanoBaseHelpers=function(){var t={syndicateMode:function(){return $(".mainBG").css("background","url('syndicate.png') no-repeat fixed center/50% 50%, linear-gradient(to bottom, #8f1414 0%, #4B0A0A 100%) no-repeat fixed center;"),$("#uiTitleFluff").css("background-image","url('uiTitleFluff-Syndicate.png')"),$("#uiTitleFluff").css("background-position","50% 50%"),$("#uiTitleFluff").css("background-repeat","no-repeat"),""},combine:function(e,t){return e&&t?e.concat(t):e||t},dump:function(e){return JSON.stringify(e)},link:function(e,t,n,a,r,o){var i="",s="noIcon";void 0!==t&&t&&(i='<div class="uiLinkPendingIcon"></div><i class="fa fa-fw fa-'+t+'"></i>',s="hasIcon"),void 0!==r&&r||(r="link");var l="";void 0!==o&&o&&(l='id="'+o+'"');var c=NanoTransition.allocID(l+"_"+e.toString().replace(/[^a-z0-9_]/gi,"_")+"_"+t);return void 0!==a&&a?'<div unselectable="on" class="link '+s+" "+c+'" '+l+">"+i+e+'</div><script>$(function() { var newState = {"..class": "'+r+" "+a+'"}; var old = NanoTransition.transitionElement("'+c+'", null, newState, 200); NanoTransition.animateHover("'+c+'", null, old, newState); });<\/script>':'<div unselectable="on" class="linkActive '+s+" "+c+'" data-href="'+NanoUtility.generateHref(n)+'" '+l+">"+i+e+'</div><script>$(function() { var newState = {"..class": "'+r+'"}; var old = NanoTransition.transitionElement("'+c+'", null, newState, 200); NanoTransition.animateHover("'+c+'", null, old, newState); });<\/script>'},xor:function(e,t){return e^t},precisionRound:function(e,t){if(0==t)return Math.round(number);var n=Math.pow(10,t);return Math.round(e*n)/n},round:function(e){return Math.round(e)},fixed:function(e){return Math.round(10*e)/10},floor:function(e){return Math.floor(e)},ceil:function(e){return Math.ceil(e)},string:function(){if(0==arguments.length)return"";if(1==arguments.length)return arguments[0];if(1<arguments.length){stringArgs=[];for(var e=1;e<arguments.length;e++)stringArgs.push(arguments[e]);return arguments[0].format(stringArgs)}return""},formatNumber:function(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")},capitalizeFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},displayBar:function(e,t,n,a,r){t<n?e<t?e=t:n<e&&(e=n):t<e?e=t:e<n&&(e=n),void 0!==a&&a||(a=""),void 0!==r&&r||(r="");var o=Math.round((e-t)/(n-t)*100),i=NanoTransition.allocID(t+"_"+n);return'<div class="displayBar '+i+" "+a+'"><div class="displayBarFill"></div><div class="displayBarText '+a+'">'+r+'</div></div><script>$(function() { NanoTransition.transitionElement("'+i+'", ".displayBarFill", {width: "'+o+'%", "..class": "'+a+'"}); });<\/script>'},dangerToClass:function(e){return 0==e?"good":1==e?"average":"bad"},dangerToSpan:function(e){return 0==e?'"<span class="good">Good</span>"':1==e?'"<span class="average">Minor Alert</span>"':'"<span class="bad">Major Alert</span>"'},generateHref:function(e){var t=$("body");_urlParameters=t.data("urlParameters");var n="?";for(var a in _urlParameters)_urlParameters.hasOwnProperty(a)&&("?"!==n&&(n+=";"),n+=a+"="+_urlParameters[a]);for(var a in e)e.hasOwnProperty(a)&&("?"!==n&&(n+=";"),n+=a+"="+e[a]);return n},displayDNABlocks:function(e,t,n,a,r){if(!e)return'<div class="notice">Please place a valid subject into the DNA modifier.</div>';var o=e.split(""),i='<div class="dnaBlock"><div class="link dnaBlockNumber">1</div>',s=1,l=1;for(var c in o)if(o.hasOwnProperty(c)&&"object"!=typeof o[c]){var d;d="UI"==r.toUpperCase()?{selectUIBlock:s,selectUISubblock:l}:{selectSEBlock:s,selectSESubblock:l};var u="linkActive";s==t&&l==n&&(u="selected"),i+='<div class="link '+u+' dnaSubBlock" data-href="'+NanoUtility.generateHref(d)+'" id="dnaBlock'+c+'">'+o[c]+"</div>",++c%a==0&&c<o.length?(l=1,i+='</div><div class="dnaBlock"><div class="link dnaBlockNumber">'+ ++s+"</div>"):l++}return i+="</div>"},cMirror:function(e){CodeMirror.fromTextArea(document.getElementById(e),{lineNumbers:!0,indentUnit:4,indentWithTabs:!0,theme:"lesser-dark"})},smoothNumber:function(e){var t=NanoTransition.allocID("n");return'<span class="'+t+'"></span><script>$(function() { var newState = {value: '+e+'}; var old = NanoTransition.updateElement("'+t+'", newState); NanoTransition.animateTextValue("'+t+'", null, -1, old["value"], newState["value"]); });<\/script>'},smoothRound:function(e,t){var n=NanoTransition.allocID(t);return void 0===t&&(placed=0),'<span class="'+n+'"></span><script>$(function() { var newState = {value: '+e.toFixed(t)+'}; var old = NanoTransition.updateElement("'+n+'", newState); NanoTransition.animateTextValue("'+n+'", null, '+t+', old["value"], newState["value"]); });<\/script>'}};return{addHelpers:function(){NanoTemplate.addHelpers(t)},removeHelpers:function(){for(var e in t)t.hasOwnProperty(e)&&NanoTemplate.removeHelper(e)}}}(),NanoStateDefaultClass.inheritsFrom(NanoStateClass);var NanoStateDefault=new NanoStateDefaultClass;function NanoStateDefaultClass(){this.key="default",this.key=this.key.toLowerCase(),NanoStateManager.addState(this)}NanoStatePDAClass.inheritsFrom(NanoStateClass);var NanoStatePDA=new NanoStatePDAClass;function NanoStatePDAClass(){this.key="pda",this.key=this.key.toLowerCase(),this.current_template="",NanoStateManager.addState(this)}function NanoStateClass(){}NanoStatePDAClass.prototype.onUpdate=function(t){NanoStateClass.prototype.onUpdate.call(this,t);var n=this;try{if(null!=t.data.app){var a=t.data.app.template;null!=a&&a!=n.current_template?$.when($.ajax({url:a+".tmpl",cache:!1,dataType:"text"})).done(function(e){e+='<div class="clearBoth"></div>';try{NanoTemplate.addTemplate("app",e),NanoTemplate.resetTemplate("app"),$("#uiApp").html(NanoTemplate.parse("app",t)),n.current_template=a,n.onAfterUpdate(t)}catch(e){return void reportError("ERROR: An error occurred while loading the PDA App UI: "+e.message)}}).fail(function(){reportError("ERROR: Loading template app("+a+") failed!")}):NanoTemplate.templateExists("app")&&$("#uiApp").html(NanoTemplate.parse("app",t))}}catch(e){return void reportError("ERROR: An error occurred while rendering the PDA App UI: "+e.message)}},NanoStateClass.prototype.key=null,NanoStateClass.prototype.layoutRendered=!1,NanoStateClass.prototype.contentRendered=!1,NanoStateClass.prototype.mapInitialised=!1,NanoStateClass.prototype.isCurrent=function(){return NanoStateManager.getCurrentState()==this},NanoStateClass.prototype.onAdd=function(e){NanoBaseCallbacks.addCallbacks(),NanoBaseHelpers.addHelpers()},NanoStateClass.prototype.onRemove=function(e){NanoBaseCallbacks.removeCallbacks(),NanoBaseHelpers.removeHelpers()},NanoStateClass.prototype.onBeforeUpdate=function(e){return e=NanoStateManager.executeBeforeUpdateCallbacks(e)},NanoStateClass.prototype.onUpdate=function(e){try{(!this.layoutRendered||e.config.hasOwnProperty("autoUpdateLayout")&&e.config.autoUpdateLayout)&&($("#uiLayout").html(NanoTemplate.parse("layout",e)),this.layoutRendered=!0),(!this.contentRendered||e.config.hasOwnProperty("autoUpdateContent")&&e.config.autoUpdateContent)&&($("#uiContent").html(NanoTemplate.parse("main",e)),this.contentRendered=!0),NanoTemplate.templateExists("mapContent")&&(this.mapInitialised||($("#uiMap").draggable(),$("#uiMapTooltip").off("click").on("click",function(e){e.preventDefault(),$(this).fadeOut(400)}),this.mapInitialised=!0),$("#uiMapContent").html(NanoTemplate.parse("mapContent",e)),e.config.hasOwnProperty("showMap")&&e.config.showMap?($("#uiContent").addClass("hidden"),$("#uiMapWrapper").removeClass("hidden")):($("#uiMapWrapper").addClass("hidden"),$("#uiContent").removeClass("hidden"))),NanoTemplate.templateExists("mapHeader")&&$("#uiMapHeader").html(NanoTemplate.parse("mapHeader",e)),NanoTemplate.templateExists("mapFooter")&&$("#uiMapFooter").html(NanoTemplate.parse("mapFooter",e))}catch(e){return void reportError("ERROR: An error occurred while rendering the UI: "+e.message)}},NanoStateClass.prototype.onAfterUpdate=function(e){NanoStateManager.executeAfterUpdateCallbacks(e)},NanoStateClass.prototype.alertText=function(e){alert(e)};var NanoTemplate=function(){var n={},a={},r={},o={},i=function(){if(Object.size(n)){for(var t in n)if(n.hasOwnProperty(t))return void $.when($.ajax({url:n[t],cache:!1,dataType:"text"})).done(function(e){e+='<div class="clearBoth"></div>';try{NanoTemplate.addTemplate(t,e)}catch(e){return void reportError("ERROR: An error occurred while loading the UI: "+e.message)}delete n[t],i()}).fail(function(){reportError("ERROR: Loading template "+t+"("+n[t]+") failed!")})}else $(document).trigger("templatesLoaded")};return{init:function(){null==(n=$("body").data("templateData"))&&reportError("Error: Template data did not load correctly."),i()},addTemplate:function(e,t){a[e]=t},templateExists:function(e){return a.hasOwnProperty(e)},resetTemplate:function(e){r[e]=null},parse:function(e,t){if(!r.hasOwnProperty(e)||!r[e]){if(!a.hasOwnProperty(e))return reportError('ERROR: Template "'+e+'" does not exist in _compiledTemplates!'),"<h2>Template error (does not exist)</h2>";!function(){for(var e in a)try{r[e]=doT.template(a[e],null,a)}catch(e){reportError(e.message)}}()}return"function"!=typeof r[e]?(reportError(r[e]),reportError('ERROR: Template "'+e+'" failed to compile!'),"<h2>Template error (failed to compile)</h2>"):r[e].call(this,t.data,t.config,o)},addHelper:function(e,t){jQuery.isFunction(t)?o[e]=t:reportError("NanoTemplate.addHelper failed to add "+e+" as it is not a function.")},addHelpers:function(e){for(var t in e)e.hasOwnProperty(t)&&NanoTemplate.addHelper(t,e[t])},removeHelper:function(e){helpers.hasOwnProperty(e)&&delete o[e]}}}();NanoTransition=function(){var s={},l={},t=0;NanoStateManager.addBeforeUpdateCallback("TransitionReset",function(e){return t=0,e});function i(e,t,n){var a,r=s[e];void 0===n&&(n=!1);var o=$("."+e);if(0==o.length)return t;if(o=o[0],r&&r.tagName==o.tagName&&r.tabIndex==o.tabIndex&&r.parent==o.parentNode.tagName&&r.children==o.children.length){if(a=l[e],n){var i={};for(k in a)i[k]=a[k];for(k in t)i[k]=t[k];t=i}}else a=t,s[e]={tagName:o.tagName,tabIndex:o.tabIndex,parent:o.parentNode.tagName,children:o.children.length};return l[e]=t,a}function d(e,t){var n=$("."+e);return t?$(n).children(t):$(n)}function o(e,t,n,a,r){var o=d(e,t);void 0===r&&(r=1900),o.css(n).animate(a,{duration:r,queue:!1});var i=n["..class"],s=a["..class"];if(i&&s&&(o.addClass(i),i!=s)){i=i.split(" "),s=s.split(" ");var l=i.filter(function(e){return-1==s.indexOf(e)}),c=s.filter(function(e){return-1==i.indexOf(e)});i=l.join(" "),s=c.join(" "),o.switchClass(i,s,{duration:r,queue:!1})}}return{allocID:function(e){return"_Hide_Map_close"==e?"transition__map":(void 0===e&&(e=""),"transition__"+t+++"_"+e.toString())},updateElement:i,animateElement:o,animateTextValue:function(e,t,n,a,r,o){var i=d(e,t);void 0===o&&(o=1900),-1==n?i.text(a.toString()):i.text(a.toFixed(n)),a!=r&&i.animate({i:1},{duration:o,queue:!1,step:function(e,t){t.elem.textContent=-1==n?(a*(1-e)+r*e).toString():(a*(1-e)+r*e).toFixed(n)}})},animateHover:function(e,t,n,a,r){var o=d(e,t);void 0===r&&(r=200),n["..hover"]&&o.addClass("hover"),o.hover(function(){o.stop(1,1).addClass("hover",{duration:r,queue:!1}),i(e,{"..hover":!0},!0)},function(){o.stop(1,1).removeClass("hover",{duration:r,queue:!1}),i(e,{"..hover":!1},!0)})},transitionElement:function(e,t,n,a){var r=i(e,n);return o(e,t,r,n,a),r}}}();var NanoWindow=function(){function u(e,t){NanoUtility.winset("pos",e+","+t)}function p(e,t){NanoUtility.winset("size",e+","+t)}function e(){var e=window.screenLeft,t=window.screenTop;u(0,0),f=window.screenLeft,h=window.screenTop;var n=e-f,a=t-h;u(n=n<f?0:n,a=a<h?0:a);var r=$(window).height(),o=$(window).width();$("body").height()>=$(window).height()-29&&(o+=17),$(document).width()>$(window).width()&&(r+=17);var i=Math.max(280,o),s=Math.max(140,r);p(i,s)}var f,h,a,m,v,y,g,t=function(){NanoUtility.winset("titlebar",0),NanoUtility.winset("can-resize",0),NanoUtility.winset("transparent-color","#FF00E4"),$(".fancy").show(),$("#uiTitleFluff").css("right","72px"),$(".statusicon").css("left","34px"),$("#uiTitleText").css("left","66px")},n=function(){$(".close").on("click",function(e){NanoUtility.close()}),$(".minimize").on("click",function(e){NanoUtility.winset("is-minimized","true")})},r=function(){$("body").on("mousemove","#uiTitleWrapper",function(e){o(e)}),$("body").on("mousedown","#uiTitleWrapper",function(){a=!0,$(this)[0].setCapture&&$(this)[0].setCapture()}),$("body").on("mouseup","#uiTitleWrapper",function(){a=!1,$(this)[0].releaseCapture&&$(this)[0].releaseCapture()}),$("body").on("mousemove","div.resizeArea",function(e){i.call(this,e)}),$("body").on("mousedown","div.resizeArea",function(){y=!0,this.setCapture&&this.setCapture()}),$("body").on("mouseup","div.resizeArea",function(){y=!1,this.releaseCapture&&this.releaseCapture()})},o=function(e){if(e=e||window.event,m!==e.screenX||v!==e.screenY){if(void 0===m&&(m=e.screenX,v=e.clientY),a){var t=e.screenX-m,n=e.screenY-v;t+=window.screenLeft-f,n+=window.screenTop-h,u(t,n)}m=e.screenX,v=e.screenY}},i=function(e){if(!g){if(g=!0,e=e||window.event,void 0===m&&(m=e.screenX-f,v=e.screenY-h),y){var t=$(window).width(),n=$(window).height();$("body").height()>=$(window).height()-29&&(t+=17),$(document).width()>$(window).width()&&(n+=17);var a=Number($(this).attr("rx")),r=Number($(this).attr("ry")),o=e.screenX-f-m,i=e.screenY-h-v,s=window.screenLeft-f,l=window.screenTop-h,c=t+o*a;-1==a&&(s+=o);var d=n+i*r;-1==r&&(l+=i),c=Math.max(280,c),d=Math.max(140,d),u(s,l),p(c,d)}m=e.screenX-f,v=e.screenY-h,g=!1}};return{init:function(){$(document).on("templatesLoaded",function(){e(),NanoStateManager.getData().config.user.fancy&&(t(),e(),n(),r())})}}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5hbm8uanMiXSwibmFtZXMiOlsiTmFub1V0aWxpdHkiLCJfdXJsUGFyYW1ldGVycyIsImluaXQiLCJib2R5IiwiJCIsImRhdGEiLCJnZW5lcmF0ZUhyZWYiLCJwYXJhbWV0ZXJzIiwicXVlcnlTdHJpbmciLCJrZXkiLCJoYXNPd25Qcm9wZXJ0eSIsIndpbnNldCIsInZhbHVlIiwid2luZG93Iiwib2JqIiwiTmFub1N0YXRlTWFuYWdlciIsImdldERhdGEiLCJjb25maWciLCJyZWYiLCJsb2NhdGlvbiIsImhyZWYiLCJleHRlbmQiLCJmaXJzdCIsInNlY29uZCIsIk9iamVjdCIsImtleXMiLCJmb3JFYWNoIiwic2Vjb25kVmFsIiwicHJvdG90eXBlIiwidG9TdHJpbmciLCJjYWxsIiwidXJsIiwicGFyYW1zIiwiVXJsIiwicXVlcnkiLCJjbG9zZSIsImNvbW1hbmQiLCJzcmMiLCJ0aGlzIiwialF1ZXJ5IiwicmVwb3J0RXJyb3IiLCJkb1QiLCJzdHIiLCJlbmNvZGVVUklDb21wb25lbnQiLCJhbGVydCIsImRvY3VtZW50IiwicmVhZHkiLCJOYW5vVGVtcGxhdGUiLCJOYW5vV2luZG93IiwiQXJyYXkiLCJpbmRleE9mIiwiZWx0IiwibGVuIiwibGVuZ3RoIiwiZnJvbSIsIk51bWJlciIsImFyZ3VtZW50cyIsIk1hdGgiLCJjZWlsIiwiZmxvb3IiLCJTdHJpbmciLCJmb3JtYXQiLCJhcmdzIiwicmVwbGFjZSIsInJlZ2V4IiwiaXRlbSIsImludFZhbCIsInBhcnNlSW50Iiwic3Vic3RyaW5nIiwiUmVnRXhwIiwic2l6ZSIsImNvbnNvbGUiLCJsb2ciLCJ0b1RpdGxlQ2FzZSIsInNtYWxsV29yZHMiLCJtYXRjaCIsInAxIiwiaW5kZXgiLCJ0aXRsZSIsInNlYXJjaCIsImNoYXJBdCIsInRvTG93ZXJDYXNlIiwic3Vic3RyIiwidG9VcHBlckNhc2UiLCJhamF4U2V0dXAiLCJjYWNoZSIsIkZ1bmN0aW9uIiwiaW5oZXJpdHNGcm9tIiwicGFyZW50Q2xhc3NPck9iamVjdCIsImNvbnN0cnVjdG9yIiwicGFyZW50IiwidHJpbSIsImNrZXkiLCJleGVjdXRlQ2FsbGJhY2tzIiwiY2FsbGJhY2tzIiwiaXNGdW5jdGlvbiIsIl9pc0luaXRpYWxpc2VkIiwiX2RhdGEiLCJfYmVmb3JlVXBkYXRlQ2FsbGJhY2tzIiwiX2FmdGVyVXBkYXRlQ2FsbGJhY2tzIiwiX3N0YXRlcyIsIl9jdXJyZW50U3RhdGUiLCJkb1VwZGF0ZSIsIm9uQmVmb3JlVXBkYXRlIiwib25VcGRhdGUiLCJvbkFmdGVyVXBkYXRlIiwiSlNPTiIsInN0cmluZ2lmeSIsInN0YXRlS2V5Iiwic2V0Q3VycmVudFN0YXRlIiwib24iLCJyZWNlaXZlVXBkYXRlRGF0YSIsImpzb25TdHJpbmciLCJ1cGRhdGVEYXRhIiwicGFyc2VKU09OIiwiZXJyb3IiLCJuYW1lIiwibWVzc2FnZSIsImFkZEJlZm9yZVVwZGF0ZUNhbGxiYWNrIiwiY2FsbGJhY2tGdW5jdGlvbiIsImFkZEJlZm9yZVVwZGF0ZUNhbGxiYWNrcyIsImNhbGxiYWNrS2V5IiwicmVtb3ZlQmVmb3JlVXBkYXRlQ2FsbGJhY2siLCJleGVjdXRlQmVmb3JlVXBkYXRlQ2FsbGJhY2tzIiwiYWRkQWZ0ZXJVcGRhdGVDYWxsYmFjayIsImFkZEFmdGVyVXBkYXRlQ2FsbGJhY2tzIiwicmVtb3ZlQWZ0ZXJVcGRhdGVDYWxsYmFjayIsImV4ZWN1dGVBZnRlclVwZGF0ZUNhbGxiYWNrcyIsImFkZFN0YXRlIiwic3RhdGUiLCJOYW5vU3RhdGVDbGFzcyIsInByZXZpb3VzU3RhdGUiLCJvblJlbW92ZSIsIm9uQWRkIiwiZ2V0Q3VycmVudFN0YXRlIiwiTmFub0Jhc2VDYWxsYmFja3MiLCJfY2FuQ2xpY2siLCJfYmFzZUJlZm9yZVVwZGF0ZUNhbGxiYWNrcyIsIl9iYXNlQWZ0ZXJVcGRhdGVDYWxsYmFja3MiLCJzdGF0dXMiLCJ1aVN0YXR1c0NsYXNzIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsInN0b3BUaW1lIiwib2ZmIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsIm9uZVRpbWUiLCJuYW5vbWFwIiwiaHRtbCIsImNoaWxkcmVuIiwic2hvdyIsImZhZGVPdXQiLCJ6b29tTGV2ZWwiLCJ1aU1hcE9iamVjdCIsInVpTWFwV2lkdGgiLCJ3aWR0aCIsInVpTWFwSGVpZ2h0IiwiaGVpZ2h0IiwiY3NzIiwiem9vbSIsImxlZnQiLCJ0b3AiLCJtYXJnaW5MZWZ0IiwibWFyZ2luVG9wIiwiYXR0ciIsImFkZENhbGxiYWNrcyIsInJlbW92ZUNhbGxiYWNrcyIsIk5hbm9CYXNlSGVscGVycyIsIl9iYXNlSGVscGVycyIsInN5bmRpY2F0ZU1vZGUiLCJjb21iaW5lIiwiYXJyMSIsImFycjIiLCJjb25jYXQiLCJkdW1wIiwibGluayIsInRleHQiLCJpY29uIiwiZWxlbWVudENsYXNzIiwiZWxlbWVudElkIiwiaWNvbkh0bWwiLCJpY29uQ2xhc3MiLCJlbGVtZW50SWRIdG1sIiwidGlkIiwiTmFub1RyYW5zaXRpb24iLCJhbGxvY0lEIiwieG9yIiwibnVtYmVyIiwiYml0IiwicHJlY2lzaW9uUm91bmQiLCJwbGFjZXMiLCJyb3VuZCIsIm11bHRpcGxpZXIiLCJwb3ciLCJmaXhlZCIsInN0cmluZyIsInN0cmluZ0FyZ3MiLCJpIiwicHVzaCIsImZvcm1hdE51bWJlciIsIngiLCJwYXJ0cyIsInNwbGl0Iiwiam9pbiIsImNhcGl0YWxpemVGaXJzdExldHRlciIsInNsaWNlIiwiZGlzcGxheUJhciIsInJhbmdlTWluIiwicmFuZ2VNYXgiLCJzdHlsZUNsYXNzIiwic2hvd1RleHQiLCJwZXJjZW50YWdlIiwiZGFuZ2VyVG9DbGFzcyIsImxldmVsIiwiZGFuZ2VyVG9TcGFuIiwiZGlzcGxheUROQUJsb2NrcyIsImRuYVN0cmluZyIsInNlbGVjdGVkQmxvY2siLCJzZWxlY3RlZFN1YmJsb2NrIiwiYmxvY2tTaXplIiwicGFyYW1LZXkiLCJjaGFyYWN0ZXJzIiwiYmxvY2siLCJzdWJibG9jayIsInNlbGVjdFVJQmxvY2siLCJzZWxlY3RVSVN1YmJsb2NrIiwic2VsZWN0U0VCbG9jayIsInNlbGVjdFNFU3ViYmxvY2siLCJjTWlycm9yIiwidGV4dGJveCIsIkNvZGVNaXJyb3IiLCJmcm9tVGV4dEFyZWEiLCJnZXRFbGVtZW50QnlJZCIsImxpbmVOdW1iZXJzIiwiaW5kZW50VW5pdCIsImluZGVudFdpdGhUYWJzIiwidGhlbWUiLCJzbW9vdGhOdW1iZXIiLCJzbW9vdGhSb3VuZCIsInVuZGVmaW5lZCIsInBsYWNlZCIsInRvRml4ZWQiLCJhZGRIZWxwZXJzIiwicmVtb3ZlSGVscGVycyIsImhlbHBlcktleSIsInJlbW92ZUhlbHBlciIsIk5hbm9TdGF0ZURlZmF1bHRDbGFzcyIsIk5hbm9TdGF0ZURlZmF1bHQiLCJOYW5vU3RhdGVQREFDbGFzcyIsIk5hbm9TdGF0ZVBEQSIsImN1cnJlbnRfdGVtcGxhdGUiLCJ0ZW1wbGF0ZSIsIndoZW4iLCJhamF4IiwiZGF0YVR5cGUiLCJkb25lIiwidGVtcGxhdGVNYXJrdXAiLCJhZGRUZW1wbGF0ZSIsInJlc2V0VGVtcGxhdGUiLCJwYXJzZSIsImZhaWwiLCJ0ZW1wbGF0ZUV4aXN0cyIsImxheW91dFJlbmRlcmVkIiwiY29udGVudFJlbmRlcmVkIiwibWFwSW5pdGlhbGlzZWQiLCJpc0N1cnJlbnQiLCJuZXh0U3RhdGUiLCJkcmFnZ2FibGUiLCJhbGVydFRleHQiLCJfdGVtcGxhdGVEYXRhIiwiX3RlbXBsYXRlcyIsIl9jb21waWxlZFRlbXBsYXRlcyIsIl9oZWxwZXJzIiwibG9hZE5leHRUZW1wbGF0ZSIsInRyaWdnZXIiLCJ0ZW1wbGF0ZVN0cmluZyIsInRlbXBsYXRlS2V5IiwiY29tcGlsZVRlbXBsYXRlcyIsImFkZEhlbHBlciIsImhlbHBlck5hbWUiLCJoZWxwZXJGdW5jdGlvbiIsImhlbHBlcnMiLCJpZENhY2hlIiwic3RhdGVDYWNoZSIsImN1cnJlbnRJRCIsIl91cGRhdGVFbGVtZW50IiwiaWQiLCJuZXdTdGF0ZSIsIm1lcmdlIiwib2xkU3RhdGUiLCJlbGVtZW50IiwidGFnTmFtZSIsInRhYkluZGV4IiwicGFyZW50Tm9kZSIsIm5ld1N0YXRlQ29weSIsImsiLCJfcmVzb2x2ZVRhcmdldCIsImZpbHRlciIsIl9hbmltYXRlRWxlbWVudCIsInRpbWUiLCJ0YXJnZXQiLCJhbmltYXRlIiwiZHVyYXRpb24iLCJxdWV1ZSIsIm9sZENsYXNzIiwibmV3Q2xhc3MiLCJmaWx0ZXJlZE9sZENsYXNzIiwiZmlsdGVyZWROZXdDbGFzcyIsInN3aXRjaENsYXNzIiwidW5pcXVlSUQiLCJ1cGRhdGVFbGVtZW50IiwiYW5pbWF0ZUVsZW1lbnQiLCJhbmltYXRlVGV4dFZhbHVlIiwib2xkVmFsdWUiLCJuZXdWYWx1ZSIsInN0ZXAiLCJub3ciLCJmeCIsImVsZW0iLCJ0ZXh0Q29udGVudCIsImFuaW1hdGVIb3ZlciIsImhvdmVyIiwic3RvcCIsIi4uaG92ZXIiLCJ0cmFuc2l0aW9uRWxlbWVudCIsIm9sZCIsInNldFBvcyIsInkiLCJzZXRTaXplIiwidyIsImgiLCJvYmV5TGltaXRzIiwicHJldlgiLCJzY3JlZW5MZWZ0IiwicHJldlkiLCJzY3JlZW5Ub3AiLCJvZmZzZXRYIiwib2Zmc2V0WSIsImNsYW1wZWRYIiwiY2xhbXBlZFkiLCJuZXdXaWR0aCIsIm1heCIsIm5ld0hlaWdodCIsImRyYWdnaW5nIiwibGFzdFgiLCJsYXN0WSIsInJlc2l6aW5nIiwicmVzaXplV29ya2luZyIsImZhbmN5Q2hyb21lIiwiYXR0YWNoQnV0dG9ucyIsImF0dGFjaERyYWdBbmRSZXNpemUiLCJldiIsImRyYWciLCJzZXRDYXB0dXJlIiwicmVsZWFzZUNhcHR1cmUiLCJyZXNpemUiLCJzY3JlZW5YIiwic2NyZWVuWSIsImNsaWVudFkiLCJkeCIsImR5IiwicngiLCJyeSIsIm5ld1giLCJuZXdZIiwibmV3VyIsIm5ld0giLCJ1c2VyIiwiZmFuY3kiXSwibWFwcGluZ3MiOiJBQUNBLElBQUlBLFlBQWMsV0FDZCxJQUFJQyxFQUFpQixHQUVyQixNQUFPLENBQ0hDLEtBQU0sV0FDRixJQUFJQyxFQUFPQyxFQUFFLFFBQ2JILEVBQWlCRSxFQUFLRSxLQUFLLGtCQUcvQkMsYUFBYyxT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QVFxQyxFQUFNQyxHQUdsQnRCLEVBQVFPLEVBQUdLLFFBQVVwQixFQUNyQlMsRUFBUU0sRUFBR00sUUFBVXBCLEVBRXJCVSxHQUFnQixJQUlwQixNQUFPLENBQ0gxVixLQUFNLFdBQ0ZFLEVBQUV5QyxVQUFVaUUsR0FBRyxrQkFBbUIsV0E3SnRDOE4sSUFFSTdULGlCQUFpQkMsVUFBVUMsT0FBTytWLEtBQUtDLFFBSTNDcEIsSUFHQWpCLElBRUFrQixJQUNBQyxTQTlEUyIsImZpbGUiOiJuYW5vLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gTmFub1V0aWxpdHkgaXMgdGhlIHBsYWNlIHRvIHN0b3JlIHV0aWxpdHkgZnVuY3Rpb25zXG52YXIgTmFub1V0aWxpdHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF91cmxQYXJhbWV0ZXJzID0ge307IC8vIFRoaXMgaXMgcG9wdWxhdGVkIHdpdGggdGhlIGJhc2UgdXJsIHBhcmFtZXRlcnMgKHVzZWQgYnkgYWxsIGxpbmtzKSwgd2hpY2ggaXMgcHJvYmFieSBqdXN0IHRoZSBcInNyY1wiIHBhcmFtZXRlclxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGJvZHkgPSAkKCdib2R5Jyk7IC8vIFdlIHN0b3JlIGRhdGEgaW4gdGhlIGJvZHkgdGFnLCBpdCdzIGFzIGdvb2QgYSBwbGFjZSBhcyBhbnlcbiAgICAgICAgICAgIF91cmxQYXJhbWV0ZXJzID0gYm9keS5kYXRhKCd1cmxQYXJhbWV0ZXJzJyk7XG4gICAgICAgIH0sXG4gICAgICAgIC8vIGdlbmVyYXRlIGEgQnlvbmQgaHJlZiwgY29tYmluZXMgX3VybFBhcmFtZXRlcnMgd2l0aCBwYXJhbWV0ZXJzXG4gICAgICAgIGdlbmVyYXRlSHJlZjogZnVuY3Rpb24gKHBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIHZhciBxdWVyeVN0cmluZyA9ICc/JztcblxuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIF91cmxQYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICAgICAgaWYgKF91cmxQYXJhbWV0ZXJzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHF1ZXJ5U3RyaW5nICE9PSAnPycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5U3RyaW5nICs9ICc7JztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBxdWVyeVN0cmluZyArPSBrZXkgKyAnPScgKyBfdXJsUGFyYW1ldGVyc1trZXldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIHBhcmFtZXRlcnMpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWYgKHBhcmFtZXRlcnMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocXVlcnlTdHJpbmcgIT09ICc/Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlTdHJpbmcgKz0gJzsnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5U3RyaW5nICs9IGtleSArICc9JyArIHBhcmFtZXRlcnNba2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcXVlcnlTdHJpbmc7XG4gICAgICAgIH0sXG4gICAgICAgIHdpbnNldDogZnVuY3Rpb24gKGtleSwgdmFsdWUsIHdpbmRvdykge1xuICAgICAgICAgICAgdmFyIG9iaiwgcGFyYW1zLCB3aW5zZXRSZWY7XG4gICAgICAgICAgICBpZiAod2luZG93ID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cgPSBOYW5vU3RhdGVNYW5hZ2VyLmdldERhdGEoKS5jb25maWcud2luZG93LnJlZjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcmFtcyA9IChcbiAgICAgICAgICAgICAgICBvYmogPSB7fSxcbiAgICAgICAgICAgICAgICBvYmpbd2luZG93ICsgXCIuXCIgKyBrZXldID0gdmFsdWUsXG4gICAgICAgICAgICAgICAgb2JqXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcmV0dXJuIGxvY2F0aW9uLmhyZWYgPSBOYW5vVXRpbGl0eS5ocmVmKFwid2luc2V0XCIsIHBhcmFtcyk7XG4gICAgICAgIH0sXG4gICAgICAgIGV4dGVuZDogZnVuY3Rpb24oZmlyc3QsIHNlY29uZCkge1xuICAgICAgICAgICAgT2JqZWN0LmtleXMoc2Vjb25kKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuICAgICAgICAgICAgICAgIHZhciBzZWNvbmRWYWw7XG4gICAgICAgICAgICAgICAgc2Vjb25kVmFsID0gc2Vjb25kW2tleV07XG4gICAgICAgICAgICAgICAgaWYgKHNlY29uZFZhbCAmJiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoc2Vjb25kVmFsKSA9PT0gXCJbb2JqZWN0IE9iamVjdF1cIikge1xuICAgICAgICAgICAgICAgICAgICBmaXJzdFtrZXldID0gZmlyc3Rba2V5XSB8fCB7fTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE5hbm9VdGlsaXR5LmV4dGVuZChmaXJzdFtrZXldLCBzZWNvbmRWYWwpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmaXJzdFtrZXldID0gc2Vjb25kVmFsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGZpcnN0O1xuICAgICAgICB9LFxuICAgICAgICBocmVmOiBmdW5jdGlvbih1cmwsIHBhcmFtcykge1xuICAgICAgICAgICAgaWYgKHVybCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdXJsID0gXCJcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwYXJhbXMgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHBhcmFtcyA9IHt9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdXJsID0gbmV3IFVybChcImJ5b25kOi8vXCIgKyB1cmwpO1xuICAgICAgICAgICAgTmFub1V0aWxpdHkuZXh0ZW5kKHVybC5xdWVyeSwgcGFyYW1zKTtcbiAgICAgICAgICAgIHJldHVybiB1cmw7XG4gICAgICAgIH0sXG4gICAgICAgIGNsb3NlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBwYXJhbXM7XG4gICAgICAgICAgICBwYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgY29tbWFuZDogXCJuYW5vY2xvc2UgXCIgKyBfdXJsUGFyYW1ldGVycy5zcmNcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLndpbnNldChcImlzLXZpc2libGVcIiwgXCJmYWxzZVwiKTtcbiAgICAgICAgICAgIHJldHVybiBsb2NhdGlvbi5ocmVmID0gTmFub1V0aWxpdHkuaHJlZihcIndpbnNldFwiLCBwYXJhbXMpO1xuICAgICAgICB9XG4gICAgfVxufSAoKTtcblxuaWYgKHR5cGVvZiBqUXVlcnkgPT0gJ3VuZGVmaW5lZCcpIHsgIFxuICAgIHJlcG9ydEVycm9yKCdFUlJPUjogSmF2YXNjcmlwdCBsaWJyYXJ5IGZhaWxlZCB0byBsb2FkIScpO1xufVxuaWYgKHR5cGVvZiBkb1QgPT0gJ3VuZGVmaW5lZCcpIHsgIFxuICAgIHJlcG9ydEVycm9yKCdFUlJPUjogVGVtcGxhdGUgZW5naW5lIGZhaWxlZCB0byBsb2FkIScpO1xufVxuXG52YXIgcmVwb3J0RXJyb3IgPSBmdW5jdGlvbiAoc3RyKSB7XG4gICAgd2luZG93LmxvY2F0aW9uID0gXCJieW9uZDovLz9uYW5vX2Vycj1cIiArIGVuY29kZVVSSUNvbXBvbmVudChzdHIpO1xuICAgIGFsZXJ0KHN0cik7XG59XG5cbi8vIEFsbCBzY3JpcHRzIGFyZSBpbml0aWFsaXNlZCBoZXJlLCB0aGlzIGFsbG93cyBjb250cm9sIG9mIGluaXQgb3JkZXJcbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICBOYW5vVXRpbGl0eS5pbml0KCk7XG4gICAgTmFub1N0YXRlTWFuYWdlci5pbml0KCk7XG4gICAgTmFub1RlbXBsYXRlLmluaXQoKTtcbiAgICBOYW5vV2luZG93LmluaXQoKTtcbn0pO1xuXG5pZiAoIUFycmF5LnByb3RvdHlwZS5pbmRleE9mKVxue1xuICAgIEFycmF5LnByb3RvdHlwZS5pbmRleE9mID0gZnVuY3Rpb24oZWx0IC8qLCBmcm9tKi8pXG4gICAge1xuICAgICAgICB2YXIgbGVuID0gdGhpcy5sZW5ndGg7XG5cbiAgICAgICAgdmFyIGZyb20gPSBOdW1iZXIoYXJndW1lbnRzWzFdKSB8fCAwO1xuICAgICAgICBmcm9tID0gKGZyb20gPCAwKVxuICAgICAgICAgICAgPyBNYXRoLmNlaWwoZnJvbSlcbiAgICAgICAgICAgIDogTWF0aC5mbG9vcihmcm9tKTtcbiAgICAgICAgaWYgKGZyb20gPCAwKVxuICAgICAgICAgICAgZnJvbSArPSBsZW47XG5cbiAgICAgICAgZm9yICg7IGZyb20gPCBsZW47IGZyb20rKylcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKGZyb20gaW4gdGhpcyAmJlxuICAgICAgICAgICAgICAgIHRoaXNbZnJvbV0gPT09IGVsdClcbiAgICAgICAgICAgICAgICByZXR1cm4gZnJvbTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gLTE7XG4gICAgfTtcbn07XG5cbmlmICghU3RyaW5nLnByb3RvdHlwZS5mb3JtYXQpXG57XG4gICAgU3RyaW5nLnByb3RvdHlwZS5mb3JtYXQgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICB2YXIgc3RyID0gdGhpcztcbiAgICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKFN0cmluZy5wcm90b3R5cGUuZm9ybWF0LnJlZ2V4LCBmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgICAgICB2YXIgaW50VmFsID0gcGFyc2VJbnQoaXRlbS5zdWJzdHJpbmcoMSwgaXRlbS5sZW5ndGggLSAxKSk7XG4gICAgICAgICAgICB2YXIgcmVwbGFjZTtcbiAgICAgICAgICAgIGlmIChpbnRWYWwgPj0gMCkge1xuICAgICAgICAgICAgICAgIHJlcGxhY2UgPSBhcmdzW2ludFZhbF07XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGludFZhbCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICByZXBsYWNlID0gXCJ7XCI7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGludFZhbCA9PT0gLTIpIHtcbiAgICAgICAgICAgICAgICByZXBsYWNlID0gXCJ9XCI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlcGxhY2UgPSBcIlwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlcGxhY2U7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgU3RyaW5nLnByb3RvdHlwZS5mb3JtYXQucmVnZXggPSBuZXcgUmVnRXhwKFwiey0/WzAtOV0rfVwiLCBcImdcIik7XG59O1xuXG5PYmplY3Quc2l6ZSA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHZhciBzaXplID0gMCwga2V5O1xuICAgIGZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSBzaXplKys7XG4gICAgfVxuICAgIHJldHVybiBzaXplO1xufTtcblxuaWYoIXdpbmRvdy5jb25zb2xlKSB7XG4gICAgd2luZG93LmNvbnNvbGUgPSB7XG4gICAgICAgIGxvZyA6IGZ1bmN0aW9uKHN0cikge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcbn07XG5cblN0cmluZy5wcm90b3R5cGUudG9UaXRsZUNhc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNtYWxsV29yZHMgPSAvXihhfGFufGFuZHxhc3xhdHxidXR8Ynl8ZW58Zm9yfGlmfGlufG9mfG9ufG9yfHRoZXx0b3x2cz9cXC4/fHZpYSkkL2k7XG5cbiAgICByZXR1cm4gdGhpcy5yZXBsYWNlKC8oW15cXFdfXStbXlxccy1dKikgKi9nLCBmdW5jdGlvbiAobWF0Y2gsIHAxLCBpbmRleCwgdGl0bGUpIHtcbiAgICAgICAgaWYgKGluZGV4ID4gMCAmJiBpbmRleCArIHAxLmxlbmd0aCAhPT0gdGl0bGUubGVuZ3RoICYmXG4gICAgICAgICAgICBwMS5zZWFyY2goc21hbGxXb3JkcykgPiAtMSAmJiB0aXRsZS5jaGFyQXQoaW5kZXggLSAyKSAhPT0gXCI6XCIgJiZcbiAgICAgICAgICAgIHRpdGxlLmNoYXJBdChpbmRleCAtIDEpLnNlYXJjaCgvW15cXHMtXS8pIDwgMCkge1xuICAgICAgICAgICAgcmV0dXJuIG1hdGNoLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocDEuc3Vic3RyKDEpLnNlYXJjaCgvW0EtWl18XFwuLi8pID4gLTEpIHtcbiAgICAgICAgICAgIHJldHVybiBtYXRjaDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBtYXRjaC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIG1hdGNoLnN1YnN0cigxKTtcbiAgICB9KTtcbn07XG5cbiQuYWpheFNldHVwKHtcbiAgICBjYWNoZTogZmFsc2Vcbn0pO1xuXG5GdW5jdGlvbi5wcm90b3R5cGUuaW5oZXJpdHNGcm9tID0gZnVuY3Rpb24gKHBhcmVudENsYXNzT3JPYmplY3QpIHtcbiAgICB0aGlzLnByb3RvdHlwZSA9IG5ldyBwYXJlbnRDbGFzc09yT2JqZWN0O1xuICAgIHRoaXMucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gdGhpcztcbiAgICB0aGlzLnByb3RvdHlwZS5wYXJlbnQgPSBwYXJlbnRDbGFzc09yT2JqZWN0LnByb3RvdHlwZTtcbiAgICByZXR1cm4gdGhpcztcbn07XG5cbmlmICghU3RyaW5nLnByb3RvdHlwZS50cmltKSB7XG4gICAgU3RyaW5nLnByb3RvdHlwZS50cmltID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJyk7XG4gICAgfTtcbn1cblxuLy8gUmVwbGljYXRlIHRoZSBja2V5IHByb2MgZnJvbSBCWU9ORFxuaWYgKCFTdHJpbmcucHJvdG90eXBlLmNrZXkpIHtcbiAgICBTdHJpbmcucHJvdG90eXBlLmNrZXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlcGxhY2UoL1xcVy9nLCAnJykudG9Mb3dlckNhc2UoKTtcbiAgICB9O1xufVxuLy8gTmFub1N0YXRlTWFuYWdlciBoYW5kbGVzIGRhdGEgZnJvbSB0aGUgc2VydmVyIGFuZCB1c2VzIGl0IHRvIHJlbmRlciB0ZW1wbGF0ZXNcbk5hbm9TdGF0ZU1hbmFnZXIgPSBmdW5jdGlvbiAoKSBcbntcbiAgICAvLyBfaXNJbml0aWFsaXNlZCBpcyBzZXQgdG8gdHJ1ZSB3aGVuIGFsbCBvZiB0aGlzIHVpJ3MgdGVtcGxhdGVzIGhhdmUgYmVlbiBwcm9jZXNzZWQvcmVuZGVyZWRcbiAgICB2YXIgX2lzSW5pdGlhbGlzZWQgPSBmYWxzZTtcbiAgICAvLyB0aGUgZGF0YSBmb3IgdGhpcyB1aVxuICAgIHZhciBfZGF0YSA9IG51bGw7XG5cbiAgICAvLyB0aGlzIGlzIGFuIGFycmF5IG9mIGNhbGxiYWNrcyB3aGljaCBhcmUgY2FsbGVkIHdoZW4gbmV3IGRhdGEgYXJyaXZlcywgYmVmb3JlIGl0IGlzIHByb2Nlc3NlZFxuICAgIHZhciBfYmVmb3JlVXBkYXRlQ2FsbGJhY2tzID0ge307XG4gICAgLy8gdGhpcyBpcyBhbiBhcnJheSBvZiBjYWxsYmFja3Mgd2hpY2ggYXJlIGNhbGxlZCB3aGVuIG5ldyBkYXRhIGFycml2ZXMsIGJlZm9yZSBpdCBpcyBwcm9jZXNzZWRcbiAgICB2YXIgX2FmdGVyVXBkYXRlQ2FsbGJhY2tzID0ge307XG4gICAgXG4gICAgLy8gdGhpcyBpcyBhbiBhcnJheSBvZiBzdGF0ZSBvYmplY3RzLCB0aGVzZSBjYW4gYmUgdXNlZCB0byBwcm92aWRlIGN1c3RvbSBqYXZhc2NyaXB0IGxvZ2ljXG4gICAgdmFyIF9zdGF0ZXMgPSB7fTtcbiAgICB2YXIgX2N1cnJlbnRTdGF0ZSA9IG51bGw7XG4gICAgXG4gICAgLy8gdGhlIGluaXQgZnVuY3Rpb24gaXMgY2FsbGVkIHdoZW4gdGhlIHVpIGhhcyBsb2FkZWRcbiAgICAvLyB0aGlzIGZ1bmN0aW9uIHNldHMgdXAgdGhlIHRlbXBsYXRlcyBhbmQgYmFzZSBmdW5jdGlvbmFsaXR5XG4gICAgdmFyIGluaXQgPSBmdW5jdGlvbiAoKSBcbiAgICB7XG4gICAgICAgIC8vIFdlIHN0b3JlIGluaXRpYWxEYXRhIGFuZCB0ZW1wbGF0ZURhdGEgaW4gdGhlIGJvZHkgdGFnLCBpdCdzIGFzIGdvb2QgYSBwbGFjZSBhcyBhbnlcbiAgICAgICAgX2RhdGEgPSAkKCdib2R5JykuZGF0YSgnaW5pdGlhbERhdGEnKTsgIFxuICAgICAgICBcbiAgICAgICAgaWYgKF9kYXRhID09IG51bGwgfHwgIV9kYXRhLmhhc093blByb3BlcnR5KCdjb25maWcnKSB8fCAhX2RhdGEuaGFzT3duUHJvcGVydHkoJ2RhdGEnKSlcbiAgICAgICAge1xuICAgICAgICAgICAgcmVwb3J0RXJyb3IoJ0Vycm9yOiBJbml0aWFsIGRhdGEgZGlkIG5vdCBsb2FkIGNvcnJlY3RseS4nICsgSlNPTi5zdHJpbmdpZnkoX2RhdGEpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzdGF0ZUtleSA9ICdkZWZhdWx0JztcbiAgICAgICAgaWYgKF9kYXRhWydjb25maWcnXS5oYXNPd25Qcm9wZXJ0eSgnc3RhdGVLZXknKSAmJiBfZGF0YVsnY29uZmlnJ11bJ3N0YXRlS2V5J10pXG4gICAgICAgIHtcbiAgICAgICAgICAgIHN0YXRlS2V5ID0gX2RhdGFbJ2NvbmZpZyddWydzdGF0ZUtleSddLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBOYW5vU3RhdGVNYW5hZ2VyLnNldEN1cnJlbnRTdGF0ZShzdGF0ZUtleSk7XG4gICAgICAgIFxuICAgICAgICAkKGRvY3VtZW50KS5vbigndGVtcGxhdGVzTG9hZGVkJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZG9VcGRhdGUoX2RhdGEpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBfaXNJbml0aWFsaXNlZCA9IHRydWU7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgXG4gICAgLy8gUmVjZWl2ZSB1cGRhdGUgZGF0YSBmcm9tIHRoZSBzZXJ2ZXJcbiAgICB2YXIgcmVjZWl2ZVVwZGF0ZURhdGEgPSBmdW5jdGlvbiAoanNvblN0cmluZylcbiAgICB7XG4gICAgICAgIHZhciB1cGRhdGVEYXRhO1xuICAgICAgICBcbiAgICAgICAgLy8gcmVwb3J0RXJyb3IoXCJyZWNpZXZlVXBkYXRlRGF0YSBjYWxsZWQuXCIgKyBcIjxicj5UeXBlOiBcIiArIHR5cGVvZiBqc29uU3RyaW5nKTsgLy9kZWJ1ZyBob29rXG4gICAgICAgIHRyeVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyBwYXJzZSB0aGUgSlNPTiBzdHJpbmcgZnJvbSB0aGUgc2VydmVyIGludG8gYSBKU09OIG9iamVjdFxuICAgICAgICAgICAgdXBkYXRlRGF0YSA9IGpRdWVyeS5wYXJzZUpTT04oanNvblN0cmluZyk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXBvcnRFcnJvcihcInJlY2lldmVVcGRhdGVEYXRhIGZhaWxlZC4gXCIgKyBcIjxicj5FcnJvciBuYW1lOiBcIiArIGVycm9yLm5hbWUgKyBcIjxicj5FcnJvciBNZXNzYWdlOiBcIiArIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gcmVwb3J0RXJyb3IoXCJyZWNpZXZlVXBkYXRlRGF0YSBwYXNzZWQgdHJ5Y2F0Y2ggYmxvY2suXCIpOyAvL2RlYnVnIGhvb2tcbiAgICAgICAgXG4gICAgICAgIGlmICghdXBkYXRlRGF0YS5oYXNPd25Qcm9wZXJ0eSgnZGF0YScpKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAoX2RhdGEgJiYgX2RhdGEuaGFzT3duUHJvcGVydHkoJ2RhdGEnKSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB1cGRhdGVEYXRhWydkYXRhJ10gPSBfZGF0YVsnZGF0YSddO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEnXSA9IHt9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoX2lzSW5pdGlhbGlzZWQpIC8vIGFsbCB0ZW1wbGF0ZXMgaGF2ZSBiZWVuIHJlZ2lzdGVyZWQsIHNvIHJlbmRlciB0aGVtXG4gICAgICAgIHtcbiAgICAgICAgICAgIGRvVXBkYXRlKHVwZGF0ZURhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgICAgX2RhdGEgPSB1cGRhdGVEYXRhOyAvLyBhbGwgdGVtcGxhdGVzIGhhdmUgbm90IGJlZW4gcmVnaXN0ZXJlZC4gV2Ugc2V0IF9kYXRhIGRpcmVjdGx5IGhlcmUgd2hpY2ggd2lsbCBiZSBhcHBsaWVkIGFmdGVyIHRoZSB0ZW1wbGF0ZSBpcyBsb2FkZWQgd2l0aCB0aGUgaW5pdGlhbCBkYXRhXG4gICAgICAgIH0gICBcbiAgICB9O1xuXG4gICAgLy8gVGhpcyBmdW5jdGlvbiBkb2VzIHRoZSB1cGRhdGUgYnkgY2FsbGluZyB0aGUgbWV0aG9kcyBvbiB0aGUgY3VycmVudCBzdGF0ZVxuICAgIHZhciBkb1VwZGF0ZSA9IGZ1bmN0aW9uIChkYXRhKVxuICAgIHtcbiAgICAgICAgaWYgKF9jdXJyZW50U3RhdGUgPT0gbnVsbClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgZGF0YSA9IF9jdXJyZW50U3RhdGUub25CZWZvcmVVcGRhdGUoZGF0YSk7XG5cbiAgICAgICAgaWYgKGRhdGEgPT09IGZhbHNlKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXBvcnRFcnJvcignZGF0YSBpcyBmYWxzZSwgcmV0dXJuJyk7XG4gICAgICAgICAgICByZXR1cm47IC8vIEEgYmVmb3JlVXBkYXRlQ2FsbGJhY2sgcmV0dXJuZWQgYSBmYWxzZSB2YWx1ZSwgdGhpcyBwcmV2ZW50cyB0aGUgcmVuZGVyIGZyb20gb2NjdXJpbmdcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgX2RhdGEgPSBkYXRhO1xuXG4gICAgICAgIF9jdXJyZW50U3RhdGUub25VcGRhdGUoX2RhdGEpO1xuXG4gICAgICAgIF9jdXJyZW50U3RhdGUub25BZnRlclVwZGF0ZShfZGF0YSk7XG4gICAgfTtcbiAgICBcbiAgICAvLyBFeGVjdXRlIGFsbCBjYWxsYmFja3MgaW4gdGhlIGNhbGxiYWNrcyBhcnJheS9vYmplY3QgcHJvdmlkZWQsIHVwZGF0ZURhdGEgaXMgcGFzc2VkIHRvIHRoZW0gZm9yIHByb2Nlc3NpbmcgYW5kIHBvdGVudGlhbCBtb2RpZmljYXRpb25cbiAgICB2YXIgZXhlY3V0ZUNhbGxiYWNrcyA9IGZ1bmN0aW9uIChjYWxsYmFja3MsIGRhdGEpXG4gICAgeyAgIFxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gY2FsbGJhY2tzKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAoY2FsbGJhY2tzLmhhc093blByb3BlcnR5KGtleSkgJiYgalF1ZXJ5LmlzRnVuY3Rpb24oY2FsbGJhY2tzW2tleV0pKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGRhdGEgPSBjYWxsYmFja3Nba2V5XS5jYWxsKHRoaXMsIGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgaW5pdDogZnVuY3Rpb24gKCkgXG4gICAgICAgIHtcbiAgICAgICAgICAgIGluaXQoKTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVjZWl2ZVVwZGF0ZURhdGE6IGZ1bmN0aW9uIChqc29uU3RyaW5nKSBcbiAgICAgICAge1xuICAgICAgICAgICAgcmVjZWl2ZVVwZGF0ZURhdGEoanNvblN0cmluZyk7XG4gICAgICAgIH0sXG4gICAgICAgIGFkZEJlZm9yZVVwZGF0ZUNhbGxiYWNrOiBmdW5jdGlvbiAoa2V5LCBjYWxsYmFja0Z1bmN0aW9uKVxuICAgICAgICB7XG4gICAgICAgICAgICBfYmVmb3JlVXBkYXRlQ2FsbGJhY2tzW2tleV0gPSBjYWxsYmFja0Z1bmN0aW9uO1xuICAgICAgICB9LFxuICAgICAgICBhZGRCZWZvcmVVcGRhdGVDYWxsYmFja3M6IGZ1bmN0aW9uIChjYWxsYmFja3MpIHsgICAgICAgIFxuICAgICAgICAgICAgZm9yICh2YXIgY2FsbGJhY2tLZXkgaW4gY2FsbGJhY2tzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFjYWxsYmFja3MuaGFzT3duUHJvcGVydHkoY2FsbGJhY2tLZXkpKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIE5hbm9TdGF0ZU1hbmFnZXIuYWRkQmVmb3JlVXBkYXRlQ2FsbGJhY2soY2FsbGJhY2tLZXksIGNhbGxiYWNrc1tjYWxsYmFja0tleV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICByZW1vdmVCZWZvcmVVcGRhdGVDYWxsYmFjazogZnVuY3Rpb24gKGtleSlcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKF9iZWZvcmVVcGRhdGVDYWxsYmFja3MuaGFzT3duUHJvcGVydHkoa2V5KSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgX2JlZm9yZVVwZGF0ZUNhbGxiYWNrc1trZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBleGVjdXRlQmVmb3JlVXBkYXRlQ2FsbGJhY2tzOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuIGV4ZWN1dGVDYWxsYmFja3MoX2JlZm9yZVVwZGF0ZUNhbGxiYWNrcywgZGF0YSk7XG4gICAgICAgIH0sXG4gICAgICAgIGFkZEFmdGVyVXBkYXRlQ2FsbGJhY2s6IGZ1bmN0aW9uIChrZXksIGNhbGxiYWNrRnVuY3Rpb24pXG4gICAgICAgIHtcbiAgICAgICAgICAgIF9hZnRlclVwZGF0ZUNhbGxiYWNrc1trZXldID0gY2FsbGJhY2tGdW5jdGlvbjtcbiAgICAgICAgfSxcbiAgICAgICAgYWRkQWZ0ZXJVcGRhdGVDYWxsYmFja3M6IGZ1bmN0aW9uIChjYWxsYmFja3MpIHsgICAgIFxuICAgICAgICAgICAgZm9yICh2YXIgY2FsbGJhY2tLZXkgaW4gY2FsbGJhY2tzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFjYWxsYmFja3MuaGFzT3duUHJvcGVydHkoY2FsbGJhY2tLZXkpKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIE5hbm9TdGF0ZU1hbmFnZXIuYWRkQWZ0ZXJVcGRhdGVDYWxsYmFjayhjYWxsYmFja0tleSwgY2FsbGJhY2tzW2NhbGxiYWNrS2V5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHJlbW92ZUFmdGVyVXBkYXRlQ2FsbGJhY2s6IGZ1bmN0aW9uIChrZXkpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmIChfYWZ0ZXJVcGRhdGVDYWxsYmFja3MuaGFzT3duUHJvcGVydHkoa2V5KSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgX2FmdGVyVXBkYXRlQ2FsbGJhY2tzW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGV4ZWN1dGVBZnRlclVwZGF0ZUNhbGxiYWNrczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiBleGVjdXRlQ2FsbGJhY2tzKF9hZnRlclVwZGF0ZUNhbGxiYWNrcywgZGF0YSk7XG4gICAgICAgIH0sXG4gICAgICAgIGFkZFN0YXRlOiBmdW5jdGlvbiAoc3RhdGUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmICghKHN0YXRlIGluc3RhbmNlb2YgTmFub1N0YXRlQ2xhc3MpKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlcG9ydEVycm9yKCdFUlJPUjogQXR0ZW1wdGVkIHRvIGFkZCBhIHN0YXRlIHdoaWNoIGlzIG5vdCBpbnN0YW5jZW9mIE5hbm9TdGF0ZUNsYXNzJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFzdGF0ZS5rZXkpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVwb3J0RXJyb3IoJ0VSUk9SOiBBdHRlbXB0ZWQgdG8gYWRkIGEgc3RhdGUgd2l0aCBhbiBpbnZhbGlkIHN0YXRlS2V5Jyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX3N0YXRlc1tzdGF0ZS5rZXldID0gc3RhdGU7XG4gICAgICAgIH0sXG4gICAgICAgIHNldEN1cnJlbnRTdGF0ZTogZnVuY3Rpb24gKHN0YXRlS2V5KVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHN0YXRlS2V5ID09ICd1bmRlZmluZWQnIHx8ICFzdGF0ZUtleSkge1xuICAgICAgICAgICAgICAgIHJlcG9ydEVycm9yKCdFUlJPUjogTm8gc3RhdGUga2V5IHdhcyBwYXNzZWQhJyk7ICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFfc3RhdGVzLmhhc093blByb3BlcnR5KHN0YXRlS2V5KSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXBvcnRFcnJvcignRVJST1I6IEF0dGVtcHRlZCB0byBzZXQgYSBjdXJyZW50IHN0YXRlIHdoaWNoIGRvZXMgbm90IGV4aXN0OiAnICsgc3RhdGVLZXkpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0gICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgcHJldmlvdXNTdGF0ZSA9IF9jdXJyZW50U3RhdGU7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIF9jdXJyZW50U3RhdGUgPSBfc3RhdGVzW3N0YXRlS2V5XTtcblxuICAgICAgICAgICAgaWYgKHByZXZpb3VzU3RhdGUgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHByZXZpb3VzU3RhdGUub25SZW1vdmUoX2N1cnJlbnRTdGF0ZSk7XG4gICAgICAgICAgICB9ICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIF9jdXJyZW50U3RhdGUub25BZGQocHJldmlvdXNTdGF0ZSk7XG5cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9LFxuICAgICAgICBnZXRDdXJyZW50U3RhdGU6IGZ1bmN0aW9uICgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiBfY3VycmVudFN0YXRlO1xuICAgICAgICB9LFxuICAgICAgICBnZXREYXRhOiBmdW5jdGlvbiAoKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gX2RhdGE7XG4gICAgICAgIH1cbiAgICB9O1xufSAoKTtcbiBcbi8vIE5hbm9CYXNlQ2FsbGJhY2tzIGlzIHdoZXJlIHRoZSBiYXNlIGNhbGxiYWNrcyAoY29tbW9uIHRvIGFsbCB0ZW1wbGF0ZXMpIGFyZSBzdG9yZWRcclxuTmFub0Jhc2VDYWxsYmFja3MgPSBmdW5jdGlvbiAoKVxyXG57XHJcbiAgICAvLyBfY2FuQ2xpY2sgaXMgdXNlZCB0byBkaXNhYmxlIGNsaWNrcyBmb3IgYSBzaG9ydCBwZXJpb2QgYWZ0ZXIgZWFjaCBjbGljayAodG8gYXZvaWQgbWlzLWNsaWNrcylcclxuICAgIHZhciBfY2FuQ2xpY2sgPSB0cnVlO1xyXG4gICAgdmFyIF9iYXNlQmVmb3JlVXBkYXRlQ2FsbGJhY2tzID0ge307XHJcbiAgICB2YXIgX2Jhc2VBZnRlclVwZGF0ZUNhbGxiYWNrcyA9IHtcclxuICAgICAgICAvLyB0aGlzIGNhbGxiYWNrIGlzIHRyaWdnZXJlZCBhZnRlciBuZXcgZGF0YSBpcyBwcm9jZXNzZWRcclxuICAgICAgICAvLyBpdCB1cGRhdGVzIHRoZSBzdGF0dXMvdmlzaWJpbGl0eSBpY29uIGFuZCBhZGRzIGNsaWNrIGV2ZW50IGhhbmRsaW5nIHRvIGJ1dHRvbnMvbGlua3MgICAgIFxyXG4gICAgICAgIHN0YXR1czogZnVuY3Rpb24gKHVwZGF0ZURhdGEpIHtcclxuICAgICAgICAgICAgdmFyIHVpU3RhdHVzQ2xhc3M7XHJcbiAgICAgICAgICAgIGlmICh1cGRhdGVEYXRhWydjb25maWcnXVsnc3RhdHVzJ10gPT0gMilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdWlTdGF0dXNDbGFzcyA9ICdnb29kJztcclxuICAgICAgICAgICAgICAgICQoJy5saW5rQWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2luYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAodXBkYXRlRGF0YVsnY29uZmlnJ11bJ3N0YXR1cyddID09IDEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHVpU3RhdHVzQ2xhc3MgPSAnYXZlcmFnZSc7XHJcbiAgICAgICAgICAgICAgICAkKCcubGlua0FjdGl2ZScpLmFkZENsYXNzKCdpbmFjdGl2ZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdWlTdGF0dXNDbGFzcyA9ICdiYWQnO1xyXG4gICAgICAgICAgICAgICAgJCgnLmxpbmtBY3RpdmUnKS5hZGRDbGFzcygnaW5hY3RpdmUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkKCcuc3RhdHVzaWNvbicpLnJlbW92ZUNsYXNzKFwiZ29vZCBiYWQgYXZlcmFnZVwiKS5hZGRDbGFzcyh1aVN0YXR1c0NsYXNzKTtcclxuICAgICAgICAgICAgJCgnLmxpbmtBY3RpdmUnKS5zdG9wVGltZSgnbGlua1BlbmRpbmcnKTtcclxuICAgICAgICAgICAgJCgnLmxpbmtBY3RpdmUnKS5yZW1vdmVDbGFzcygnbGlua1BlbmRpbmcnKTtcclxuXHJcbiAgICAgICAgICAgICQoJy5saW5rQWN0aXZlJylcclxuICAgICAgICAgICAgICAgIC5vZmYoJ2NsaWNrJylcclxuICAgICAgICAgICAgICAgIC5vbignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBocmVmID0gJCh0aGlzKS5kYXRhKCdocmVmJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoaHJlZiAhPSBudWxsICYmIF9jYW5DbGljaylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jYW5DbGljayA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCdib2R5Jykub25lVGltZSgzMDAsICdlbmFibGVDbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jYW5DbGljayA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodXBkYXRlRGF0YVsnY29uZmlnJ11bJ3N0YXR1cyddID09IDIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykub25lVGltZSgzMDAsICdsaW5rUGVuZGluZycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdsaW5rUGVuZGluZycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBocmVmO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZURhdGE7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBuYW5vbWFwOiBmdW5jdGlvbiAodXBkYXRlRGF0YSkge1xyXG4gICAgICAgICAgICAkKCcubWFwSWNvbicpXHJcbiAgICAgICAgICAgICAgICAub2ZmKCdtb3VzZWVudGVyIG1vdXNlbGVhdmUnKVxyXG4gICAgICAgICAgICAgICAgLm9uKCdtb3VzZWVudGVyJyxcclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcjdWlNYXBUb29sdGlwJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5odG1sKCQodGhpcykuY2hpbGRyZW4oJy50b29sdGlwJykuaHRtbCgpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNob3coKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnN0b3BUaW1lKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbmVUaW1lKDUwMDAsICdoaWRlVG9vbHRpcCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZhZGVPdXQoNTAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAkKCcuem9vbUxpbmsnKVxyXG4gICAgICAgICAgICAgICAgLm9mZignY2xpY2snKVxyXG4gICAgICAgICAgICAgICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHpvb21MZXZlbCA9ICQodGhpcykuZGF0YSgnem9vbUxldmVsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVpTWFwT2JqZWN0ID0gJCgnI3VpTWFwJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVpTWFwV2lkdGggPSB1aU1hcE9iamVjdC53aWR0aCgpICogem9vbUxldmVsO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB1aU1hcEhlaWdodCA9IHVpTWFwT2JqZWN0LmhlaWdodCgpICogem9vbUxldmVsO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB1aU1hcE9iamVjdC5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB6b29tOiB6b29tTGV2ZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6ICc1MCUnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3A6ICc1MCUnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5MZWZ0OiAnLScgKyBNYXRoLmZsb29yKHVpTWFwV2lkdGggLyAyKSArICdweCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpblRvcDogJy0nICsgTWF0aC5mbG9vcih1aU1hcEhlaWdodCAvIDIpICsgJ3B4J1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAkKCcjdWlNYXBJbWFnZScpLmF0dHIoJ3NyYycsdXBkYXRlRGF0YVsnY29uZmlnJ11bJ21hcCddICsgJ19uYW5vbWFwX3onICsgdXBkYXRlRGF0YVsnY29uZmlnJ11bJ21hcFpMZXZlbCddICsgJy5wbmcnKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB1cGRhdGVEYXRhO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBhZGRDYWxsYmFja3M6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgTmFub1N0YXRlTWFuYWdlci5hZGRCZWZvcmVVcGRhdGVDYWxsYmFja3MoX2Jhc2VCZWZvcmVVcGRhdGVDYWxsYmFja3MpO1xyXG4gICAgICAgICAgICBOYW5vU3RhdGVNYW5hZ2VyLmFkZEFmdGVyVXBkYXRlQ2FsbGJhY2tzKF9iYXNlQWZ0ZXJVcGRhdGVDYWxsYmFja3MpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmVtb3ZlQ2FsbGJhY2tzOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGNhbGxiYWNrS2V5IGluIF9iYXNlQmVmb3JlVXBkYXRlQ2FsbGJhY2tzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoX2Jhc2VCZWZvcmVVcGRhdGVDYWxsYmFja3MuaGFzT3duUHJvcGVydHkoY2FsbGJhY2tLZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgTmFub1N0YXRlTWFuYWdlci5yZW1vdmVCZWZvcmVVcGRhdGVDYWxsYmFjayhjYWxsYmFja0tleSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yICh2YXIgY2FsbGJhY2tLZXkgaW4gX2Jhc2VBZnRlclVwZGF0ZUNhbGxiYWNrcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKF9iYXNlQWZ0ZXJVcGRhdGVDYWxsYmFja3MuaGFzT3duUHJvcGVydHkoY2FsbGJhY2tLZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgTmFub1N0YXRlTWFuYWdlci5yZW1vdmVBZnRlclVwZGF0ZUNhbGxiYWNrKGNhbGxiYWNrS2V5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn0oKTtcclxuXG4vLyBOYW5vQmFzZUhlbHBlcnMgaXMgd2hlcmUgdGhlIGJhc2UgdGVtcGxhdGUgaGVscGVycyAoY29tbW9uIHRvIGFsbCB0ZW1wbGF0ZXMpIGFyZSBzdG9yZWRcbk5hbm9CYXNlSGVscGVycyA9IGZ1bmN0aW9uICgpXG57XG4gICAgdmFyIF9iYXNlSGVscGVycyA9IHtcbiAgICAgICAgICAgIC8vIGNoYW5nZSB1aSBzdHlsaW5nIHRvIFwic3luZGljYXRlIG1vZGVcIlxuICAgICAgICAgICAgc3luZGljYXRlTW9kZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJCgnLm1haW5CRycpLmNzcyhcImJhY2tncm91bmRcIiwgXCJ1cmwoJ3N5bmRpY2F0ZS5wbmcnKSBuby1yZXBlYXQgZml4ZWQgY2VudGVyLzUwJSA1MCUsIGxpbmVhci1ncmFkaWVudCh0byBib3R0b20sICM4ZjE0MTQgMCUsICM0QjBBMEEgMTAwJSkgbm8tcmVwZWF0IGZpeGVkIGNlbnRlcjtcIik7XG5cbiAgICAgICAgICAgICAgICAkKCcjdWlUaXRsZUZsdWZmJykuY3NzKFwiYmFja2dyb3VuZC1pbWFnZVwiLFwidXJsKCd1aVRpdGxlRmx1ZmYtU3luZGljYXRlLnBuZycpXCIpO1xuICAgICAgICAgICAgICAgICQoJyN1aVRpdGxlRmx1ZmYnKS5jc3MoXCJiYWNrZ3JvdW5kLXBvc2l0aW9uXCIsXCI1MCUgNTAlXCIpO1xuICAgICAgICAgICAgICAgICQoJyN1aVRpdGxlRmx1ZmYnKS5jc3MoXCJiYWNrZ3JvdW5kLXJlcGVhdFwiLCBcIm5vLXJlcGVhdFwiKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIGNvbWJpbmU6IGZ1bmN0aW9uKCBhcnIxLCBhcnIyICkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhcnIxICYmIGFycjIgPyBhcnIxLmNvbmNhdChhcnIyKSA6IGFycjEgfHwgYXJyMjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkdW1wOiBmdW5jdGlvbiggYXJyMSApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoYXJyMSk7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAvLyBHZW5lcmF0ZSBhIEJ5b25kIGxpbmtcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uKCB0ZXh0LCBpY29uLCBwYXJhbWV0ZXJzLCBzdGF0dXMsIGVsZW1lbnRDbGFzcywgZWxlbWVudElkICkge1xuICAgICAgICAgICAgICAgIHZhciBpY29uSHRtbCA9ICcnO1xuICAgICAgICAgICAgICAgIHZhciBpY29uQ2xhc3MgPSAnbm9JY29uJztcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGljb24gIT0gJ3VuZGVmaW5lZCcgJiYgaWNvbilcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGljb25IdG1sID0gJzxkaXYgY2xhc3M9XCJ1aUxpbmtQZW5kaW5nSWNvblwiPjwvZGl2PjxpIGNsYXNzPVwiZmEgZmEtZncgZmEtJyArIGljb24gKyAnXCI+PC9pPic7XG4gICAgICAgICAgICAgICAgICAgIGljb25DbGFzcyA9ICdoYXNJY29uJztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGVsZW1lbnRDbGFzcyA9PSAndW5kZWZpbmVkJyB8fCAhZWxlbWVudENsYXNzKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudENsYXNzID0gJ2xpbmsnO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50SWRIdG1sID0gJyc7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBlbGVtZW50SWQgIT0gJ3VuZGVmaW5lZCcgJiYgZWxlbWVudElkKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudElkSHRtbCA9ICdpZD1cIicgKyBlbGVtZW50SWQgKyAnXCInO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciB0aWQgPSBOYW5vVHJhbnNpdGlvbi5hbGxvY0lEKGVsZW1lbnRJZEh0bWwgKyBcIl9cIiArIHRleHQudG9TdHJpbmcoKS5yZXBsYWNlKC9bXmEtejAtOV9dL2dpLCBcIl9cIikgKyBcIl9cIiArIGljb24pO1xuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzdGF0dXMgIT0gJ3VuZGVmaW5lZCcgJiYgc3RhdHVzKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICc8ZGl2IHVuc2VsZWN0YWJsZT1cIm9uXCIgY2xhc3M9XCJsaW5rICcgKyBpY29uQ2xhc3MgKyAnICcgKyB0aWQgKyAnXCIgJyArIGVsZW1lbnRJZEh0bWwgKyAnPicgKyBpY29uSHRtbCArIHRleHQgKyAnPC9kaXY+PHNjcmlwdD4kKGZ1bmN0aW9uKCkgeyB2YXIgbmV3U3RhdGUgPSB7XCIuLmNsYXNzXCI6IFwiJyArIGVsZW1lbnRDbGFzcyArICcgJyArIHN0YXR1cyArICdcIn07IHZhciBvbGQgPSBOYW5vVHJhbnNpdGlvbi50cmFuc2l0aW9uRWxlbWVudChcIicgKyB0aWQgKyAnXCIsIG51bGwsIG5ld1N0YXRlLCAyMDApOyBOYW5vVHJhbnNpdGlvbi5hbmltYXRlSG92ZXIoXCInICsgdGlkICsgJ1wiLCBudWxsLCBvbGQsIG5ld1N0YXRlKTsgfSk7PC9zY3JpcHQ+JztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gJzxkaXYgdW5zZWxlY3RhYmxlPVwib25cIiBjbGFzcz1cImxpbmtBY3RpdmUgJyArIGljb25DbGFzcyArICcgJyArIHRpZCArICdcIiBkYXRhLWhyZWY9XCInICsgTmFub1V0aWxpdHkuZ2VuZXJhdGVIcmVmKHBhcmFtZXRlcnMpICsgJ1wiICcgKyBlbGVtZW50SWRIdG1sICsgJz4nICsgaWNvbkh0bWwgKyB0ZXh0ICsgJzwvZGl2PjxzY3JpcHQ+JChmdW5jdGlvbigpIHsgdmFyIG5ld1N0YXRlID0ge1wiLi5jbGFzc1wiOiBcIicgKyBlbGVtZW50Q2xhc3MgKyAnXCJ9OyB2YXIgb2xkID0gTmFub1RyYW5zaXRpb24udHJhbnNpdGlvbkVsZW1lbnQoXCInICsgdGlkICsgJ1wiLCBudWxsLCBuZXdTdGF0ZSwgMjAwKTsgTmFub1RyYW5zaXRpb24uYW5pbWF0ZUhvdmVyKFwiJyArIHRpZCArICdcIiwgbnVsbCwgb2xkLCBuZXdTdGF0ZSk7IH0pOzwvc2NyaXB0Pic7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICB4b3I6IGZ1bmN0aW9uIChudW1iZXIsYml0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bWJlciBeIGJpdDtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIHByZWNpc2lvblJvdW5kOiBmdW5jdGlvbiAodmFsdWUsIHBsYWNlcykge1xuICAgICAgICAgICAgICAgIGlmKHBsYWNlcyA9PSAwKXtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hdGgucm91bmQobnVtYmVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIG11bHRpcGxpZXIgPSBNYXRoLnBvdygxMCwgcGxhY2VzKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gKE1hdGgucm91bmQodmFsdWUgKiBtdWx0aXBsaWVyKSAvIG11bHRpcGxpZXIpO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLy8gUm91bmQgYSBudW1iZXIgdG8gdGhlIG5lYXJlc3QgaW50ZWdlclxuICAgICAgICAgICAgcm91bmQ6IGZ1bmN0aW9uKG51bWJlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLnJvdW5kKG51bWJlcik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZml4ZWQ6IGZ1bmN0aW9uKG51bWJlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLnJvdW5kKG51bWJlciAqIDEwKSAvIDEwO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8vIFJvdW5kIGEgbnVtYmVyIGRvd24gdG8gaW50ZWdlclxuICAgICAgICAgICAgZmxvb3I6IGZ1bmN0aW9uKG51bWJlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLmZsb29yKG51bWJlcik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLy8gUm91bmQgYSBudW1iZXIgdXAgdG8gaW50ZWdlclxuICAgICAgICAgICAgY2VpbDogZnVuY3Rpb24obnVtYmVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIE1hdGguY2VpbChudW1iZXIpO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLy8gRm9ybWF0IGEgc3RyaW5nICh+c3RyaW5nKFwiSGVsbG8gezB9LCBob3cgYXJlIHsxfT9cIiwgJ01hcnRpbicsICd5b3UnKSBiZWNvbWVzIFwiSGVsbG8gTWFydGluLCBob3cgYXJlIHlvdT9cIilcbiAgICAgICAgICAgIHN0cmluZzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMClcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PSAxKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyZ3VtZW50c1swXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBzdHJpbmdBcmdzID0gW107XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJpbmdBcmdzLnB1c2goYXJndW1lbnRzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJndW1lbnRzWzBdLmZvcm1hdChzdHJpbmdBcmdzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZvcm1hdE51bWJlcjogZnVuY3Rpb24oeCkge1xuICAgICAgICAgICAgICAgIC8vIEZyb20gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8yOTAxMTAyL2hvdy10by1wcmludC1hLW51bWJlci13aXRoLWNvbW1hcy1hcy10aG91c2FuZHMtc2VwYXJhdG9ycy1pbi1qYXZhc2NyaXB0XG4gICAgICAgICAgICAgICAgdmFyIHBhcnRzID0geC50b1N0cmluZygpLnNwbGl0KFwiLlwiKTtcbiAgICAgICAgICAgICAgICBwYXJ0c1swXSA9IHBhcnRzWzBdLnJlcGxhY2UoL1xcQig/PShcXGR7M30pKyg/IVxcZCkpL2csIFwiLFwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFydHMuam9pbihcIi5cIik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLy8gQ2FwaXRhbGl6ZSB0aGUgZmlyc3QgbGV0dGVyIG9mIGEgc3RyaW5nLiBGcm9tIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTAyNjA2OS9jYXBpdGFsaXplLXRoZS1maXJzdC1sZXR0ZXItb2Ytc3RyaW5nLWluLWphdmFzY3JpcHRcbiAgICAgICAgICAgIGNhcGl0YWxpemVGaXJzdExldHRlcjogZnVuY3Rpb24oIHN0cmluZyApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RyaW5nLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyaW5nLnNsaWNlKDEpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8vIERpc3BsYXkgYSBiYXIuIFVzZWQgdG8gc2hvdyBoZWFsdGgsIGNhcGFjaXR5LCBldGMuXG4gICAgICAgICAgICBkaXNwbGF5QmFyOiBmdW5jdGlvbiggdmFsdWUsIHJhbmdlTWluLCByYW5nZU1heCwgc3R5bGVDbGFzcywgc2hvd1RleHQgKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAocmFuZ2VNaW4gPCByYW5nZU1heClcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA8IHJhbmdlTWluKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHJhbmdlTWluO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlID4gcmFuZ2VNYXgpXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gcmFuZ2VNYXg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID4gcmFuZ2VNaW4pXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gcmFuZ2VNaW47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPCByYW5nZU1heClcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSByYW5nZU1heDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc3R5bGVDbGFzcyA9PSAndW5kZWZpbmVkJyB8fCAhc3R5bGVDbGFzcylcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlQ2xhc3MgPSAnJztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHNob3dUZXh0ID09ICd1bmRlZmluZWQnIHx8ICFzaG93VGV4dClcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHNob3dUZXh0ID0gJyc7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIHBlcmNlbnRhZ2UgPSBNYXRoLnJvdW5kKCh2YWx1ZSAtIHJhbmdlTWluKSAvIChyYW5nZU1heCAtIHJhbmdlTWluKSAqIDEwMCk7XG4gICAgICAgICAgICAgICAgdmFyIHRpZCA9IE5hbm9UcmFuc2l0aW9uLmFsbG9jSUQocmFuZ2VNaW4gKyBcIl9cIiArIHJhbmdlTWF4KTtcblxuICAgICAgICAgICAgICAgIHJldHVybiAnPGRpdiBjbGFzcz1cImRpc3BsYXlCYXIgJyArIHRpZCArICcgJyArIHN0eWxlQ2xhc3MgKyAnXCI+PGRpdiBjbGFzcz1cImRpc3BsYXlCYXJGaWxsXCI+PC9kaXY+PGRpdiBjbGFzcz1cImRpc3BsYXlCYXJUZXh0ICcgKyBzdHlsZUNsYXNzICsgJ1wiPicgKyBzaG93VGV4dCArICc8L2Rpdj48L2Rpdj48c2NyaXB0PiQoZnVuY3Rpb24oKSB7IE5hbm9UcmFuc2l0aW9uLnRyYW5zaXRpb25FbGVtZW50KFwiJyArIHRpZCArICdcIiwgXCIuZGlzcGxheUJhckZpbGxcIiwge3dpZHRoOiBcIicgKyBwZXJjZW50YWdlICsgJyVcIiwgXCIuLmNsYXNzXCI6IFwiJyArIHN0eWxlQ2xhc3MgKyAnXCJ9KTsgfSk7PC9zY3JpcHQ+JztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvLyBDb252ZXJ0IGRhbmdlciBsZXZlbCB0byBjbGFzcyAoZm9yIHRoZSBhaXIgYWxhcm0pXG4gICAgICAgICAgICBkYW5nZXJUb0NsYXNzOiBmdW5jdGlvbihsZXZlbCkge1xuICAgICAgICAgICAgICAgIGlmKGxldmVsID09IDApIHJldHVybiAnZ29vZCc7XG4gICAgICAgICAgICAgICAgaWYobGV2ZWwgPT0gMSkgcmV0dXJuICdhdmVyYWdlJztcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2JhZCc7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGFuZ2VyVG9TcGFuOiBmdW5jdGlvbihsZXZlbCkge1xuICAgICAgICAgICAgICAgIGlmKGxldmVsID09IDApIHJldHVybiAnXCI8c3BhbiBjbGFzcz1cImdvb2RcIj5Hb29kPC9zcGFuPlwiJztcbiAgICAgICAgICAgICAgICBpZihsZXZlbCA9PSAxKSByZXR1cm4gJ1wiPHNwYW4gY2xhc3M9XCJhdmVyYWdlXCI+TWlub3IgQWxlcnQ8L3NwYW4+XCInO1xuICAgICAgICAgICAgICAgIHJldHVybiAnXCI8c3BhbiBjbGFzcz1cImJhZFwiPk1ham9yIEFsZXJ0PC9zcGFuPlwiJztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZW5lcmF0ZUhyZWY6IGZ1bmN0aW9uIChwYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICAgICAgdmFyIGJvZHkgPSAkKCdib2R5Jyk7IC8vIEZvciBzb21lIGZ1Y2tpbmcgcmVhc29uLCBkYXRhIGlzIHN0b3JlZCBpbiB0aGUgYm9keSB0YWcuXG4gICAgICAgICAgICAgICAgX3VybFBhcmFtZXRlcnMgPSBib2R5LmRhdGEoJ3VybFBhcmFtZXRlcnMnKTtcbiAgICAgICAgICAgICAgICB2YXIgcXVlcnlTdHJpbmcgPSAnPyc7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gX3VybFBhcmFtZXRlcnMpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBpZiAoX3VybFBhcmFtZXRlcnMuaGFzT3duUHJvcGVydHkoa2V5KSlcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHF1ZXJ5U3RyaW5nICE9PSAnPycpXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlTdHJpbmcgKz0gJzsnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlTdHJpbmcgKz0ga2V5ICsgJz0nICsgX3VybFBhcmFtZXRlcnNba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBwYXJhbWV0ZXJzKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmFtZXRlcnMuaGFzT3duUHJvcGVydHkoa2V5KSlcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHF1ZXJ5U3RyaW5nICE9PSAnPycpXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlTdHJpbmcgKz0gJzsnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlTdHJpbmcgKz0ga2V5ICsgJz0nICsgcGFyYW1ldGVyc1trZXldO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBxdWVyeVN0cmluZztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvLyBEaXNwbGF5IEROQSBCbG9ja3MgKGZvciB0aGUgRE5BIE1vZGlmaWVyIFVJKVxuICAgICAgICAgICAgZGlzcGxheUROQUJsb2NrczogZnVuY3Rpb24oZG5hU3RyaW5nLCBzZWxlY3RlZEJsb2NrLCBzZWxlY3RlZFN1YmJsb2NrLCBibG9ja1NpemUsIHBhcmFtS2V5KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFkbmFTdHJpbmcpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJzxkaXYgY2xhc3M9XCJub3RpY2VcIj5QbGVhc2UgcGxhY2UgYSB2YWxpZCBzdWJqZWN0IGludG8gdGhlIEROQSBtb2RpZmllci48L2Rpdj4nO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBjaGFyYWN0ZXJzID0gZG5hU3RyaW5nLnNwbGl0KCcnKTtcblxuICAgICAgICAgICAgICAgIHZhciBodG1sID0gJzxkaXYgY2xhc3M9XCJkbmFCbG9ja1wiPjxkaXYgY2xhc3M9XCJsaW5rIGRuYUJsb2NrTnVtYmVyXCI+MTwvZGl2Pic7XG4gICAgICAgICAgICAgICAgdmFyIGJsb2NrID0gMTtcbiAgICAgICAgICAgICAgICB2YXIgc3ViYmxvY2sgPSAxO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGluZGV4IGluIGNoYXJhY3RlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGFyYWN0ZXJzLmhhc093blByb3BlcnR5KGluZGV4KSB8fCB0eXBlb2YgY2hhcmFjdGVyc1tpbmRleF0gPT09ICdvYmplY3QnKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXJhbWV0ZXJzO1xuICAgICAgICAgICAgICAgICAgICBpZiAocGFyYW1LZXkudG9VcHBlckNhc2UoKSA9PSAnVUknKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMgPSB7ICdzZWxlY3RVSUJsb2NrJyA6IGJsb2NrLCAnc2VsZWN0VUlTdWJibG9jaycgOiBzdWJibG9jayB9O1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVycyA9IHsgJ3NlbGVjdFNFQmxvY2snIDogYmxvY2ssICdzZWxlY3RTRVN1YmJsb2NrJyA6IHN1YmJsb2NrIH07XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB2YXIgc3RhdHVzID0gJ2xpbmtBY3RpdmUnO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYmxvY2sgPT0gc2VsZWN0ZWRCbG9jayAmJiBzdWJibG9jayA9PSBzZWxlY3RlZFN1YmJsb2NrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMgPSAnc2VsZWN0ZWQnO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz1cImxpbmsgJyArIHN0YXR1cyArICcgZG5hU3ViQmxvY2tcIiBkYXRhLWhyZWY9XCInICsgTmFub1V0aWxpdHkuZ2VuZXJhdGVIcmVmKHBhcmFtZXRlcnMpICsgJ1wiIGlkPVwiZG5hQmxvY2snICsgaW5kZXggKyAnXCI+JyArIGNoYXJhY3RlcnNbaW5kZXhdICsgJzwvZGl2Pic7XG5cbiAgICAgICAgICAgICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ICUgYmxvY2tTaXplID09IDAgJiYgaW5kZXggPCBjaGFyYWN0ZXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2srKztcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YmJsb2NrID0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gJzwvZGl2PjxkaXYgY2xhc3M9XCJkbmFCbG9ja1wiPjxkaXYgY2xhc3M9XCJsaW5rIGRuYUJsb2NrTnVtYmVyXCI+JyArIGJsb2NrICsgJzwvZGl2Pic7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJibG9jaysrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaHRtbCArPSAnPC9kaXY+JztcblxuICAgICAgICAgICAgICAgIHJldHVybiBodG1sO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNNaXJyb3I6IGZ1bmN0aW9uKHRleHRib3gpIHtcbiAgICAgICAgICAgICAgICB2YXIgZWRpdG9yID0gQ29kZU1pcnJvci5mcm9tVGV4dEFyZWEoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGV4dGJveCksIHtcbiAgICAgICAgICAgICAgICAgICAgbGluZU51bWJlcnM6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGluZGVudFVuaXQ6IDQsXG4gICAgICAgICAgICAgICAgICAgIGluZGVudFdpdGhUYWJzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB0aGVtZTogXCJsZXNzZXItZGFya1wiXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc21vb3RoTnVtYmVyOiBmdW5jdGlvbihudW1iZXIpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGlkID0gTmFub1RyYW5zaXRpb24uYWxsb2NJRChcIm5cIik7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gJzxzcGFuIGNsYXNzPVwiJyArIHRpZCArICdcIj48L3NwYW4+PHNjcmlwdD4kKGZ1bmN0aW9uKCkgeyB2YXIgbmV3U3RhdGUgPSB7dmFsdWU6ICcgKyBudW1iZXIgKyAnfTsgdmFyIG9sZCA9IE5hbm9UcmFuc2l0aW9uLnVwZGF0ZUVsZW1lbnQoXCInICsgdGlkICsgJ1wiLCBuZXdTdGF0ZSk7IE5hbm9UcmFuc2l0aW9uLmFuaW1hdGVUZXh0VmFsdWUoXCInICsgdGlkICsgJ1wiLCBudWxsLCAtMSwgb2xkW1widmFsdWVcIl0sIG5ld1N0YXRlW1widmFsdWVcIl0pOyB9KTs8L3NjcmlwdD4nO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNtb290aFJvdW5kOiBmdW5jdGlvbihudW1iZXIsIHBsYWNlcykge1xuICAgICAgICAgICAgICAgIHZhciB0aWQgPSBOYW5vVHJhbnNpdGlvbi5hbGxvY0lEKHBsYWNlcyk7XG4gICAgICAgICAgICAgICAgaWYocGxhY2VzID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlZCA9IDA7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gJzxzcGFuIGNsYXNzPVwiJyArIHRpZCArICdcIj48L3NwYW4+PHNjcmlwdD4kKGZ1bmN0aW9uKCkgeyB2YXIgbmV3U3RhdGUgPSB7dmFsdWU6ICcgKyBudW1iZXIudG9GaXhlZChwbGFjZXMpICsgJ307IHZhciBvbGQgPSBOYW5vVHJhbnNpdGlvbi51cGRhdGVFbGVtZW50KFwiJyArIHRpZCArICdcIiwgbmV3U3RhdGUpOyBOYW5vVHJhbnNpdGlvbi5hbmltYXRlVGV4dFZhbHVlKFwiJyArIHRpZCArICdcIiwgbnVsbCwgJyArIHBsYWNlcyArICcsIG9sZFtcInZhbHVlXCJdLCBuZXdTdGF0ZVtcInZhbHVlXCJdKTsgfSk7PC9zY3JpcHQ+JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGFkZEhlbHBlcnM6IGZ1bmN0aW9uICgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIE5hbm9UZW1wbGF0ZS5hZGRIZWxwZXJzKF9iYXNlSGVscGVycyk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVtb3ZlSGVscGVyczogZnVuY3Rpb24gKClcbiAgICAgICAge1xuICAgICAgICAgICAgZm9yICh2YXIgaGVscGVyS2V5IGluIF9iYXNlSGVscGVycylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpZiAoX2Jhc2VIZWxwZXJzLmhhc093blByb3BlcnR5KGhlbHBlcktleSkpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBOYW5vVGVtcGxhdGUucmVtb3ZlSGVscGVyKGhlbHBlcktleSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbn0oKTtcblxuXG5OYW5vU3RhdGVEZWZhdWx0Q2xhc3MuaW5oZXJpdHNGcm9tKE5hbm9TdGF0ZUNsYXNzKTtcbnZhciBOYW5vU3RhdGVEZWZhdWx0ID0gbmV3IE5hbm9TdGF0ZURlZmF1bHRDbGFzcygpO1xuXG5mdW5jdGlvbiBOYW5vU3RhdGVEZWZhdWx0Q2xhc3MoKSB7XG5cbiAgICB0aGlzLmtleSA9ICdkZWZhdWx0JztcblxuICAgIC8vdGhpcy5wYXJlbnQuY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcblxuICAgIHRoaXMua2V5ID0gdGhpcy5rZXkudG9Mb3dlckNhc2UoKTtcblxuICAgIE5hbm9TdGF0ZU1hbmFnZXIuYWRkU3RhdGUodGhpcyk7XG59XG5cbk5hbm9TdGF0ZVBEQUNsYXNzLmluaGVyaXRzRnJvbShOYW5vU3RhdGVDbGFzcyk7XG52YXIgTmFub1N0YXRlUERBID0gbmV3IE5hbm9TdGF0ZVBEQUNsYXNzKCk7XG5cbmZ1bmN0aW9uIE5hbm9TdGF0ZVBEQUNsYXNzKCkge1xuICAgIHRoaXMua2V5ID0gJ3BkYSc7XG4gICAgdGhpcy5rZXkgPSB0aGlzLmtleS50b0xvd2VyQ2FzZSgpO1xuXHR0aGlzLmN1cnJlbnRfdGVtcGxhdGUgPSBcIlwiO1xuXG4gICAgTmFub1N0YXRlTWFuYWdlci5hZGRTdGF0ZSh0aGlzKTtcbn1cblx0XG5OYW5vU3RhdGVQREFDbGFzcy5wcm90b3R5cGUub25VcGRhdGUgPSBmdW5jdGlvbihkYXRhKSB7XG5cdE5hbm9TdGF0ZUNsYXNzLnByb3RvdHlwZS5vblVwZGF0ZS5jYWxsKHRoaXMsIGRhdGEpO1xuXHR2YXIgc3RhdGUgPSB0aGlzO1xuXHRcblx0dHJ5IHtcblx0XHRpZihkYXRhWydkYXRhJ11bJ2FwcCddICE9IG51bGwpIHtcblx0XHRcdHZhciB0ZW1wbGF0ZSA9IGRhdGFbJ2RhdGEnXVsnYXBwJ11bJ3RlbXBsYXRlJ107XG5cdFx0XHRpZih0ZW1wbGF0ZSAhPSBudWxsICYmIHRlbXBsYXRlICE9IHN0YXRlLmN1cnJlbnRfdGVtcGxhdGUpIHtcblx0XHRcdFx0JC53aGVuKCQuYWpheCh7XG5cdFx0XHRcdFx0dXJsOiB0ZW1wbGF0ZSArICcudG1wbCcsXG5cdFx0XHRcdFx0Y2FjaGU6IGZhbHNlLFxuXHRcdFx0XHRcdGRhdGFUeXBlOiAndGV4dCdcblx0XHRcdFx0fSkpXG5cdFx0XHRcdC5kb25lKGZ1bmN0aW9uKHRlbXBsYXRlTWFya3VwKSB7XG5cdFx0XHRcdFx0dGVtcGxhdGVNYXJrdXAgKz0gJzxkaXYgY2xhc3M9XCJjbGVhckJvdGhcIj48L2Rpdj4nO1xuXG5cdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdE5hbm9UZW1wbGF0ZS5hZGRUZW1wbGF0ZSgnYXBwJywgdGVtcGxhdGVNYXJrdXApO1xuXHRcdFx0XHRcdFx0TmFub1RlbXBsYXRlLnJlc2V0VGVtcGxhdGUoJ2FwcCcpO1xuXHRcdFx0XHRcdFx0JChcIiN1aUFwcFwiKS5odG1sKE5hbm9UZW1wbGF0ZS5wYXJzZSgnYXBwJywgZGF0YSkpO1xuXHRcdFx0XHRcdFx0c3RhdGUuY3VycmVudF90ZW1wbGF0ZSA9IHRlbXBsYXRlO1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRzdGF0ZS5vbkFmdGVyVXBkYXRlKGRhdGEpO1xuXHRcdFx0XHRcdH0gY2F0Y2goZXJyb3IpIHtcblx0XHRcdFx0XHRcdHJlcG9ydEVycm9yKCdFUlJPUjogQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgbG9hZGluZyB0aGUgUERBIEFwcCBVSTogJyArIGVycm9yLm1lc3NhZ2UpO1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSlcblx0XHRcdFx0LmZhaWwoIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRyZXBvcnRFcnJvcignRVJST1I6IExvYWRpbmcgdGVtcGxhdGUgYXBwKCcgKyB0ZW1wbGF0ZSArICcpIGZhaWxlZCEnKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZiAoTmFub1RlbXBsYXRlLnRlbXBsYXRlRXhpc3RzKCdhcHAnKSkge1xuXHRcdFx0XHRcdCQoXCIjdWlBcHBcIikuaHRtbChOYW5vVGVtcGxhdGUucGFyc2UoJ2FwcCcsIGRhdGEpKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fSBjYXRjaChlcnJvcikge1xuXHRcdHJlcG9ydEVycm9yKCdFUlJPUjogQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgcmVuZGVyaW5nIHRoZSBQREEgQXBwIFVJOiAnICsgZXJyb3IubWVzc2FnZSk7XG5cdFx0cmV0dXJuO1xuXHR9XG59XG4vLyBUaGlzIGlzIHRoZSBiYXNlIHN0YXRlIGNsYXNzLCBpdCBpcyBub3QgdG8gYmUgdXNlZCBkaXJlY3RseVxuXG5mdW5jdGlvbiBOYW5vU3RhdGVDbGFzcygpIHt9XG5cbk5hbm9TdGF0ZUNsYXNzLnByb3RvdHlwZS5rZXkgPSBudWxsO1xuTmFub1N0YXRlQ2xhc3MucHJvdG90eXBlLmxheW91dFJlbmRlcmVkID0gZmFsc2U7XG5OYW5vU3RhdGVDbGFzcy5wcm90b3R5cGUuY29udGVudFJlbmRlcmVkID0gZmFsc2U7XG5OYW5vU3RhdGVDbGFzcy5wcm90b3R5cGUubWFwSW5pdGlhbGlzZWQgPSBmYWxzZTtcblxuTmFub1N0YXRlQ2xhc3MucHJvdG90eXBlLmlzQ3VycmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gTmFub1N0YXRlTWFuYWdlci5nZXRDdXJyZW50U3RhdGUoKSA9PSB0aGlzO1xufTtcblxuTmFub1N0YXRlQ2xhc3MucHJvdG90eXBlLm9uQWRkID0gZnVuY3Rpb24gKHByZXZpb3VzU3RhdGUpIHtcbiAgICAvLyBEbyBub3QgYWRkIGNvZGUgaGVyZSwgYWRkIGl0IHRvIHRoZSAnZGVmYXVsdCcgc3RhdGUgKG5hbm9fc3RhdGVfZGVmYXV0LmpzKSBvciBjcmVhdGUgYSBuZXcgc3RhdGUgYW5kIG92ZXJyaWRlIHRoaXMgZnVuY3Rpb25cblxuICAgIE5hbm9CYXNlQ2FsbGJhY2tzLmFkZENhbGxiYWNrcygpO1xuICAgIE5hbm9CYXNlSGVscGVycy5hZGRIZWxwZXJzKCk7XG59O1xuXG5OYW5vU3RhdGVDbGFzcy5wcm90b3R5cGUub25SZW1vdmUgPSBmdW5jdGlvbiAobmV4dFN0YXRlKSB7XG4gICAgLy8gRG8gbm90IGFkZCBjb2RlIGhlcmUsIGFkZCBpdCB0byB0aGUgJ2RlZmF1bHQnIHN0YXRlIChuYW5vX3N0YXRlX2RlZmF1dC5qcykgb3IgY3JlYXRlIGEgbmV3IHN0YXRlIGFuZCBvdmVycmlkZSB0aGlzIGZ1bmN0aW9uXG5cbiAgICBOYW5vQmFzZUNhbGxiYWNrcy5yZW1vdmVDYWxsYmFja3MoKTtcbiAgICBOYW5vQmFzZUhlbHBlcnMucmVtb3ZlSGVscGVycygpO1xufTtcblxuTmFub1N0YXRlQ2xhc3MucHJvdG90eXBlLm9uQmVmb3JlVXBkYXRlID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAvLyBEbyBub3QgYWRkIGNvZGUgaGVyZSwgYWRkIGl0IHRvIHRoZSAnZGVmYXVsdCcgc3RhdGUgKG5hbm9fc3RhdGVfZGVmYXV0LmpzKSBvciBjcmVhdGUgYSBuZXcgc3RhdGUgYW5kIG92ZXJyaWRlIHRoaXMgZnVuY3Rpb25cblxuICAgIGRhdGEgPSBOYW5vU3RhdGVNYW5hZ2VyLmV4ZWN1dGVCZWZvcmVVcGRhdGVDYWxsYmFja3MoZGF0YSk7XG5cbiAgICByZXR1cm4gZGF0YTsgLy8gUmV0dXJuIGRhdGEgdG8gY29udGludWUsIHJldHVybiBmYWxzZSB0byBwcmV2ZW50IG9uVXBkYXRlIGFuZCBvbkFmdGVyVXBkYXRlXG59O1xuXG5OYW5vU3RhdGVDbGFzcy5wcm90b3R5cGUub25VcGRhdGUgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgIC8vIERvIG5vdCBhZGQgY29kZSBoZXJlLCBhZGQgaXQgdG8gdGhlICdkZWZhdWx0JyBzdGF0ZSAobmFub19zdGF0ZV9kZWZhdXQuanMpIG9yIGNyZWF0ZSBhIG5ldyBzdGF0ZSBhbmQgb3ZlcnJpZGUgdGhpcyBmdW5jdGlvblxuXG4gICAgdHJ5XG4gICAge1xuICAgICAgICBpZiAoIXRoaXMubGF5b3V0UmVuZGVyZWQgfHwgKGRhdGFbJ2NvbmZpZyddLmhhc093blByb3BlcnR5KCdhdXRvVXBkYXRlTGF5b3V0JykgJiYgZGF0YVsnY29uZmlnJ11bJ2F1dG9VcGRhdGVMYXlvdXQnXSkpXG4gICAgICAgIHtcbiAgICAgICAgICAgICQoXCIjdWlMYXlvdXRcIikuaHRtbChOYW5vVGVtcGxhdGUucGFyc2UoJ2xheW91dCcsIGRhdGEpKTsgLy8gcmVuZGVyIHRoZSAnbWFpbCcgdGVtcGxhdGUgdG8gdGhlICNtYWluVGVtcGxhdGUgZGl2XG4gICAgICAgICAgICB0aGlzLmxheW91dFJlbmRlcmVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuY29udGVudFJlbmRlcmVkIHx8IChkYXRhWydjb25maWcnXS5oYXNPd25Qcm9wZXJ0eSgnYXV0b1VwZGF0ZUNvbnRlbnQnKSAmJiBkYXRhWydjb25maWcnXVsnYXV0b1VwZGF0ZUNvbnRlbnQnXSkpXG4gICAgICAgIHtcbiAgICAgICAgICAgICQoXCIjdWlDb250ZW50XCIpLmh0bWwoTmFub1RlbXBsYXRlLnBhcnNlKCdtYWluJywgZGF0YSkpOyAvLyByZW5kZXIgdGhlICdtYWlsJyB0ZW1wbGF0ZSB0byB0aGUgI21haW5UZW1wbGF0ZSBkaXZcbiAgICAgICAgICAgIHRoaXMuY29udGVudFJlbmRlcmVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoTmFub1RlbXBsYXRlLnRlbXBsYXRlRXhpc3RzKCdtYXBDb250ZW50JykpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5tYXBJbml0aWFsaXNlZClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAvLyBBZGQgZHJhZyBmdW5jdGlvbmFsaXR5IHRvIHRoZSBtYXAgdWlcbiAgICAgICAgICAgICAgICAkKCcjdWlNYXAnKS5kcmFnZ2FibGUoKTtcblxuICAgICAgICAgICAgICAgICQoJyN1aU1hcFRvb2x0aXAnKVxuICAgICAgICAgICAgICAgICAgICAub2ZmKCdjbGljaycpXG4gICAgICAgICAgICAgICAgICAgIC5vbignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZhZGVPdXQoNDAwKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLm1hcEluaXRpYWxpc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJChcIiN1aU1hcENvbnRlbnRcIikuaHRtbChOYW5vVGVtcGxhdGUucGFyc2UoJ21hcENvbnRlbnQnLCBkYXRhKSk7IC8vIHJlbmRlciB0aGUgJ21hcENvbnRlbnQnIHRlbXBsYXRlIHRvIHRoZSAjdWlNYXBDb250ZW50IGRpdlxuXG4gICAgICAgICAgICBpZiAoZGF0YVsnY29uZmlnJ10uaGFzT3duUHJvcGVydHkoJ3Nob3dNYXAnKSAmJiBkYXRhWydjb25maWcnXVsnc2hvd01hcCddKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICQoJyN1aUNvbnRlbnQnKS5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgJCgnI3VpTWFwV3JhcHBlcicpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAkKCcjdWlNYXBXcmFwcGVyJykuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICAgICAgICAgICQoJyN1aUNvbnRlbnQnKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKE5hbm9UZW1wbGF0ZS50ZW1wbGF0ZUV4aXN0cygnbWFwSGVhZGVyJykpXG4gICAgICAgIHtcbiAgICAgICAgICAgICQoXCIjdWlNYXBIZWFkZXJcIikuaHRtbChOYW5vVGVtcGxhdGUucGFyc2UoJ21hcEhlYWRlcicsIGRhdGEpKTsgLy8gcmVuZGVyIHRoZSAnbWFwSGVhZGVyJyB0ZW1wbGF0ZSB0byB0aGUgI3VpTWFwSGVhZGVyIGRpdlxuICAgICAgICB9XG4gICAgICAgIGlmIChOYW5vVGVtcGxhdGUudGVtcGxhdGVFeGlzdHMoJ21hcEZvb3RlcicpKVxuICAgICAgICB7XG4gICAgICAgICAgICAkKFwiI3VpTWFwRm9vdGVyXCIpLmh0bWwoTmFub1RlbXBsYXRlLnBhcnNlKCdtYXBGb290ZXInLCBkYXRhKSk7IC8vIHJlbmRlciB0aGUgJ21hcEZvb3RlcicgdGVtcGxhdGUgdG8gdGhlICN1aU1hcEZvb3RlciBkaXZcbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaChlcnJvcilcbiAgICB7XG4gICAgICAgIHJlcG9ydEVycm9yKCdFUlJPUjogQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgcmVuZGVyaW5nIHRoZSBVSTogJyArIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxufTtcblxuTmFub1N0YXRlQ2xhc3MucHJvdG90eXBlLm9uQWZ0ZXJVcGRhdGUgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgIC8vIERvIG5vdCBhZGQgY29kZSBoZXJlLCBhZGQgaXQgdG8gdGhlICdkZWZhdWx0JyBzdGF0ZSAobmFub19zdGF0ZV9kZWZhdXQuanMpIG9yIGNyZWF0ZSBhIG5ldyBzdGF0ZSBhbmQgb3ZlcnJpZGUgdGhpcyBmdW5jdGlvblxuXG4gICAgTmFub1N0YXRlTWFuYWdlci5leGVjdXRlQWZ0ZXJVcGRhdGVDYWxsYmFja3MoZGF0YSk7XG59O1xuXG5OYW5vU3RhdGVDbGFzcy5wcm90b3R5cGUuYWxlcnRUZXh0ID0gZnVuY3Rpb24gKHRleHQpIHtcbiAgICAvLyBEbyBub3QgYWRkIGNvZGUgaGVyZSwgYWRkIGl0IHRvIHRoZSAnZGVmYXVsdCcgc3RhdGUgKG5hbm9fc3RhdGVfZGVmYXV0LmpzKSBvciBjcmVhdGUgYSBuZXcgc3RhdGUgYW5kIG92ZXJyaWRlIHRoaXMgZnVuY3Rpb25cblxuICAgIGFsZXJ0KHRleHQpO1xufTtcblxuXG52YXIgTmFub1RlbXBsYXRlID0gZnVuY3Rpb24gKCkge1xuXG4gICAgdmFyIF90ZW1wbGF0ZURhdGEgPSB7fTtcblxuICAgIHZhciBfdGVtcGxhdGVzID0ge307XG4gICAgdmFyIF9jb21waWxlZFRlbXBsYXRlcyA9IHt9O1xuICAgIFxuICAgIHZhciBfaGVscGVycyA9IHt9O1xuXG4gICAgdmFyIGluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIFdlIHN0b3JlIHRlbXBsYXRlRGF0YSBpbiB0aGUgYm9keSB0YWcsIGl0J3MgYXMgZ29vZCBhIHBsYWNlIGFzIGFueVxuICAgICAgICBfdGVtcGxhdGVEYXRhID0gJCgnYm9keScpLmRhdGEoJ3RlbXBsYXRlRGF0YScpO1xuXG4gICAgICAgIGlmIChfdGVtcGxhdGVEYXRhID09IG51bGwpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJlcG9ydEVycm9yKCdFcnJvcjogVGVtcGxhdGUgZGF0YSBkaWQgbm90IGxvYWQgY29ycmVjdGx5LicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbG9hZE5leHRUZW1wbGF0ZSgpO1xuICAgIH07XG5cbiAgICB2YXIgbG9hZE5leHRUZW1wbGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gd2UgY291bnQgdGhlIG51bWJlciBvZiB0ZW1wbGF0ZXMgZm9yIHRoaXMgdWkgc28gdGhhdCB3ZSBrbm93IHdoZW4gdGhleSd2ZSBhbGwgYmVlbiByZW5kZXJlZFxuICAgICAgICB2YXIgdGVtcGxhdGVDb3VudCA9IE9iamVjdC5zaXplKF90ZW1wbGF0ZURhdGEpO1xuXG4gICAgICAgIGlmICghdGVtcGxhdGVDb3VudClcbiAgICAgICAge1xuICAgICAgICAgICAgJChkb2N1bWVudCkudHJpZ2dlcigndGVtcGxhdGVzTG9hZGVkJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBsb2FkIG1hcmt1cCBmb3IgZWFjaCB0ZW1wbGF0ZSBhbmQgcmVnaXN0ZXIgaXRcbiAgICAgICAgZm9yICh2YXIga2V5IGluIF90ZW1wbGF0ZURhdGEpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmICghX3RlbXBsYXRlRGF0YS5oYXNPd25Qcm9wZXJ0eShrZXkpKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkLndoZW4oJC5hamF4KHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBfdGVtcGxhdGVEYXRhW2tleV0sXG4gICAgICAgICAgICAgICAgICAgIGNhY2hlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICd0ZXh0J1xuICAgICAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgICAgIC5kb25lKCBmdW5jdGlvbih0ZW1wbGF0ZU1hcmt1cCkge1xuXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlTWFya3VwICs9ICc8ZGl2IGNsYXNzPVwiY2xlYXJCb3RoXCI+PC9kaXY+JztcblxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgTmFub1RlbXBsYXRlLmFkZFRlbXBsYXRlKGtleSwgdGVtcGxhdGVNYXJrdXApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXBvcnRFcnJvcignRVJST1I6IEFuIGVycm9yIG9jY3VycmVkIHdoaWxlIGxvYWRpbmcgdGhlIFVJOiAnICsgZXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgX3RlbXBsYXRlRGF0YVtrZXldO1xuICAgICAgICAgICAgICAgICAgICBsb2FkTmV4dFRlbXBsYXRlKCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuZmFpbCggZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXBvcnRFcnJvcignRVJST1I6IExvYWRpbmcgdGVtcGxhdGUgJyArIGtleSArICcoJyArIF90ZW1wbGF0ZURhdGFba2V5XSArICcpIGZhaWxlZCEnKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHZhciBjb21waWxlVGVtcGxhdGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gX3RlbXBsYXRlcykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBfY29tcGlsZWRUZW1wbGF0ZXNba2V5XSA9IGRvVC50ZW1wbGF0ZShfdGVtcGxhdGVzW2tleV0sIG51bGwsIF90ZW1wbGF0ZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgcmVwb3J0RXJyb3IoZXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaW5pdCgpO1xuICAgICAgICB9LFxuICAgICAgICBhZGRUZW1wbGF0ZTogZnVuY3Rpb24gKGtleSwgdGVtcGxhdGVTdHJpbmcpIHtcbiAgICAgICAgICAgIF90ZW1wbGF0ZXNba2V5XSA9IHRlbXBsYXRlU3RyaW5nO1xuICAgICAgICB9LFxuICAgICAgICB0ZW1wbGF0ZUV4aXN0czogZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgcmV0dXJuIF90ZW1wbGF0ZXMuaGFzT3duUHJvcGVydHkoa2V5KTtcbiAgICAgICAgfSxcblx0XHRyZXNldFRlbXBsYXRlOiBmdW5jdGlvbiAoa2V5KSB7XG5cdFx0XHRfY29tcGlsZWRUZW1wbGF0ZXNba2V5XSA9IG51bGw7XG5cdFx0fSxcbiAgICAgICAgcGFyc2U6IGZ1bmN0aW9uICh0ZW1wbGF0ZUtleSwgZGF0YSkge1xuICAgICAgICAgICAgaWYgKCFfY29tcGlsZWRUZW1wbGF0ZXMuaGFzT3duUHJvcGVydHkodGVtcGxhdGVLZXkpIHx8ICFfY29tcGlsZWRUZW1wbGF0ZXNbdGVtcGxhdGVLZXldKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFfdGVtcGxhdGVzLmhhc093blByb3BlcnR5KHRlbXBsYXRlS2V5KSkge1xuICAgICAgICAgICAgICAgICAgICByZXBvcnRFcnJvcignRVJST1I6IFRlbXBsYXRlIFwiJyArIHRlbXBsYXRlS2V5ICsgJ1wiIGRvZXMgbm90IGV4aXN0IGluIF9jb21waWxlZFRlbXBsYXRlcyEnKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICc8aDI+VGVtcGxhdGUgZXJyb3IgKGRvZXMgbm90IGV4aXN0KTwvaDI+JztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29tcGlsZVRlbXBsYXRlcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBfY29tcGlsZWRUZW1wbGF0ZXNbdGVtcGxhdGVLZXldICE9ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICByZXBvcnRFcnJvcihfY29tcGlsZWRUZW1wbGF0ZXNbdGVtcGxhdGVLZXldKTtcbiAgICAgICAgICAgICAgICByZXBvcnRFcnJvcignRVJST1I6IFRlbXBsYXRlIFwiJyArIHRlbXBsYXRlS2V5ICsgJ1wiIGZhaWxlZCB0byBjb21waWxlIScpO1xuICAgICAgICAgICAgICAgIHJldHVybiAnPGgyPlRlbXBsYXRlIGVycm9yIChmYWlsZWQgdG8gY29tcGlsZSk8L2gyPic7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gX2NvbXBpbGVkVGVtcGxhdGVzW3RlbXBsYXRlS2V5XS5jYWxsKHRoaXMsIGRhdGFbJ2RhdGEnXSwgZGF0YVsnY29uZmlnJ10sIF9oZWxwZXJzKTtcbiAgICAgICAgfSxcbiAgICAgICAgYWRkSGVscGVyOiBmdW5jdGlvbiAoaGVscGVyTmFtZSwgaGVscGVyRnVuY3Rpb24pIHtcbiAgICAgICAgICAgIGlmICghalF1ZXJ5LmlzRnVuY3Rpb24oaGVscGVyRnVuY3Rpb24pKSB7XG4gICAgICAgICAgICAgICAgcmVwb3J0RXJyb3IoJ05hbm9UZW1wbGF0ZS5hZGRIZWxwZXIgZmFpbGVkIHRvIGFkZCAnICsgaGVscGVyTmFtZSArICcgYXMgaXQgaXMgbm90IGEgZnVuY3Rpb24uJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuOyBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgX2hlbHBlcnNbaGVscGVyTmFtZV0gPSBoZWxwZXJGdW5jdGlvbjtcbiAgICAgICAgfSxcbiAgICAgICAgYWRkSGVscGVyczogZnVuY3Rpb24gKGhlbHBlcnMpIHsgICAgICAgIFxuICAgICAgICAgICAgZm9yICh2YXIgaGVscGVyTmFtZSBpbiBoZWxwZXJzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFoZWxwZXJzLmhhc093blByb3BlcnR5KGhlbHBlck5hbWUpKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIE5hbm9UZW1wbGF0ZS5hZGRIZWxwZXIoaGVscGVyTmFtZSwgaGVscGVyc1toZWxwZXJOYW1lXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHJlbW92ZUhlbHBlcjogZnVuY3Rpb24gKGhlbHBlck5hbWUpIHtcbiAgICAgICAgICAgIGlmIChoZWxwZXJzLmhhc093blByb3BlcnR5KGhlbHBlck5hbWUpKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBfaGVscGVyc1toZWxwZXJOYW1lXTtcbiAgICAgICAgICAgIH0gICBcbiAgICAgICAgfVxuICAgIH07XG59KCk7XG5cbk5hbm9UcmFuc2l0aW9uID0gZnVuY3Rpb24oKSB7XG5cdHZhciBpZENhY2hlID0ge307XG5cdHZhciBzdGF0ZUNhY2hlID0ge307XG5cdHZhciBjdXJyZW50SUQgPSAwO1xuXG5cdE5hbm9TdGF0ZU1hbmFnZXIuYWRkQmVmb3JlVXBkYXRlQ2FsbGJhY2soXCJUcmFuc2l0aW9uUmVzZXRcIiwgZnVuY3Rpb24odXBkYXRlRGF0YSkge1xuXHRcdGN1cnJlbnRJRCA9IDA7XG5cdFx0cmV0dXJuIHVwZGF0ZURhdGE7XG5cdH0pO1xuXG5cdC8vIGdldCBhIHRyYW5zaXRpb24gaGFuZGxlLCBhZGQgdGhpcyB0byB5b3VyIGVsZW1lbnQncyBjbGFzc1xuXHR2YXIgX2FsbG9jSUQgPSBmdW5jdGlvbih1bmlxdWVJRCkge1xuXHRcdGlmKHVuaXF1ZUlEID09IFwiX0hpZGVfTWFwX2Nsb3NlXCIpIC8vIGhhY2sgYmVjYXVzZSBuYW5vIGRvZXMgd2VpcmQgdGhpbmcgb24gZmlyc3QgdGlja1xuXHRcdFx0cmV0dXJuIFwidHJhbnNpdGlvbl9fbWFwXCI7XG5cblx0XHRpZih1bmlxdWVJRCA9PT0gdW5kZWZpbmVkKVxuXHRcdFx0dW5pcXVlSUQgPSBcIlwiO1xuXHRcdHJldHVybiBcInRyYW5zaXRpb25fX1wiICsgKGN1cnJlbnRJRCsrKSArIFwiX1wiICsgdW5pcXVlSUQudG9TdHJpbmcoKTtcblx0fVxuXG5cdC8vIHNldHVwIHRyYW5zaXRpb25zLCBjYWxsIHRoaXMgZXhhY3RseSBvbmNlIGEgcmVmcmVzaCwgcmV0dXJucyBvbGQgc3RhdGVcblx0dmFyIF91cGRhdGVFbGVtZW50ID0gZnVuY3Rpb24oaWQsIG5ld1N0YXRlLCBtZXJnZSkge1xuXHRcdHZhciBjYWNoZSA9IGlkQ2FjaGVbaWRdO1xuXHRcdHZhciBvbGRTdGF0ZTtcblxuXHRcdGlmKG1lcmdlID09PSB1bmRlZmluZWQpXG5cdFx0XHRtZXJnZSA9IGZhbHNlO1xuXG5cdFx0dmFyIGVsZW1lbnQgPSAkKFwiLlwiICsgaWQpO1xuXHRcdGlmKGVsZW1lbnQubGVuZ3RoID09IDApXG5cdFx0XHRyZXR1cm4gbmV3U3RhdGU7XG5cblx0XHQvLyB2ZXJpZnkgdGhhdCB0aGUgaWQgc3RpbGwgcG9pbnRzIHRvIHRoZSBzYW1lIHRoaW5nXG5cdFx0Ly8gYW5kIGdldCBvbGQgc3RhdGVcblx0XHRlbGVtZW50ID0gZWxlbWVudFswXTtcblx0XHRpZihjYWNoZVxuXHRcdFx0JiYgY2FjaGUudGFnTmFtZSA9PSBlbGVtZW50LnRhZ05hbWVcblx0XHRcdCYmIGNhY2hlLnRhYkluZGV4ID09IGVsZW1lbnQudGFiSW5kZXhcblx0XHRcdCYmIGNhY2hlLnBhcmVudCA9PSBlbGVtZW50LnBhcmVudE5vZGUudGFnTmFtZVxuXHRcdFx0JiYgY2FjaGUuY2hpbGRyZW4gPT0gZWxlbWVudC5jaGlsZHJlbi5sZW5ndGgpIHtcblxuXHRcdFx0Ly8geWVwLCB0aGlzIGlzIGNvbnRpbnVhdGlvbiBvZiBvbGQgb2JqZWN0XG5cdFx0XHRvbGRTdGF0ZSA9IHN0YXRlQ2FjaGVbaWRdO1xuXG5cdFx0XHRpZihtZXJnZSkge1xuXHRcdFx0XHR2YXIgbmV3U3RhdGVDb3B5ID0ge307XG5cdFx0XHRcdGZvcihrIGluIG9sZFN0YXRlKVxuXHRcdFx0XHRcdG5ld1N0YXRlQ29weVtrXSA9IG9sZFN0YXRlW2tdO1xuXHRcdFx0XHRmb3IoayBpbiBuZXdTdGF0ZSlcblx0XHRcdFx0XHRuZXdTdGF0ZUNvcHlba10gPSBuZXdTdGF0ZVtrXTtcblx0XHRcdFx0bmV3U3RhdGUgPSBuZXdTdGF0ZUNvcHk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIG5vcCFcblx0XHRcdG9sZFN0YXRlID0gbmV3U3RhdGU7XG5cblx0XHRcdGlkQ2FjaGVbaWRdID0ge1xuXHRcdFx0XHR0YWdOYW1lOiBlbGVtZW50LnRhZ05hbWUsXG5cdFx0XHRcdHRhYkluZGV4OiBlbGVtZW50LnRhYkluZGV4LFxuXHRcdFx0XHRwYXJlbnQ6IGVsZW1lbnQucGFyZW50Tm9kZS50YWdOYW1lLFxuXHRcdFx0XHRjaGlsZHJlbjogZWxlbWVudC5jaGlsZHJlbi5sZW5ndGhcblx0XHRcdH07XG5cdFx0fVxuXG5cdFx0Ly8gc2F2ZSBuZXcgc3RhdGUgZm9yIG5leHQgY3ljbGVcblx0XHRzdGF0ZUNhY2hlW2lkXSA9IG5ld1N0YXRlO1xuXHRcdHJldHVybiBvbGRTdGF0ZTtcblx0fVxuXG5cdHZhciBfcmVzb2x2ZVRhcmdldCA9IGZ1bmN0aW9uKGlkLCBmaWx0ZXIpIHtcblx0XHR2YXIgZWxlbWVudCA9ICQoXCIuXCIgKyBpZCk7XG5cblx0XHRyZXR1cm4gZmlsdGVyID8gJChlbGVtZW50KS5jaGlsZHJlbihmaWx0ZXIpIDogJChlbGVtZW50KTtcblx0fVxuXG5cdC8vIGFuaW1hdGUgYSBzdGF0ZSBjaGFuZ2Vcblx0dmFyIF9hbmltYXRlRWxlbWVudCA9IGZ1bmN0aW9uKGlkLCBmaWx0ZXIsIG9sZFN0YXRlLCBuZXdTdGF0ZSwgdGltZSkge1xuXHRcdHZhciB0YXJnZXQgPSBfcmVzb2x2ZVRhcmdldChpZCwgZmlsdGVyKTtcblxuXHRcdGlmKHRpbWUgPT09IHVuZGVmaW5lZClcblx0XHRcdHRpbWUgPSAxOTAwO1xuXG5cdFx0Ly8gIGRvIHRoZSBhbmltYXRpb25cblx0XHR0YXJnZXRcblx0XHRcdC5jc3Mob2xkU3RhdGUpXG5cdFx0XHQuYW5pbWF0ZShuZXdTdGF0ZSwge1xuXHRcdFx0XHRkdXJhdGlvbjogdGltZSxcblx0XHRcdFx0cXVldWU6IGZhbHNlXG5cdFx0XHR9KTtcblxuXHRcdC8vIG1heWJlIGNsYXNzIHRvbz9cblx0XHR2YXIgb2xkQ2xhc3MgPSBvbGRTdGF0ZVtcIi4uY2xhc3NcIl07XG5cdFx0dmFyIG5ld0NsYXNzID0gbmV3U3RhdGVbXCIuLmNsYXNzXCJdO1xuXHRcdGlmKG9sZENsYXNzICYmIG5ld0NsYXNzKSB7XG5cdFx0XHR0YXJnZXQuYWRkQ2xhc3Mob2xkQ2xhc3MpO1xuXHRcdFx0aWYob2xkQ2xhc3MgIT0gbmV3Q2xhc3MpIHtcblx0XHRcdFx0Ly8gc3RyaXAgY2xhc3NlcyB0aGF0IGFyZSBpbiBib3RoXG5cdFx0XHRcdHZhciBvbGRDbGFzcyA9IG9sZENsYXNzLnNwbGl0KFwiIFwiKTtcblx0XHRcdFx0dmFyIG5ld0NsYXNzID0gbmV3Q2xhc3Muc3BsaXQoXCIgXCIpO1xuXG5cdFx0XHRcdHZhciBmaWx0ZXJlZE9sZENsYXNzID0gb2xkQ2xhc3MuZmlsdGVyKGZ1bmN0aW9uKHgpIHsgcmV0dXJuIG5ld0NsYXNzLmluZGV4T2YoeCkgPT0gLTE7IH0pO1xuXHRcdFx0XHR2YXIgZmlsdGVyZWROZXdDbGFzcyA9IG5ld0NsYXNzLmZpbHRlcihmdW5jdGlvbih4KSB7IHJldHVybiBvbGRDbGFzcy5pbmRleE9mKHgpID09IC0xOyB9KTtcblxuXHRcdFx0XHRvbGRDbGFzcyA9IGZpbHRlcmVkT2xkQ2xhc3Muam9pbihcIiBcIik7XG5cdFx0XHRcdG5ld0NsYXNzID0gZmlsdGVyZWROZXdDbGFzcy5qb2luKFwiIFwiKTtcblxuXHRcdFx0XHR0YXJnZXQuc3dpdGNoQ2xhc3Mob2xkQ2xhc3MsIG5ld0NsYXNzLCB7XG5cdFx0XHRcdFx0ZHVyYXRpb246IHRpbWUsXG5cdFx0XHRcdFx0cXVldWU6IGZhbHNlXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHZhciBfYW5pbWF0ZVRleHRWYWx1ZSA9IGZ1bmN0aW9uKGlkLCBmaWx0ZXIsIHBsYWNlcywgb2xkVmFsdWUsIG5ld1ZhbHVlLCB0aW1lKSB7XG5cdFx0dmFyIHRhcmdldCA9IF9yZXNvbHZlVGFyZ2V0KGlkLCBmaWx0ZXIpO1xuXG5cdFx0aWYodGltZSA9PT0gdW5kZWZpbmVkKVxuXHRcdFx0dGltZSA9IDE5MDA7XG5cblx0XHRpZihwbGFjZXMgPT0gLTEpXG5cdFx0XHR0YXJnZXQudGV4dChvbGRWYWx1ZS50b1N0cmluZygpKTsvL29sZFZhbHVlLnRvU3RyaW5nKCkpO1xuXHRcdGVsc2Vcblx0XHRcdHRhcmdldC50ZXh0KG9sZFZhbHVlLnRvRml4ZWQocGxhY2VzKSk7Ly9vbGRWYWx1ZS50b0ZpeGVkKHBsYWNlcykpO1xuXG5cdFx0aWYob2xkVmFsdWUgIT0gbmV3VmFsdWUpXG5cdFx0XHR0YXJnZXQuYW5pbWF0ZSh7aTogMX0sIHtcblx0XHRcdFx0ZHVyYXRpb246IHRpbWUsXG5cdFx0XHRcdHF1ZXVlOiBmYWxzZSxcblx0XHRcdFx0c3RlcDogZnVuY3Rpb24obm93LCBmeCkge1xuXHRcdFx0XHRcdGlmKHBsYWNlcyA9PSAtMSkge1xuXHRcdFx0XHRcdFx0ZnguZWxlbS50ZXh0Q29udGVudCA9IChvbGRWYWx1ZSAqICgxIC0gbm93KSArIG5ld1ZhbHVlICogbm93KS50b1N0cmluZygpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRmeC5lbGVtLnRleHRDb250ZW50ID0gKG9sZFZhbHVlICogKDEgLSBub3cpICsgbmV3VmFsdWUgKiBub3cpLnRvRml4ZWQocGxhY2VzKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHR9XG5cblx0dmFyIF9hbmltYXRlSG92ZXIgPSBmdW5jdGlvbihpZCwgZmlsdGVyLCBvbGRTdGF0ZSwgbmV3U3RhdGUsIHRpbWUpIHtcblx0XHR2YXIgdGFyZ2V0ID0gX3Jlc29sdmVUYXJnZXQoaWQsIGZpbHRlcik7XG5cblx0XHRpZih0aW1lID09PSB1bmRlZmluZWQpXG5cdFx0XHR0aW1lID0gMjAwO1xuXG5cdFx0aWYob2xkU3RhdGVbXCIuLmhvdmVyXCJdKVxuXHRcdFx0dGFyZ2V0LmFkZENsYXNzKFwiaG92ZXJcIik7XG5cblx0XHR0YXJnZXQuaG92ZXIoXG5cdFx0XHRmdW5jdGlvbigpIHtcblx0XHRcdFx0dGFyZ2V0LnN0b3AoMSwgMSkuYWRkQ2xhc3MoXCJob3ZlclwiLCB7XG5cdFx0XHRcdFx0ZHVyYXRpb246IHRpbWUsXG5cdFx0XHRcdFx0cXVldWU6IGZhbHNlXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRfdXBkYXRlRWxlbWVudChpZCwge1wiLi5ob3ZlclwiOiB0cnVlfSwgdHJ1ZSk7XG5cdFx0XHR9LFxuXHRcdFx0ZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHRhcmdldC5zdG9wKDEsIDEpLnJlbW92ZUNsYXNzKFwiaG92ZXJcIiwge1xuXHRcdFx0XHRcdGR1cmF0aW9uOiB0aW1lLFxuXHRcdFx0XHRcdHF1ZXVlOiBmYWxzZVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0X3VwZGF0ZUVsZW1lbnQoaWQsIHtcIi4uaG92ZXJcIjogZmFsc2V9LCB0cnVlKTtcblx0XHRcdH1cblx0XHQpO1xuXHR9XG5cblx0Ly8gaGVscGVyIGZvciBtb3N0IGNvbW1vbiB1c2Vcblx0dmFyIF90cmFuc2l0aW9uRWxlbWVudCA9IGZ1bmN0aW9uKGlkLCBmaWx0ZXIsIHN0YXRlLCB0aW1lKSB7XG5cdFx0dmFyIG9sZCA9IF91cGRhdGVFbGVtZW50KGlkLCBzdGF0ZSk7XG5cdFx0X2FuaW1hdGVFbGVtZW50KGlkLCBmaWx0ZXIsIG9sZCwgc3RhdGUsIHRpbWUpO1xuXHRcdHJldHVybiBvbGQ7XG5cdH1cblxuXHRyZXR1cm4ge1xuXHRcdGFsbG9jSUQ6IF9hbGxvY0lELFxuXHRcdHVwZGF0ZUVsZW1lbnQ6IF91cGRhdGVFbGVtZW50LFxuXHRcdGFuaW1hdGVFbGVtZW50OiBfYW5pbWF0ZUVsZW1lbnQsXG5cdFx0YW5pbWF0ZVRleHRWYWx1ZTogX2FuaW1hdGVUZXh0VmFsdWUsXG5cdFx0YW5pbWF0ZUhvdmVyOiBfYW5pbWF0ZUhvdmVyLFxuXHRcdHRyYW5zaXRpb25FbGVtZW50OiBfdHJhbnNpdGlvbkVsZW1lbnRcblx0fTtcbn0oKTtcblxudmFyIE5hbm9XaW5kb3cgPSBmdW5jdGlvbiAoKSBcbntcbiAgICB2YXIgb2Zmc2V0WCwgb2Zmc2V0WTtcbiAgICB2YXIgbWluV2lkdGggPSAyODA7XG4gICAgdmFyIG1pbkhlaWdodCA9IDE0MDtcblxuICAgIHZhciBzZXRQb3MgPSBmdW5jdGlvbiAoeCwgeSkge1xuICAgICAgICBOYW5vVXRpbGl0eS53aW5zZXQoXCJwb3NcIiwgeCArIFwiLFwiICsgeSk7XG4gICAgfTtcbiAgICB2YXIgc2V0U2l6ZSA9IGZ1bmN0aW9uICh3LCBoKSB7XG4gICAgICAgTmFub1V0aWxpdHkud2luc2V0KFwic2l6ZVwiLCB3ICsgXCIsXCIgKyBoKTtcbiAgICB9O1xuXG4gICAgdmFyIG9iZXlMaW1pdHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIEFsaWdubWVudCAoVGhhbmtzIEdvb24gKENDIEJZLU5DLVNBIHYzKSlcbiAgICAgICAgdmFyIHByZXZYID0gd2luZG93LnNjcmVlbkxlZnQ7XG4gICAgICAgIHZhciBwcmV2WSA9IHdpbmRvdy5zY3JlZW5Ub3A7XG4gICAgICAgIC8vUHV0IHRoZSB3aW5kb3cgYXQgdG9wIGxlZnRcbiAgICAgICAgc2V0UG9zKDAsIDApO1xuICAgICAgICAvL0dldCBhbnkgb2Zmc2V0cyBzdGlsbCBwcmVzZW50XG4gICAgICAgIG9mZnNldFggPSB3aW5kb3cuc2NyZWVuTGVmdDtcbiAgICAgICAgb2Zmc2V0WSA9IHdpbmRvdy5zY3JlZW5Ub3A7XG4gICAgICAgIC8vIENsYW1wIGl0IHRvIHRoZSB2aWV3cG9ydFxuICAgICAgICB2YXIgY2xhbXBlZFggPSBwcmV2WCAtIG9mZnNldFg7XG4gICAgICAgIHZhciBjbGFtcGVkWSA9IHByZXZZIC0gb2Zmc2V0WTtcbiAgICAgICAgY2xhbXBlZFggPSBjbGFtcGVkWCA8IG9mZnNldFggPyAwIDogY2xhbXBlZFg7XG4gICAgICAgIGNsYW1wZWRZID0gY2xhbXBlZFkgPCBvZmZzZXRZID8gMCA6IGNsYW1wZWRZO1xuICAgICAgICAvLyBQdXQgaXQgYmFja1xuICAgICAgICBzZXRQb3MoY2xhbXBlZFgsIGNsYW1wZWRZKVxuICAgICAgICAvLyBEb25lIHdpdGggYWxpZ25tZW50XG5cbiAgICAgICAgLy8gU2l6ZSBjb25zdHJhaW50c1xuICAgICAgICB2YXIgaGVpZ2h0ID0gJCh3aW5kb3cpLmhlaWdodCgpO1xuICAgICAgICB2YXIgd2lkdGggPSAkKHdpbmRvdykud2lkdGgoKTtcbiAgICAgICAgaWYoJChcImJvZHlcIikuaGVpZ2h0KCkgPj0gKCQod2luZG93KS5oZWlnaHQoKSAtIDI5KSkgeyAvLyBTY3JvbGxiYXIhISFcbiAgICAgICAgICAgIHdpZHRoICs9IDE3IC8vIDE3IHBpeGVscyBpcyB0aGUgd2lkdGggb2YgYSBzY3JvbGxiYXJcbiAgICAgICAgfVxuICAgICAgICBpZigkKGRvY3VtZW50KS53aWR0aCgpID4gJCh3aW5kb3cpLndpZHRoKCkpIHsgLy8gSG9yaXpvbnRhbCBTY3JvbGxiYXIhISFcbiAgICAgICAgICAgIGhlaWdodCArPSAxN1xuICAgICAgICB9XG4gICAgICAgIHZhciBuZXdXaWR0aCA9IE1hdGgubWF4KG1pbldpZHRoLCB3aWR0aCk7XG4gICAgICAgIHZhciBuZXdIZWlnaHQgPSBNYXRoLm1heChtaW5IZWlnaHQsIGhlaWdodCk7XG4gICAgICAgIHNldFNpemUobmV3V2lkdGgsIG5ld0hlaWdodCk7XG4gICAgfTtcblxuICAgIHZhciBpbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvKiBXZSB3YW50IG5hbm9VSSB3aW5kb3dzIHRvIG9iZXkgdGhlIGxpbWl0cyByZWdhcmRsZXNzLCBcbiAgICAgICAgYW5kIHdlJ3JlIGhpamFja2luZyB0aGlzIGxpYnJhcnkgdG8gZG8gc28sIGV2ZW4gaWYgZmFuY3kgbW9kZSBpcyB0dXJuZWQgb2ZmLlxuICAgICAgICBUbyBiZSBmYWlyLCB0aGlzIGRvZXNuJ3Qgc3RvcCB0aGUgdXNlciBmcm9tIHNocmlua2luZyB0aGVtIHBhc3QgdGhlaXIgaW50ZW5kZWQgbGltaXQgd2hlbiB0aGV5J3JlIG5vdCBpbiBmYW5jeSBtb2RlLCBcbiAgICAgICAgYnV0IGl0J3MgYSBuaWNlIHNhZmVndWFyZCBhZ2FpbnN0IHNob2RkaWx5LWNvZGVkIFVJcy4gKi9cbiAgICAgICAgb2JleUxpbWl0cygpO1xuXG4gICAgICAgIGlmKCFOYW5vU3RhdGVNYW5hZ2VyLmdldERhdGEoKS5jb25maWcudXNlci5mYW5jeSkge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICBmYW5jeUNocm9tZSgpO1xuICAgICAgICAvLyAuLi4gYnV0IHdoZW4gZmFuY3kgbW9kZSBpcyB0dXJuZWQgb24sIHdlIGhhdmUgdG8gZG8gaXQgYWdhaW4gdG8gbWFrZSBzdXJlXG4gICAgICAgIC8vIHRoYXQgdGhlIHdpbmRvdyBvZmZzZXRzIGFyZSBjb3JyZWN0IGZvciB0aGUgc2xpZ2h0bHkgZGlmZmVyZW50IHdpbmRvdy5cbiAgICAgICAgb2JleUxpbWl0cygpO1xuIFxuICAgICAgICBhdHRhY2hCdXR0b25zKCk7XG4gICAgICAgIGF0dGFjaERyYWdBbmRSZXNpemUoKTtcbiAgICB9O1xuXG4gICAgdmFyIGZhbmN5Q2hyb21lID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIE5hbm9VdGlsaXR5LndpbnNldChcInRpdGxlYmFyXCIsIDApO1xuICAgICAgICBOYW5vVXRpbGl0eS53aW5zZXQoXCJjYW4tcmVzaXplXCIsIDApO1xuICAgICAgICBOYW5vVXRpbGl0eS53aW5zZXQoXCJ0cmFuc3BhcmVudC1jb2xvclwiLCBcIiNGRjAwRTRcIilcbiAgICAgICAgJCgnLmZhbmN5Jykuc2hvdygpO1xuICAgICAgICAkKCcjdWlUaXRsZUZsdWZmJykuY3NzKFwicmlnaHRcIiwgXCI3MnB4XCIpO1xuICAgICAgICAkKCcuc3RhdHVzaWNvbicpLmNzcyhcImxlZnRcIiwgXCIzNHB4XCIpO1xuICAgICAgICAkKCcjdWlUaXRsZVRleHQnKS5jc3MoXCJsZWZ0XCIsIFwiNjZweFwiKTtcbiAgICB9O1xuXG4gICAgdmFyIGF0dGFjaEJ1dHRvbnMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGNsb3NlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gTmFub1V0aWxpdHkuY2xvc2UoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIG1pbmltaXplID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gTmFub1V0aWxpdHkud2luc2V0KFwiaXMtbWluaW1pemVkXCIsIFwidHJ1ZVwiKTtcbiAgICAgICAgfTtcbiAgICAgICAgJChcIi5jbG9zZVwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgY2xvc2UoKTtcbiAgICAgICAgfSk7XG4gICAgICAgICQoXCIubWluaW1pemVcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIG1pbmltaXplKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB2YXIgYXR0YWNoRHJhZ0FuZFJlc2l6ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAvKiBEcmFnICovXG4gICAgICAgICQoXCJib2R5XCIpLm9uKFwibW91c2Vtb3ZlXCIsIFwiI3VpVGl0bGVXcmFwcGVyXCIsIGZ1bmN0aW9uIChldikge1xuICAgICAgICAgICAgZHJhZyhldik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoXCJib2R5XCIpLm9uKFwibW91c2Vkb3duXCIsIFwiI3VpVGl0bGVXcmFwcGVyXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGRyYWdnaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmICgkKHRoaXMpWzBdLnNldENhcHR1cmUpIHsgJCh0aGlzKVswXS5zZXRDYXB0dXJlKCk7IH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgJChcImJvZHlcIikub24oXCJtb3VzZXVwXCIsIFwiI3VpVGl0bGVXcmFwcGVyXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGRyYWdnaW5nID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoJCh0aGlzKVswXS5yZWxlYXNlQ2FwdHVyZSkgeyAkKHRoaXMpWzBdLnJlbGVhc2VDYXB0dXJlKCk7IH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLyogUmVzaXplICovXG4gICAgICAgICQoXCJib2R5XCIpLm9uKFwibW91c2Vtb3ZlXCIsIFwiZGl2LnJlc2l6ZUFyZWFcIiwgZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgICAgICByZXNpemUuY2FsbCh0aGlzLCBldik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoXCJib2R5XCIpLm9uKFwibW91c2Vkb3duXCIsIFwiZGl2LnJlc2l6ZUFyZWFcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmVzaXppbmcgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKHRoaXMuc2V0Q2FwdHVyZSkgeyB0aGlzLnNldENhcHR1cmUoKTsgfVxuICAgICAgICB9KVxuXG4gICAgICAgICQoXCJib2R5XCIpLm9uKFwibW91c2V1cFwiLCBcImRpdi5yZXNpemVBcmVhXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJlc2l6aW5nID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAodGhpcy5yZWxlYXNlQ2FwdHVyZSkgeyB0aGlzLnJlbGVhc2VDYXB0dXJlKCk7IH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8qIFN0b2xlbiBHb29uIGNvZGUgZnR3IChDQyBCWS1OQy1TQSB2My4wKSAqL1xuICAgIHZhciBkcmFnZ2luZywgbGFzdFgsIGxhc3RZO1xuICAgIHZhciBkcmFnID0gZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgIGV2ID0gZXYgfHwgd2luZG93LmV2ZW50O1xuICAgICAgICBpZiAobGFzdFggPT09IGV2LnNjcmVlblggJiYgbGFzdFkgPT09IGV2LnNjcmVlblkpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGxhc3RYID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxhc3RYID0gZXYuc2NyZWVuWDtcbiAgICAgICAgICAgIGxhc3RZID0gZXYuY2xpZW50WTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkcmFnZ2luZykge1xuICAgICAgICAgICAgdmFyIGR4ID0gKGV2LnNjcmVlblggLSBsYXN0WCk7XG4gICAgICAgICAgICB2YXIgZHkgPSAoZXYuc2NyZWVuWSAtIGxhc3RZKTtcbiAgICAgICAgICAgIGR4ICs9IHdpbmRvdy5zY3JlZW5MZWZ0IC0gb2Zmc2V0WDtcbiAgICAgICAgICAgIGR5ICs9IHdpbmRvdy5zY3JlZW5Ub3AgLSBvZmZzZXRZO1xuXG4gICAgICAgICAgICBzZXRQb3MoZHgsIGR5KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxhc3RYID0gZXYuc2NyZWVuWDtcbiAgICAgICAgbGFzdFkgPSBldi5zY3JlZW5ZO1xuICAgIH1cblxuICAgIHZhciByZXNpemluZywgcmVzaXplV29ya2luZ1xuICAgIHZhciByZXNpemUgPSBmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgaWYgKHJlc2l6ZVdvcmtpbmcpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlc2l6ZVdvcmtpbmcgPSB0cnVlO1xuICAgICAgICBldiA9IGV2IHx8IHdpbmRvdy5ldmVudDtcblxuICAgICAgICBpZiAobGFzdFggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbGFzdFggPSBldi5zY3JlZW5YIC0gb2Zmc2V0WDtcbiAgICAgICAgICAgIGxhc3RZID0gZXYuc2NyZWVuWSAtIG9mZnNldFk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmVzaXppbmcpIHtcbiAgICAgICAgICAgIHZhciB3aWR0aCA9ICQod2luZG93KS53aWR0aCgpO1xuICAgICAgICAgICAgdmFyIGhlaWdodCA9ICQod2luZG93KS5oZWlnaHQoKTtcblxuICAgICAgICAgICAgaWYoJChcImJvZHlcIikuaGVpZ2h0KCkgPj0gKCQod2luZG93KS5oZWlnaHQoKSAtIDI5KSkgeyAvLyBWZXJ0aWNhbCBTY3JvbGxiYXIhISFcbiAgICAgICAgICAgICAgICB3aWR0aCArPSAxNyAvLyAxNyBwaXhlbHMgaXMgdGhlIHdpZHRoIG9mIGEgc2Nyb2xsYmFyXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKCQoZG9jdW1lbnQpLndpZHRoKCkgPiAkKHdpbmRvdykud2lkdGgoKSkgeyAvLyBIb3Jpem9udGFsIFNjcm9sbGJhciEhIVxuICAgICAgICAgICAgICAgIGhlaWdodCArPSAxN1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgcnggPSBOdW1iZXIoJCh0aGlzKS5hdHRyKFwicnhcIikpO1xuICAgICAgICAgICAgdmFyIHJ5ID0gTnVtYmVyKCQodGhpcykuYXR0cihcInJ5XCIpKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIGR4ID0gKChldi5zY3JlZW5YLW9mZnNldFgpIC0gbGFzdFgpO1xuICAgICAgICAgICAgdmFyIGR5ID0gKChldi5zY3JlZW5ZLW9mZnNldFkpIC0gbGFzdFkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgbmV3WCA9IHdpbmRvdy5zY3JlZW5MZWZ0IC0gb2Zmc2V0WDtcbiAgICAgICAgICAgIHZhciBuZXdZID0gd2luZG93LnNjcmVlblRvcCAtIG9mZnNldFk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciBuZXdXID0gd2lkdGggKyAoZHggKiByeCk7XG4gICAgICAgICAgICBpZihyeCA9PSAtMSl7XG4gICAgICAgICAgICAgICAgbmV3WCArPSBkeDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBuZXdIID0gaGVpZ2h0ICsgKGR5ICogcnkpO1xuICAgICAgICAgICAgaWYocnkgPT0gLTEpe1xuICAgICAgICAgICAgICAgIG5ld1kgKz0gZHk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIG5ld1cgPSBNYXRoLm1heChtaW5XaWR0aCwgbmV3Vyk7XG4gICAgICAgICAgICBuZXdIID0gTWF0aC5tYXgobWluSGVpZ2h0LCBuZXdIKTsgXG4gICAgICAgICAgICBzZXRQb3MobmV3WCwgbmV3WSk7XG4gICAgICAgICAgICBzZXRTaXplKG5ld1csIG5ld0gpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGFzdFggPSBldi5zY3JlZW5YIC0gb2Zmc2V0WDtcbiAgICAgICAgbGFzdFkgPSBldi5zY3JlZW5ZIC0gb2Zmc2V0WTtcblxuICAgICAgICByZXNpemVXb3JraW5nID0gZmFsc2U7XG4gICAgfTtcbiAgICAvKiBFbmQgc3RvbGVuIEdvb24gY29kZSAqL1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgaW5pdDogZnVuY3Rpb24gKCkgeyAvL2NyYXp5IGJ1dCBlbnN1cmVzIGNvcnJlY3QgbG9hZCBvcmRlciAobmFub3V0aWwgLSBuYW5vdGVtcGxhdGUgLSBuYW5vd2luZG93KVxuICAgICAgICAgICAgJChkb2N1bWVudCkub24oJ3RlbXBsYXRlc0xvYWRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpbml0KCk7XG4gICAgICAgICAgICB9KTsgXG4gICAgICAgIH1cbiAgICB9O1xufSgpOyJdfQ==
